webpackJsonp([4],{"+0Pk":function(e,t,n){t.template=n("ZaDG"),t.controller=n("K0OK").default,t.controllerAs="$ctrl"},"+341":function(e,t){e.exports='<os-container os-src="{{vm.src}}" style=margin:-10px></os-container>'},"+9Bh":function(e,t,n){"use strict";function i(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}function a(e,t){const n=p()(e,e=>e.id===+t);if(n)return n;{const n=e.reduce((e,t)=>[...e,...t.childList],[]);return n.length?a(n,t):void 0}}var s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("o5Mu"),p=n.n(l),u=n("depk"),d=n.n(u),h=n("BXMS"),m=n.n(h),f=n(0),g=n.n(f);g.a.module("app").run(["$templateCache",e=>{e.put("https://shadow.elemecdn.com/faas/melody/tree-selector.html",n("EA+7"))}]);let v=function(){function e(t,n,i){o()(this,e),this.$scope=t,this.$document=n,this.$element=i}return c()(e,[{key:"$onInit",value:function(){this.showTreeView=!1,this.effectList=[],this.direction=window.isOverV505Client?"right":"left",this.light=this.light||!1,this.selectable=this.selectable||["ROOT","GROUP","LEAF"]}},{key:"$onChanges",value:function(){this.treeData&&(this.node=m()(this.treeData[0]),this.selected?this.selectedNode=a(this.treeData,this.selected):this.selectedNode={name:this.node.name,id:this.node.id})}},{key:"$onDestroy",value:function(){this.off()}},{key:"$postLink",value:function(){this.off=i(document,"click",e=>{if(this.$element[0].contains(e.target))return;this.showTreeView=!1;this.$scope.$digest()})}},{key:"toggle",value:function(e){this.showTreeView=!this.showTreeView}},{key:"selectAll",value:function(){var e=this.node;const t=e.id,n=e.name,i=e.restaurantType;this.selectedNode={id:t,name:n,restaurantType:i},this.effectList=[],this.showTreeView=!1,"function"==typeof this.onSelect&&this.onSelect({node:this.selectedNode})}},{key:"select",value:function(e,t){if(d()(this.selectable,t.restaurantType)){if(g.a.element(e.target).scope().node.id===t.id){const e={name:t.name,id:t.id,restaurantType:t.restaurantType};this.selectedNode=e,this.effectList=[t.id],"function"==typeof this.onSelect&&this.onSelect({node:e})}else this.effectList=[t.id,...this.effectList];this.showTreeView=!1}}},{key:"enter",value:function(e){e.$enter=!0,this.$leaveNode&&this.$leaveNode.id!==e.id&&this.$leaveNode.id!==e.parentId&&(this.$leaveNode.$enter=!1)}},{key:"leave",value:function(e){this.$leaveNode=e}}]),e}();v.$inject=["$scope","$document","$element"],t.a={template:n("Pavo"),controller:v,bindings:{treeData:"<",selected:"<",onSelect:"&",direction:"@",light:"<",selectable:"<"}}},"+ANz":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},"+BYc":function(e,t){e.exports="<tab ui-sref=app.multishop.searchresult>搜索结果</tab> "},"+asM":function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("YEW4"),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("f4CT");let y=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.mealTakenAddress="",n.feeConfig=null,n.administrativeRegions=null,n.crowdShopStatusArr=[],n.controlledShopStatusArr=[],n.packStatus={},n}return d()(t,e),c()(t,[{key:"getMealTakenAddress",value:function(){return this.mealTakenAddress}},{key:"getIsControlledByEleme",value:function(){return this.isControlledByEleme}},{key:"getDeliveryFeeThreshold",value:function(){return this.deliveryFeeThreshold}},{key:"removeMealTakenAddress",value:function(){this.mealTakenAddress=null}},{key:"getRestaurantDeliveryTime",value:function(){return this.restaurantDeliveryTime}},{key:"getControlledShopProductStatus",value:function(e){var t=this,n=parseInt(e),i=-1;return m()(t.controlledShopStatusArr,e=>{if(e.shopId===n)return void(i=e.controlledStatus)}),i}},{key:"getCrowdShopProductStatus",value:function(e){var t=this,n=parseInt(e),i="UNCONTROLLED";return m()(t.crowdShopStatusArr,e=>{if(e.shopId===n)return void(i=e.crowdShopStatus)}),i}},{key:"getIsCrowdShopProductVisible",value:function(){return this.isCrowdVisible}},{key:"canEnquiry",value:function(e){return!0}},{key:"queryDeliveryFeeConfig",value:function(){return this.feeConfig}},{key:"getDeliveryServiceEvaluationTags",value:function(){return this.deliveryEvaluationTags}},{key:"getPromisedCookingTime",value:function(){return this.promisedCookingTime}},{key:"getPromisedCookingTimeMax",value:function(){return this.promisedCookingTimeMax}},{key:"getZeroDeliveryGray",value:function(){return this.zeroGray}},{key:"getDeliveryGray",value:function(){return this.deliveryGray}},{key:"getRestaurantFeeRule",value:function(){return this.restaurantFeeRule}},{key:"getPackStatus",value:function(){return this.packStatus}},{key:"getHandlers",value:function(){return{[v.a.GET_MEAL_TOKEN_ADDRESS]:e=>{this.mealTakenAddress=e.mealTakenAddress},[v.a.GET_IS_CONTROLLED_BY_ELEME]:e=>{this.isControlledByEleme=e.isControlledByEleme},[v.a.GET_DELIVERY_FEE_THRESHOLD]:e=>{this.deliveryFeeThreshold=e.deliveryFeeThreshold},[v.a.GET_CONTROLLED_STATUS]:e=>{this.controlledShopStatusArr.push({shopId:e.shopId,controlledStatus:e.controlledStatus})},[v.a.GET_CROWD_STATUS]:e=>{this.crowdShopStatusArr.push({shopId:e.shopId,crowdShopStatus:e.crowdShopStatus})},[v.a.GET_IS_CROWD_VISIBLE]:e=>{this.isCrowdVisible=e.result},[v.a.GET_RESTAURANT_DELIVERY_TIME]:e=>{this.restaurantDeliveryTime=e.result},[v.a.QUERY_DELIVERY_FEE_CONFIG]:e=>{this.feeConfig=e.result},[v.a.GET_DELIVERY_EVALUATION_TAGS]:e=>{this.deliveryEvaluationTags=e.result},[v.a.GET_MEAL_COOKING_TIME]:e=>{this.promisedCookingTime=e.result},[v.a.GET_MEAL_COOKING_TIME_MAX]:e=>{this.promisedCookingTimeMax=e.result},[v.a.GET_DELIVERY_EVALUATION_TAGS]:e=>{this.deliveryEvaluationTags=e.result},[v.a.SET_ZERO_DELIVERY_GRAY]:e=>{this.zeroGray=e.result},[v.a.SET_DELIVERY_GRAY]:e=>{this.deliveryGray=e.result},[v.a.SET_RESTAURANT_FEE_RULE]:e=>{this.restaurantFeeRule=e.result},[v.a.UPDATE_PACK_STATUS]:e=>{this.packStatus=e.melodyAllPackStatus}}}}]),t}(g.a.Store);t.a=new y},"+mn4":function(e,t,n){"use strict";n("gAem")},"+qb0":function(e,t,n){t.template=n("ntLN"),t.controller=n("NSgz").default,t.controllerAs="$ctrl"},"/2n1":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},"/5Nw":function(e,t){e.exports=' <ul class=tab-sidebar> <li> <a ng-class="{active: refundOrderStatus.toRefund}" ng-click="changeRefundStatus(\'toRefund\')" ng-track="{{getPageName()}}-tab-returning">待处理退单</a> </li> <li> <a ng-class="{active: refundOrderStatus.refunding}" ng-click="changeRefundStatus(\'refunding\')" ng-track="{{getPageName()}}-tab-returned">处理中退单</a> </li> </ul> <div ng-show=refundOrderStatus.toRefund class="order-cards pt0"> <order-card ng-repeat="https://shadow.elemecdn.com/faas/melody/order in unprocessedRefundingOrders track by order.id" order=order restaurant=getRestaurant(order.restaurantId) on-agree-refund=agreeRefund on-refuse-refund=refuseRefund> </order-card> <p ng-show=!unprocessedRefundingOrders.length class=no-order>暂时无待处理退单</p> </div> <div ng-show=refundOrderStatus.refunding class="order-cards pt0"> <order-card ng-repeat="https://shadow.elemecdn.com/faas/melody/order in processingRefundingOrders track by order.id" order=order restaurant=getRestaurant(order.restaurantId) on-agree-refund=agreeRefund on-refuse-refund=refuseRefund> </order-card> <p ng-show=!processingRefundingOrders.length class=no-order>暂时无处理中退单</p> </div> '},"/6Yq":function(e,t){e.exports='<tab ui-sref=app.multishop.processcenter.processing>待处理 <span ng-show="unprocessedOrders.length > 0" class=unprocess-amount-notice>{{unprocessedOrders.length}}</span> </tab> <tab ui-sref="app.multishop.processcenter.processed({ pageIndex: 1 })">已处理</tab> <tab ui-sref=app.multishop.processcenter.returning>退单中 <span class=unprocess-amount-notice ng-show="unprocessedRefundingOrders.length > 0"> {{unprocessedRefundingOrders.length}}</span> </tab> <tab ui-sref=app.multishop.processcenter.searching ng-show=isSearching>搜索结果</tab> <div class=auto-confirm-switch ng-click=autoConfirmModelShow()> <div ng-show=autoConfirm>自动接单中，点击关闭</div> <div ng-show=!autoConfirm>点击启用自动接单</div> </div> <m-modal m-title=启用自动接单功能 is-show=openAutoConfirmModelShow is-light=true size=middle> <div class=mb10>启用自动接单功能后，所有新订单将不需要人工操作，自动由系统接受。您可以随时关闭自动接单模式。</div> <p ng-show="unprocessedOrders.length > 0"> 当前 <span class=color-red> {{unprocessedOrders.length}} 张未处理</span> 订单将被系统自动接受。 </p> <p> <input type=checkbox ng-model=autoDeliveryTemp id=autoDelivery> <label for=autoDelivery class=fs14>所有新订单自动请求配送, 并接受配送价格变动</label> </p> <div class=auto-confirm-dialog-footer> <button class="btn btn-default" ng-click="openAutoConfirmModelShow = false"> 取消 </button> <button class="btn btn-primary" ng-click=switchAutoConfirm()> 立即启用 </button> </div> </m-modal> <m-modal m-title=关闭自动接单功能 is-show=closeAutoConfirmModelShow is-light=true size=middle> <div>关闭自动接单功能后，您需要手动处理每一张新订单，系统将不会自动接受。</div> <div class=auto-confirm-dialog-footer> <button class="btn btn-default" ng-click="closeAutoConfirmModelShow = false"> 取消 </button> <button class="btn btn-primary" ng-click=switchAutoConfirm()> 立即关闭 </button> </div> </m-modal>'},"/8Ty":function(e,t){e.exports='<div class=login-topbar> <div class=login-topbar-container> <div class=login-topbar-left> <i class=icon-eleme></i> <span>商家版</span> </div> <a class=login-topbar-right ng-href="{{$ctrl.mobile}}" target=_blank ng-click=$ctrl.mobileDownload($event)> <i class=icon-phone></i> <span>手机版下载</span> </a> </div> </div> '},"/9hE":function(e,t,n){"use strict";function i(e,t,n,i,a){function o(){let t=p.a.getAutoConfirm(s()(l.a.getCurrentProfile(),"username"));e.autoConfirm=t[0],e.autoDelivery=t[1]}function h(){var a=e.unprocessedOrders[0],s=u.a.canEnquiry(a.restaurantId);t.confirmPrintOrder(a,p.a.getRestaurantById(a.restaurantId)).then(()=>{if(e.autoDelivery){if(n.show("#"+a.id+"号订单已确认"),d.a.activate("autoProcess"),s)return i.enquiryCallDelivery(a.id,!0);var o=("AVAILABLE"===u.a.getCrowdShopProductStatus(a.restaurantId)||"CANCELING"===u.a.getCrowdShopProductStatus(a.restaurantId)||p.a.getCurrentPlatform(a.restaurantId))&&1!==u.a.getControlledShopProductStatus(a.restaurantId)&&3!==u.a.getControlledShopProductStatus(a.restaurantId);if(o)return t.callDeliveryNoReload(a.id,a.restaurantId)}else n.show("#"+a.id+"号订单已确认")})}function m(){o(),e.unprocessedOrders=c.a.getUnprocessedOrders(),e.unprocessedOrders.length>0?e.autoConfirm?f():d.a.activate("newOrder"):d.a.remove("newOrder"),e.unprocessedRefundingOrders=c.a.getUnprocessedRefundingOrders()}d.a._enabled||(d.a.activate=function(){},d.a.remove=function(){});var f=r()(h,2e3);m(),p.a.onChange(m),c.a.onChange(m),e.$on("$destroy",()=>{c.a.offChange(m);p.a.offChange(m)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("A7Dr"),s=n.n(a),o=n("V/bW"),r=n.n(o),c=n("9UnT"),l=n("t4A1"),p=n("RG6k"),u=n("+asM"),d=n("4fS4");i.$inject=["$scope","OrderAction","Alert","ShopDeliveryAction","clientVersion"]},"/BXE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i);n("xhgP"),n("w5XN"),a.a.module("app",["ngSanitize","ngBeat","ui.router","infinite-scroll","ngAnalytics","oc.lazyLoad"]),n("+XqU"),n("SfIo"),n("AtrF"),n("Nu/B"),n("QG1P"),n("SzED"),n("RB/N"),n("HuKM"),n("cdRO"),n("/lfr"),n("eRFU")},"/GTU":function(e,t,n){"use strict";function i(e,t,n){e.chainShopBillDetailUrl=n.chainShopBillDetailUrl,a.a.schedule(e.chainShopBillDetailUrl),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$sce","config"]},"/Js3":function(e,t,n){"use strict";var i=n("fZjL"),a=n.n(i),s=n("Zx67"),o=n.n(s),r=n("Zrlr"),c=n.n(r),l=n("wxAW"),p=n.n(l),u=n("zwoO"),d=n.n(u),h=n("Pf15"),m=n.n(h),f=n("a+F3");let g=function(e){function t(){return c()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),p()(t,[{key:"_$onInit",value:function(){return this.deliveryStateName="app.shop.delivery",this.db.getTaskData(this.rid).then(e=>{this.license=e.businessLicenseCheck;this.time=e.businessTimeCheck;this.deliveryFee=e.deliveryFeeCheck;this.foodNum=e.foodNumCheck;this.minOrderFee=e.minDeliveryOrderFeeCheck;this.logo=e.shopLogo;let t=a()(e).filter(t=>e[t]).length;this.checkResult=6===t?{text:"优秀",tip:"请继续保持",class:"perfect"}:t>=4?{text:"一般",tip:"请加油改进",class:"good"}:{text:"不佳",tip:"请尽快改进",class:"bad"}})}}]),t}(f.a);t.a={template:n("2+dm"),controller:g}},"/RAc":function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/custom?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},"/TBV":function(e,t){e.exports='<div class=dashboard-box-header> <h3>{{$ctrl.title}}</h3> <a ui-sref="{{$ctrl.navState}}" ng-if=$ctrl.navState ubt-click="{{$ctrl.ubtId}}"> <span>{{$ctrl.navTitle}}</span> <span class="icon icon-group_down"></span> </a> </div> '},"/Wu+":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},"/iXI":function(e,t,n){function i(e){e.state("app.multishop.processcenter.processed",{url:"/processed/:pageIndex",resolve:{processedOrders:["OrderAction","$stateParams","ResourceInit","ShopDeliveryAction",function(e,t,n,i){"ngInject";var a=t.pageIndex||1;return i.getDeliveryServiceEvaluationTags(),e.loadProcessedOrders(null,a)}]},views:{"tab-content@app.multishop":s},data:{pageId:"362"}})}i.$inject=["$stateProvider"];var a=n(0),s=n("X2SC");a.module("app").config(i)},"/lfr":function(e,t,n){n("PLTV"),n("4BtP"),n("95fK"),n("oFww"),n("N9rI"),n("8/MA"),n("W+Wk"),n("DNz+"),n("1Xv8"),n("KoNM"),n("8fYN"),n("3sJ1"),n("zAzf"),n("E6Yu"),n("qUhT"),n("N0Qf"),n("Q2E1"),n("8T8P"),n("oR71"),n("VUln"),n("ar2r")},"/mbe":function(e,t,n){"use strict";function i(){return{restrict:"E",transclude:!0,scope:{},controller:a,template:"<div ng-transclude></div>"}}function a(e){var t=e.navitems=[];this.addNavitem=function(e){t.push(e)}}function s(e){function t(t,n,i,a){const s=i.navitemActive||i.uiSref.split("(")[0];t.$on("$stateChangeSuccess",function(){t.selected=e.includes(s)}),a.addNavitem(t)}return{require:"^navbar",restrict:"E",transclude:!0,scope:{},link:t,template:'<div class="nav-item" ng-class="{active: selected}" ng-transclude></div>'}}a.$inject=["$scope"],s.$inject=["$state"],n(0).module("app").directive("navbar",i).directive("navitem",s)},"/wOq":function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h);let f=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.profiles=[],n.loginResult={},n.resetToken={},n.resetKeeper={},n.currentProfile=null,n}return d()(t,e),c()(t,[{key:"getCurrentProfile",value:function(){return this.currentProfile}},{key:"getProfiles",value:function(){return this.profiles}},{key:"getLoginResult",value:function(){return this.loginResult}},{key:"getResetToken",value:function(){return this.resetToken}},{key:"getResetKeeper",value:function(){return this.resetKeeper}},{key:"getHandlers",value:function(){return{["LOGIN_GET_PROFILES"]:e=>{this.profiles=e.profiles},["LOGIN_BY_USERNAME"]:e=>{this.loginResult=e.loginResult},["LOGIN_BY_MOBILE"]:e=>{this.loginResult=e.loginResult},["PASSWORD_START_RESET"]:e=>{this.resetToken=e.resetToken},["PASSWORD_GET_KEEPR"]:e=>{this.resetKeeper=e.resetKeeper},["LOAD_CURRENT_PROFILE"]:e=>{this.currentProfile=e.currentProfile}}}}]),t}(m.a.Store);t.a=new f},"/zyc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("f4CT"),g=n("QAIe"),v=n.n(g);let y=function(e){function t(e,n,i){o()(this,t);var s=p()(this,(t.__proto__||a()(t)).call(this));return s.$q=e,s.beat=n,s.Handle=i,s}return t.$inject=["$q","beat","Handle"],d()(t,e),c()(t,[{key:"fetchCurrentKeeper",value:function(){var e=this;return e.beat.arena.app.invoke("KeeperService.getChainKeeper").then(function(t){return e.dispatch({actionType:f.a.FETCH_CURRENT_KEEPER,chainKeeper:t}),t}).catch(t=>{e.dispatch({actionType:f.a.FETCH_CURRENT_KEEPER,chainKeeper:null});throw t})}}]),t}(v.a.ActionCreator);m.a.module("app").service("ProfileAction",y)},0:function(e,t){e.exports=angular},"096M":function(e,t){e.exports='<os-container class=chain-shop-manage os-src="{{vm.src}}" style=margin:-10px></os-container> '},"0AI2":function(e,t,n){e.exports.controller=n("cRQw").default,e.exports.template=n("Th1O")},"0PeU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(t,n,i,s,o,r){function c(){t.resetToken=a.a.getResetToken()}function l(e){var n=e?"voiceCount":"count";0!==t.reset[n]?(t.reset[n]--,i(()=>{l(e)},1e3)):t.reset[n]=60}t.Alert=o,t.resetToken=a.a.getResetToken(),t.step="begin",t.way="",t.reset={username:"",usernameCaptcha:"",count:60,voiceCount:60,verifyCode:"",verifyCodeCaptcha:"",identify:"",name:"",bankId:"",newPassword:"",newPasswordRepeat:""},a.a.onChange(c),t.backTxt=e.localStorage.getItem("ksid")?"返回首页":"返回登录页",t.updateCaptcha=function(){return t.reset.usernameCaptcha="",r.startReset(null)},t.getkeeperByUsername=function(){return r.getKeeperByUsername(t.resetToken.token,t.reset.username,t.reset.usernameCaptcha).then(()=>{t.resetKeeper=a.a.getResetKeeper();t.way="phone";t.step="first"}).catch(e=>{o.show(e.message,!0);"该用户名不存在"===e.message&&(t.reset.username="");t.updateCaptcha()})},t.sendVerifyCode=function(e){return r.sendVerifyCode(t.resetToken.token,e).then(()=>{l(e)}).catch(e=>{o.show(e.message,!0)})},t.refreshCaptcha=function(){return r.refreshCaptcha(t.resetToken.token).then(e=>{t.reset.verifyCodeImg=e}).catch(e=>{o.show(e.message,!0)})},t.checkVerifyCode=function(){return r.checkVerifyCode(t.resetToken.token,t.reset.verifyCode,t.reset.verifyCodeCaptcha).then(e=>{e.succeed?t.step="second":(o.show(e.errorMessage,!0),e.showCaptcha&&(t.reset.verifyCodeImg=e.captchaImageB64))}).catch(e=>{o.show(e.message,!0)})},t.checkIdentityInfo=function(){return r.checkIdentityInfo(t.resetToken.token,t.reset.identify,t.reset.name,t.reset.bankId).then(()=>{t.step="second"}).catch(e=>{o.show(e.message,!0)})},t.setNewPassword=function(){if(t.reset.newPassword===t.reset.newPasswordRepeat)return r.setNewPassword(t.resetToken.token,t.reset.newPassword).then(()=>{t.step="last";t.countDownLogin()}).catch(e=>{o.show(e.message,!0)});o.show("两次密码不一致",!0)},t.countDownLoginNum=5,t.countDownLogin=function(){var e=s(()=>{0===t.countDownLoginNum?(s.cancel(e),n.go("login")):t.countDownLoginNum--},1e3)},t.$on("destory",()=>{a.a.offChange(c)})}t.default=i;var a=n("/wOq");i.$inject=["$scope","$state","$timeout","$interval","Alert","ResetPasswordAction"]}.call(t,n("DuR2"))},"0ZIY":function(e,t){e.exports={"app.shop.history":{id:"344",busyLevel:"841",toggle:"856",print:"857",openInvalid:"858",invalidate:"859",copy:"860",setFilter:"861",sort:"862",reset:"863",filter:"864",printSum:"865"},"app.shop.searchresult":{id:"364",busyLevel:"841",confirm:"992",toggle:"842",print:"843",openInvalid:"858",invalidate:"859",copy:"860"},"app.multishop.searchresult":{id:"364",confirm:"992",toggle:"842",print:"843",openInvalid:"858",invalidate:"859",copy:"860"},"app.shop.today.processing":{id:"341",busyLevel:"841",confirm:"992",toggle:"842",print:"843",message:"848",openInvalid:"858",invalidate:"859",copy:"860"},"app.multishop.processcenter.processing":{id:"361",confirm:"992",toggle:"842",print:"843",message:"848",openInvalid:"858",invalidate:"859",copy:"860"},"app.shop.food.stock":{id:"350",fill:"880",clear:"881",edit:"882",search:"886",toggle:"889",change:"1548"},"https://shadow.elemecdn.com/faas/melody/app.shop.food.management.edit":{id:"348",editFood:"883",editGarnish:"884",removeFood:"885",saveFood:"878",addOption:"1545"},"app.shop.food.management":{id:"348",search:"886",createCate:"874",saveCate:"875",createFood:"876",createGarnish:"879",drag:"891",toggle:"889",editCate:"887",removeCate:"888",openOnOff:"892",enterFood:"890",fill:"880",clear:"881",change:"1548",batchMode:"2218"},"app.shop.food.management.onoff":{id:"348",selectCate:"893",selectFood:"894",onOff:"895"},"app.shop.food.recyclebin":{id:"349",putback:"896",putbackAll:"897"},"app.shop.food.management.guide":{id:"421"},"app.shop.today.processed":{id:"342",busyLevel:"841",toggle:"842",print:"843",message:"848",delivery:"844",openInvalid:"858",invalidate:"859",copy:"860"},"app.multishop.processcenter.processed":{id:"362",toggle:"842",print:"843",message:"848",delivery:"844",openInvalid:"858",invalidate:"859",copy:"860"},"app.shop.today.returning":{id:"343",busyLevel:"841",tab:"991",toggle:"842",message:"848",refund:"851",reject:"853",confirmRefund:"852",uploadRejct:"854",confirmReject:"855"},"app.multishop.processcenter.returning":{id:"363",tab:"991",toggle:"842",message:"848",refund:"851",reject:"853",confirmRefund:"852",uploadRejct:"854",confirmReject:"855"},"app.shop.market.poster":{id:"336",busyLevel:"841",positive:"818",negative:"819"},"app.shop.market.promotion.fullreduction":{id:"347",busyLevel:"841",create:"873",start:"993",end:"994",editLimit:"995",editDiscount:"996",save:"997",remove:"998",confirmRemove:"999",effect:"1000"},"app.shop.market.promotion.freedrink":{id:"402",busyLevel:"841",create:"1275",reset:"1276",stat:"1277",abandon:"1278",save:"1279"},"app.shop.market.promotion":{id:"464",goSelfActivity:"2101",goApplyActivity:"2102"},"app.shop.market.manage":{id:"465",goPromotion:"2105"},"app.shop.market.apply":{id:"466",applyActivity:"2103",quitActivity:"2104"},"https://shadow.elemecdn.com/faas/melody/app.shop.stat.info":{id:"345",busyLevel:"841",paging:"948",chartTab:"986",export:"867",time:"866"},"app.shop.stat.hotfood":{id:"346",busyLevel:"841",time:"866",filter:"869",sort:"870",star:"871",paging:"872",price:"987",confirmPrice:"988"},"app.shop.stat.visitor":{id:"360",busyLevel:"841",chartTab:"989",howto:"1001",time:"947"},"app.shop.stat.diagnosis":{id:"395",improveReport:"1869",improveAll:"1870",backAll:"1871",backReport:"1872",foodPrice:"1151",foodCount:"1152",foodPicture:"1153",foodCategoryPosition:"1154",promotion:"1155",deliverFee:"1156",receiveOrderSpeed:"1157",invalidOrder:"1158",onlinePayment:"1159",marketingActivity:"1160"},"https://shadow.elemecdn.com/faas/melody/app.shop.bill":{id:"365",busyLevel:"841"},"app.shop.settings.restaurant":{id:"353",busyLevel:"841",bulletin:"899",phones:"900",openTime:"901",intro:"902",map:"905",delivery:"904",deliveryfee:"903",reserve:"906",onlinepay:"907",receipt:"908",timeEnsured:"909",QRcode:"1786",url:"1787",credit:"2291",mutimode:"2293"},"app.shop.settings.service":{id:"354",busyLevel:"841"},"app.shop.settings.restaurant.identityCenter":{id:"2529",photo:"1788",certificate:"1789",identity:"2292",camera:"2530"},"https://shadow.elemecdn.com/faas/melody/app.shop.feedback.faq":{id:"355",busyLevel:"841",toTop:"910",question:"911"},"app.shop.feedback.survey":{id:"356",busyLevel:"841",edit:"912",submit:"913"},"app.shop.today.tangshi.dinein":{id:"357",category:"915",food:"916",tablepeople:"917",table:"918",remove:"919",confirm:"920",cashier:"921",confirmCashier:"922",print:"923",invalidate:"924",detail:"925",close:"926",toggle:"954"},"app.shop.today.tangshi.history":{id:"358",print:"939",invalidate:"940",detail:"941",tab:"942",date:"943",prev:"944",next:"945",close:"946"},"app.shop.today.tangshi.phone":{id:"359",category:"928",food:"929",tag:"930",edit:"931",remove:"932",confirmPrint:"933",print:"934",invalidate:"935",detail:"936",close:"937"},"app.shop.history.tangshi.dinein":{id:"357",category:"915",food:"916",tablepeople:"917",table:"918",remove:"919",confirm:"920",cashier:"921",confirmCashier:"922",print:"923",invalidate:"924",detail:"925",close:"926",toggle:"954"},"app.shop.history.tangshi.history":{id:"358",print:"939",invalidate:"940",detail:"941",tab:"942",date:"943",prev:"944",next:"945",close:"946"},"app.shop.history.tangshi.phone":{id:"359",category:"928",food:"929",tag:"930",edit:"931",remove:"932",confirmPrint:"933",print:"934",invalidate:"935",detail:"936",close:"937"},"app.shop.pay.business.rank.index":{id:"396",busyLevel:"841",buynow:"1204"},"https://shadow.elemecdn.com/faas/melody/app.shop.pay.business.rank.buy":{id:"398",busyLevel:"841",writeOrder:"1205",submitOrder:"1206"},"app.shop.pay.business.rank.iframe":{id:"397",busyLevel:"841"},"app.chainshop.food.management":{id:"348",search:"886",createCate:"874",saveCate:"875",createFood:"876",createGarnish:"879",drag:"891",toggle:"889",editCate:"887",removeCate:"888",enterFood:"890",createMenu:"1549",saveMenu:"1550",editMenu:"1546",removeMenu:"1547",fill:"880",clear:"881",change:"1548",batchMode:"2218"},"https://shadow.elemecdn.com/faas/melody/app.chainshop.food.management.edit":{id:"348",editFood:"883",editGarnish:"884",removeFood:"885",saveFood:"878",addOption:"1545",openOnOff:"892"},"app.chainshop.food.management.onoff":{id:"348",selectCate:"893",selectFood:"894",onOff:"895"},"app.chainshop.food.recyclebin":{id:"349",putback:"896",putbackAll:"897"},"app.chainshop.food.management.guide":{id:"421"},"https://shadow.elemecdn.com/faas/melody/app.chainshop.stats.info":{id:"424",today:"1648","7day":"1649","30day":"1650",startDate:"1651",endDate:"1652",selectRes:"1653",turnover:"1654",validOrderCount:"1655",perCustomer:"1656",shopSubsidy:"2258",turnoverDesc:"1657",validOrderDesc:"2259",averagePriceDesc:"2260",shopSubsidyDesc:"2261",export:"1658",prev:"1659",next:"1660",goInfoPage:"2272",goVisitorPage:"2263"},"app.chainshop.stats.visitor":{id:"477",today:"2264","7day":"2265","30day":"2266",startDate:"2267",endDate:"2268",visitorCount:"2269",buyerCount:"2270",conversion:"2271",export:"2262",goInfoPage:"2272",goVisitorPage:"2263"},"https://shadow.elemecdn.com/faas/melody/app.chainshop.bill":{id:"425"},"app.shop.pay.business.bid.index":{id:"456",trial:"2046",question:"2047",openService:"2048",cancelService:"2049",passwordCancelOk:"2274",bidWindow:"2275",apply:"2295"},"https://shadow.elemecdn.com/faas/melody/app.shop.pay.business.bid.set":{id:"457",question:"2063",open:"2050",clickEditLevel:"2051",clickEditBudget:"2052",clickAutoOpen:"2053",clickChongZhi:"2054",clickTiQu:"2055",clickLog:"2056",statsToday:"2057",statsSeven:"2058",statsThirty:"2059",statsUv:"2060",statsCost:"2061",statsAve:"2062",clickConfirmEditLevel:"2064",clickCancelEditLevel:"2065",clickConfirmEditBudget:"2066",clickCancelEditBudget:"2067",clickConfirmTiQu:"2068",clickCancelTiQu:"2069",clickConfirmChongZhi:"2070",clickCancelChongZhi:"2071"},"https://shadow.elemecdn.com/faas/melody/app.shop.pay.business.bid.fund":{id:"458",question:"2122"},"app.shop.pay.business.bid.question":{id:"459",feedback:"2072"},"app.shop.comment":{id:"480",type:"2329",star:"2330",reply:"2331",submit:"2332"},"app.shop.order.handle":{id:"343",openInvalid:"858",confirm:"992",busyLevel:"841",tab:"991",toggle:"842",message:"848",refund:"851",reject:"853",confirmRefund:"852",uploadRejct:"854",confirmReject:"855",invalidate:"859",delivery:"844",print:"857"},"app.shop.order.query":{openInvalid:"858",confirm:"992",id:"343",busyLevel:"841",tab:"991",toggle:"842",message:"848",refund:"851",reject:"853",confirmRefund:"852",uploadRejct:"854",confirmReject:"855",invalidate:"859",delivery:"844",print:"857"},"app.shop.order.search":{openInvalid:"858",confirm:"992",id:"343",busyLevel:"841",tab:"991",toggle:"842",message:"848",refund:"851",reject:"853",confirmRefund:"852",uploadRejct:"854",confirmReject:"855",invalidate:"859",delivery:"844",print:"857"}}},"0h+w":function(e,t,n){"use strict";n("+mn4")},1:function(e,t){e.exports=$},"11e1":function(e,t,n){"use strict";`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text font="big">发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" space="4" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7" font="tall"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text font="big">已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text font="big">应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7" font="big">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text></text>
    </line>
    <line>
      <text font="big">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="big">{{ consigneeName }}</text>
    </line>
    <line>
      <text font="tall">{{ userTipshandled }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="big">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text font="big">发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" space="4" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7" font="tall"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text font="big">已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text font="big">应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7" font="big">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text></text>
    </line>
    <line>
      <text font="big">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="big">{{ consigneeName }}</text>
    </line>
    <line>
      <text font="tall">{{ userTipshandled }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="big">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},"1PFG":function(e,t,n){t.template=n("oOJ1"),t.controller=n("3zEO").default,t.controllerAs="$ctrl"},"1Xv8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.feedback",{url:"/feedback?path&categoryIndex&issueIndex",views:{"wrapper@app":n("9PZP")}})}])},2:function(e,t){e.exports=Crystal},"2+dm":function(e,t){e.exports='<div class=dashboard-task> <dashboard-box-header title=任务中心 nav-title=门店信息 nav-state=app.shop.shop-info ubt-id=2969></dashboard-box-header> <div class=task-content> <div class=task-status ng-class=$ctrl.checkResult.class> <span class=title>完成情况</span> <span class=score>{{$ctrl.checkResult.text}}</span> <span class=tip>{{$ctrl.checkResult.tip}}</span> </div> <div class=task-list> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.foodNum, \'icon-issue\': !$ctrl.foodNum}"></span> <span>菜品数量多于10个</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.foodNum}" ui-sref="app.shop.food({path: \'management\'})">设置</span> </div> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.time, \'icon-issue\': !$ctrl.time}"></span> <span>营业时间不为空</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.time}" ui-sref=app.shop.shop-info>设置</span> </div> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.logo, \'icon-issue\': !$ctrl.logo}"></span> <span>有自己上传的LOGO</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.logo}" ui-sref=app.shop.shop-info>设置</span> </div> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.license, \'icon-issue\': !$ctrl.license}"></span> <span>已通过营业执照认证</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.license}" ui-sref="app.shop.shop-info({ path: \'certificate\'})">设置</span> </div> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.minOrderFee, \'icon-issue\': !$ctrl.minOrderFee}"></span> <span>起送价&le;50元</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.minOrderFee}" ui-sref="{{$ctrl.deliveryStateName}}">设置</span> </div> <div class=task-item> <span class=icon ng-class="{\'icon-check\': $ctrl.deliveryFee, \'icon-issue\': !$ctrl.deliveryFee}"></span> <span>配送费&le;10元</span> <span class=diving></span> <span class=anchor ng-class="{passed: $ctrl.deliveryFee}" ui-sref="{{$ctrl.deliveryStateName}}">设置</span> </div> </div> </div> </div> '},"28Bo":function(e,t,n){"use strict";n("Qis/")},"2Iso":function(e,t){e.exports='<os-container os-src="{{billUrl}}"></os-container> '},"2Sqo":function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("a+F3");let m=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"isSaveShow",value:function(){this.db.pushOrNot(this.rid).then(e=>{this.isSave=e}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"saveNewDeliveryRule",value:function(){this.isSave=!1,this.db.saveNewDeliveryRule(this.rid).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"$onInit",value:function(){this.isSaveShow()}}]),t}(h.a);t.a={template:n("ylHY"),controller:m}},"2sfz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("CfXW");let o=function e(t){a()(this,e),this.managerUrl=`${t.chainPermission}/keepers?from=melody`,s.a.schedule(this.managerUrl),s.a.hideAppWrapper()};o.$inject=["config"],t.default=o},3:function(e,t){},"30lJ":function(e,t,n){"use strict";function i(){return{restrict:"AE",scope:{index:"=index",total:"=total",offset:"=offset",onchange:"&onchange"},link:a,template:o}}function a(e){function t(){var t=Math.ceil((e.index-1)/e.offset);t<1&&(t=1),e.turn=t}function n(){var t=[];if(!e.total)return t;for(var n=2,i=e.total;n<i;n++)t.push(n);return t}e.Math=window.Math,e.offset=e.offset||5,e.turn=1,t(),e.pages=n(),e.prev=function(){e.index-1<1||(e.index--,t())},e.next=function(){e.index+1>e.total||(e.index++,t())},e.pageClick=function(n){n?e.index+1==e.total&&1!=n?e.index=n:(e.index=n,t()):e.index=this.i},e.prevTurn=function(){e.index=(e.turn-1)*e.offset+1,t()},e.nextTurn=function(){e.index=e.turn*e.offset+2,t()},e.$watch("total",function(){e.pages=n()}),e.$watch("index",function(t){t&&e.onchange()})}a.$inject=["scope"];var s=n(0),o=n("YHsY");s.module("app").directive("mSPage",i)},"36tV":function(e,t,n){"use strict";t.a=["$stateProvider",e=>{e.state("app.shop.notice",{url:"/notice?detail",views:{"wrapper@app":{template:n("7beu"),controller:n("RtYt").default,controllerAs:"$ctrl"}},title:"消息中心"}).state("app.chainshop.notice",{url:"/notice?detail",reloadOnSearch:!1,views:{"wrapper@app":{template:n("hwQq"),controller:n("g53R").default,controllerAs:"$ctrl"}},title:"消息中心"})}]},"37Ej":function(e,t,n){t.template=n("udFm"),t.controller=n("dfs2").default,t.controllerAs="vm"},"3Bxb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("exGp"),a=n.n(i),s=n("mvHQ"),o=n.n(s),r=n("d7EF"),c=n.n(r),l=n("Zrlr"),p=n.n(l),u=n("wxAW"),d=n.n(u),h=n("Aa7T"),m=n.n(h),f=n("V/bW"),g=n.n(f),v=n("nhte"),y=n.n(v),w=n("A7Dr"),I=n.n(w),A=n("u7jP"),b=n.n(A),S=n("PJh5"),C=n.n(S),k=n("KcnZ"),O=n("RG6k"),T=n("zALs"),D=n("+asM"),N=n("9UnT"),E=n("huSK"),R=n("NGSm"),M=(n.n(R),n("4fS4"));let P=null,L=null,U=function(){function e(t,n,i,a,s,o,r,c,l,u,d,h,m,f){p()(this,e);const v=O.a.getExceptionMessage();v&&a.show(v,!0),this.$interval=d,this.$state=n,this.analytics=i,this.Alert=a,this.sAction=o,this.ArenaAction=s,this.OrderAction=r,this.NavNoticeAction=h,this.beat=c,this.rid=I()(O.a.getCurrentRestaurant(),"id"),this.marketManagerquestions=[],this.queryOrderCount=0,this.queryReminderCount=0,this.shouldRemindUpdateDeliveryArea=!1,this.mmScore={solveQuestion:"satisfied",visitFrequency:"satisfied",serviceAttitude:"satisfied"},this.printerCount=0,this._autoConfirmOrder=g()(this.autoConfirmOrder,2e3),this.shopDetail={invalid:!I()(O.a.getRestaurantDetail(),"valid",!0),description:I()(O.a.getRestaurantDetail(),"description","尊敬的饿了么商户，您的店铺已被调整至无效状态，无法接收外卖订单。如需帮助请联系市场经理，若无市场经理请联系饿了么客服。您可搜索关注微信公众号“饿了么商家学院”，学习更多经营之道。")},T.a.onChangeWithScope(()=>{this.getNewOrder()},t),this.init(),D.a.onChangeWithScope(()=>{this.updateDelivery()},t),N.a.onChangeWithScope(()=>{this.updateAuto();this.updateOrder()},t),k.a.onChangeWithScope(()=>{this.updateAuto();this.updateOrder();this.getMarketManagerQuestions()}),c.browser.on("pc.print.openPrinterSettingDialog",()=>{n.go("app.shop.setting",{path:"print"})}),t.kfcUserType=O.a.getKfcUserType(),c.browser.on("pc.print.printersHasChanged",()=>{this.printersHasChanged()}),this.config=l,this.ksid=u,this.shopPolling(this.rid),t.$on("$destroy",()=>{this.clearPolling()}),this.ArenaAction.fetchPolling(this.rid),this.sAction.getDeliveryGray(this.rid),this.sAction.getPromisedCookingTime(this.rid),this.sAction.getPromiseCookingTimeMax(this.rid),this.NavNoticeAction.isISVInGray(this.rid),this.NavNoticeAction.isServingPackInGray(this.rid),this.NavNoticeAction.fetchCommentInfo(this.rid),m.loadGray(),f.loadGray(this.rid)}return d()(e,[{key:"init",value:function(){this.updateAuto(),this.printersHasChanged(),this.shopAgreementsPolling(),this.rid&&this.sAction.shouldRemindUpdateDeliveryArea(this.rid).then(e=>{this.shouldRemindUpdateDeliveryArea=e})}},{key:"shopPolling",value:function(e){this.OrderAction.getRemindOrderCount(e),this.OrderAction.pollingFor5Min(e),P=this.$interval(()=>{this.OrderAction.getRemindOrderCount(e);this.OrderAction.pollingFor5Min(e)},3e5),this.OrderAction.getNewOrderCount(e),this.OrderAction.pollingFor2Min(e),L=this.$interval(()=>{this.OrderAction.getNewOrderCount(e).catch(t=>{this.OrderAction.getNewOrderCount(e)});this.OrderAction.pollingFor2Min(e)},12e4)}},{key:"clearPolling",value:function(){P&&this.$interval.cancel(P),L&&this.$interval.cancel(L)}},{key:"printersHasChanged",value:function(){this.beat.browser.invoke("pc.print.getPrinters").then(e=>{var t=e.filter(e=>e.isEnabled).length;t<this.printerCount||0===t?M.a.activate("printerDisconnect"):M.a.remove("printerDisconnect");this.printerCount=t})}},{key:"updateDelivery",value:function(){const e=D.a.getControlledShopProductStatus(this.rid),t=D.a.getPromisedCookingTime();if(this.limitCookingTime=D.a.getPromisedCookingTimeMax()||30,this.isTrusteeship=-1!==e,this.promisedTimeRange=this.isTrusteeship?"0-"+this.limitCookingTime+"分钟":"0-120分钟",this.maxTime=this.isTrusteeship?this.limitCookingTime:120,this.promisedTime=t,!y()(e)&&!y()(t)){const e=window.localStorage[this.rid+"setPromisedCookingTimeupdateTime"];(!e||C()().unix()-e>=86400)&&this.sAction.isPromisedCookingTimeUpdated(this.rid).then(e=>{this.updateTimeModal=!e&&this.isTrusteeship})}}},{key:"enlargeDeliveryArea",value:function(){this.shouldRemindUpdateDeliveryArea=!1,this.sAction.enlargeDeliveryArea(this.rid)}},{key:"updateMealTakenTime",value:function(){return/\d/.test(this.promisedTime)?this.promisedTime>this.limitCookingTime?void this.Alert.show(`不能大于${this.limitCookingTime}`,!0):this.sAction.updateMealTakenTime(this.rid,this.promisedTime).then(()=>{this.Alert.show("修改成功");this.showUpdateTomorrow()}).catch(e=>{this.Alert.show(e.message,!0)}):void this.Alert.show("请输入正确的数字",!0)}},{key:"showUpdateTomorrow",value:function(){this.updateTimeModal=!1;const e=C()().startOf("day").unix();window.localStorage[this.rid+"setPromisedCookingTimeupdateTime"]=e}},{key:"updateAuto",value:function(){var e=k.a.getAutoProcessInfo(this.rid),t=c()(e,2);const n=t[0],i=t[1];this.autoConfirm=n,this.autoConfirm&&(E.a.init(),b()(()=>{E.a.getProcessOrder().then(e=>{R.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})),this.autoDelivery=i}},{key:"getNewOrder",value:function(){if(this.autoConfirm&&T.a.getNewOrderCount()>0&&!N.a.queryOrder().length){let e=T.a.getNewOrderIds();this.OrderAction.queryUnprocessedOrder(e).catch(e=>{this.Alert.show(e.message,!0)})}}},{key:"updateOrder",value:function(){this.unprocessedOrders=N.a.queryOrder(),this.autoConfirm&&this.unprocessedOrders.length&&this._autoConfirmOrder()}},{key:"autoConfirmOrder",value:(()=>{function e(){return t.apply(this,arguments)}var t=a()(function*(){let e=this.unprocessedOrders[0];if(!m()(e)){try{yield this.OrderAction.confirmOrder(e)}catch(e){return void console.error("autoConfirmOrderError, e=",e)}this.ArenaAction.printOrder(e,!0),this.OrderAction.traceOrderLog([e.id],"CONFIRM_ORDER_AUTO"),this.analytics.trackEvent(3009),window.perf&&window.perf.sendEvent({name:"自动接单埋点",id:"rJKO1RybW"}),this.Alert.show(`#${e.id}号订单已确认`),M.a.activate("autoProcess"),!this.autoDelivery||"ENQUIRY"!==e.callDeliveryType&&"DIRECT"!==e.callDeliveryType||this.OrderAction.shopCallDelivery(e.id,!0),this.OrderAction.getNewOrderCount(),R.container.broadcast("order.food_prepared","operate")}});return e})()},{key:"getMarketManagerQuestions",value:function(){this.isEvaluateShow=I()(k.a.getPolling(),"managerVotable"),this.isEvaluateShow&&this.ArenaAction.getMarketManagerQuestions(this.rid).then(()=>{this.marketManagerquestions=k.a.getMarketManagerQuestions();this.marketManagerquestions.forEach(e=>{e.answer=0})})}},{key:"submitEvaluation",value:function(){this.Alert.show("提交成功"),this.isEvaluateShow=!1;var e=this.marketManagerquestions.map(e=>({questionNum:e.questionNum,answerList:[e.answerList[e.answer]]}));const t=[this.rid,e];this.ArenaAction.setMarketManagerAnswer(...t)}},{key:"shopAgreementsPolling",value:function(){this.ArenaAction.getShopAgreements(10),this.$interval(()=>{this.ArenaAction.getShopAgreements(10)},72e5)}},{key:"shopDetailInvalidConfirm",value:function(){this.shopDetail.invalid=!1}}]),e}();U.$inject=["$scope","$state","analytics","Alert","ArenaAction","ShopDeliveryAction","OrderAction","beat","config","ksid","$interval","NavNoticeAction","GrayAction","ShopDecoAction"],t.default=U},"3TYZ":function(e,t,n){"use strict";n("Uj5z")},"3Ztm":function(e,t,n){"use strict";var i=n(1);t.a=function(){return{restrict:"A",scope:{isShow:"=isShow"},link:function(e,t){var n=i(t).find(".operation-selector");i(t).on("click",function(e){"block"===n.css("display")?n.css({display:"none"}):(i(".operation-selector").css({display:"none"}),n.css({display:"block"})),e.stopPropagation(),i(document).on("click",function(e){n.css({display:"none"}),i(document).off("click")})})}}}},"3dkY":function(e,t){e.exports='<os-container os-src="{{vm.roleUrl}}"></os-container> '},"3loI":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},"3qgy":function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("ilQr");let c=function(){function e(t,n,i){a()(this,e),this.$scope=t,this.$state=n,this.redCount=r.a.getNoticeNum()}return o()(e,[{key:"$onInit",value:function(){r.a.onChangeWithScope(()=>{this.redCount=r.a.getNoticeNum()},this.$scope)}},{key:"clickedBell",value:function(){const e=[...this.$state.current.name.split(".").slice(0,2),"notice"].join(".");this.$state.go(e)}}]),e}();c.$inject=["$scope","$state","NoticeAction"],t.a={controller:c,template:n("auG8")}},"3sJ1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("QCbo"),o=n("JyEj"),r=n("z4xQ"),c=n("IPI6"),l=n("QBuL"),p=n("raHX"),u=n("xITH"),d=n("/Js3"),h=n("oGa7"),m=n("ckcS"),f=n("XJQq"),g=n("SQ9m"),v=n("iRoq"),y=n("2Sqo"),w=n("TW4j");const I=a.a.module("app");I.config(s.a).service("Dashboard",o.a).service("History",r.a).component("dashboardOrder",c.a).component("dashboardFeedback",l.a).component("dashboardActivity",u.a).component("dashboardStats",p.a).component("dashboardHistory",h.a).component("dashboardTask",d.a).component("dashboardNotice",m.a).component("dashboardNoticeBar",f.a).component("dashboardBoxHeader",g.a).component("dashboardPackDialog",y.a).component("dashboardBdDialog",w.a).directive("navHistory",v.a),I.run(["History",e=>{}])},"3u+7":function(e,t){e.exports="data:image/png;base64,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"},"3zEO":function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/comment/info?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},4:function(e,t){},"492k":function(e,t,n){t.template=n("ASGk"),t.controller=n("b3f5").default,t.controllerAs="$ctrl"},"4BtP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("https://shadow.elemecdn.com/faas/melody/app.shop.food",{url:"/food?path&query",reloadOnSearch:!1,resolve:{isChain:["ResourceInit",function(e){return!1}]},views:{"wrapper@app":n("K6AV")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.food",{url:"/food?path",reloadOnSearch:!1,resolve:{isChain:["ResourceInit",function(e){return!0}]},views:{"wrapper@app":n("K6AV")}}).state("app.chainshop.syncgood",{url:"/syncgood",reloadOnSearch:!1,resolve:{isChain:["ResourceInit",function(e){return!0}]},views:{"wrapper@app":n("K6AV")}}).state("app.shop.physical",{url:"/physical?query",reloadOnSearch:!1,resolve:{isChain:["ResourceInit",function(e){return!1}]},views:{"wrapper@app":n("K6AV")}})}])},"4SiO":function(e,t,n){"use strict";function i(e,t,n){"ngInject";var i=t.orderId;this.src=`${n.melodyOrderUrl}/app/searching/${i}?shopId=${t.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper(),window.perf&&window.perf.sendEvent({name:"确定搜索订单",id:"S1nxyz8QW"}),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{"/app/processing"===t?e.go("app.shop.order.processing"):"/app/query"===t&&e.go("app.shop.order.querying")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config"]},"4fS4":function(e,t,n){"use strict";function i(){var e=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.newOrder.prefix+window.GLOBAL_ORDER_SOUND.newOrder.sound[0]]}),t=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.newOrder.prefix+window.GLOBAL_ORDER_SOUND.newOrder.sound[1]]}),n=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.autoProcess.prefix+window.GLOBAL_ORDER_SOUND.autoProcess.sound[0]]}),i=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.autoProcess.prefix+window.GLOBAL_ORDER_SOUND.autoProcess.sound[1]]}),a=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.urge.prefix+window.GLOBAL_ORDER_SOUND.urge.sound[0]]}),o=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.urge.prefix+window.GLOBAL_ORDER_SOUND.urge.sound[1]]}),c=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.cancel.prefix+window.GLOBAL_ORDER_SOUND.cancel.sound[0]]}),h=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.cancel.prefix+window.GLOBAL_ORDER_SOUND.cancel.sound[1]]}),m=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.refund.prefix+window.GLOBAL_ORDER_SOUND.refund.sound[0]]}),f=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.refund.prefix+window.GLOBAL_ORDER_SOUND.refund.sound[1]]}),g=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.exception.prefix+window.GLOBAL_ORDER_SOUND.exception.sound[0]]}),v=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.exception.prefix+window.GLOBAL_ORDER_SOUND.exception.sound[1]]}),y=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.printerDisconnect.prefix+window.GLOBAL_ORDER_SOUND.printerDisconnect.sound[0]]}),w=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.printerDisconnect.prefix+window.GLOBAL_ORDER_SOUND.printerDisconnect.sound[1]]}),I=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.booking.prefix+window.GLOBAL_ORDER_SOUND.booking.sound[0]]}),A=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.booking.prefix+window.GLOBAL_ORDER_SOUND.booking.sound[1]]}),b=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.networkDisconnect.prefix+window.GLOBAL_ORDER_SOUND.networkDisconnect.sound[0]]}),S=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.networkDisconnect.prefix+window.GLOBAL_ORDER_SOUND.networkDisconnect.sound[1]]}),C=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.printError.prefix+window.GLOBAL_ORDER_SOUND.printError.sound[0]]}),k=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.printError.prefix+window.GLOBAL_ORDER_SOUND.printError.sound[1]]}),O=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.othersConfirmOrder.prefix+window.GLOBAL_ORDER_SOUND.othersConfirmOrder.sound[0]]}),T=new p.Howl({src:[window.GLOBAL_ORDER_SOUND.othersConfirmOrder.prefix+window.GLOBAL_ORDER_SOUND.othersConfirmOrder.sound[1]]}),D={name:"newOrder",times:0,type:{0:e,1:t}},N={name:"autoProcess",times:0,type:{0:n,1:i}},E={name:"urge",times:0,type:{0:a,1:o}},R={name:"refund",times:0,type:{0:m,1:f}},M={name:"exception",times:0,type:{0:g,1:v}},P={name:"printerDisconnect",times:0,type:{0:y,1:w}},L={name:"cancel",times:0,type:{0:c,1:h}},U={name:"booking",times:0,type:{0:I,1:A}},x={name:"networkDisconnect",times:0,type:{0:b,1:S}},_={name:"printError",times:0,type:{0:C,1:k}},j={name:"othersConfirmOrder",times:0,type:{0:O,1:T}},G={networkDisconnect:x,printerDisconnect:P,newOrder:D,autoProcess:N,booking:U,exception:M,cancel:L,refund:R,urge:E,othersConfirmOrder:j,printError:_},z=!1,B=null,F=null,H=null,Y=null,W=null,Q=1;d._enabled=!0,d.soundList={},d.activate=function(e){G[e]&&!this.soundList.hasOwnProperty(e)&&(this.soundList[e]=G[e],this._initPlayList(e))},d.remove=function(e){var t=this;u.a.getSettings().then(n=>{r()(n,n=>{var i=l()(t.soundList,{name:n.name});if(!i)return;i.name===e&&0!==i.times&&(delete t.soundList[i.name],H===e&&(z=!1,B&&B.stop(),B=null,H=null),t._initPlayList())})})},d.testPlay=function(e,t){var n=this,i=l()(G,{name:e});if(i&&i.type[t]&&(B&&(B.stop(),B=null,H=null),"testPlay"!==H)){z=!0;var a=i.type[t];H="testPlay",a.volume(Q),a.play(),a.once("end",()=>{z=!1;H=null;F="testPlay";n._initPlayList()})}},d._initPlayList=function(e,t){var n=this;s.a.all([u.a.getSettings(),u.a.getOption()]).then(i=>{var a=i[0];var s=i[1];Q=s.volume.value;r()(a,i=>{var a=l()(n.soundList,{name:i.name});if(!a)return;a.name===e&&(Number(t)>=0?a.times=t:a.times=i.times,a.times<=0&&(delete n.soundList[a.name],n._initPlayList()));a.times>0&&(H=a.name,W=i.type,F&&H!==F&&(a.times=i.times))});!z&&H&&(z=!0,Y&&clearTimeout(Y),Y=setTimeout(()=>{n._play(H,W)},500))})},d._play=function(e,t){var n=this,i=e,a=l()(n.soundList,e=>e.name===i&&e.times>0);if(!a)return z=!1,B=null,void(H=null);var s=a.times;F=a.name,B=a.type[t],B.volume(Q),B.play(),B.once("end",()=>{if(!B)return;var e=0;s>0&&(e=s-1);z=!1;B=null;H=null;setTimeout(()=>{n._initPlayList(i,e)},500)})}}var a=n("//Fk"),s=n.n(a),o=n("hjLi"),r=n.n(o),c=n("o5Mu"),l=n.n(c),p=n("k9Ku"),u=(n.n(p),n("roBa")),d={init:i,error:function(e){this._js_error=e},_enabled:!1};t.a=d},"4iHo":function(e,t){e.exports='<os-container os-src="{{chainShopBillUrl}}"></os-container> '},"4qcw":function(e,t,n){t.template=n("iqE+"),t.controller=n("sg5U").default,t.controllerAs="$ctrl"},5:function(e,t,n){e.exports=n("/BXE")},"53t7":function(e,t,n){e.exports.controller=n("zk+i").default,e.exports.template=n("/6Yq")},"54q8":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},"5Hqf":function(e,t,n){e.exports.controller=n("W/iF").default,e.exports.template=n("JPSn")},"5LZX":function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("RG6k");let c=function(){function e(t,n,i,s){a()(this,e),this.profile=t,this.login=n,this.$state=i,this.Alert=s}return o()(e,[{key:"$onInit",value:function(){window.__napos__sendToBrowser__?this.profile.getCurrentProfile().then(e=>{this.username=e.username}):this.username=localStorage.getItem("username")||"viva la vida"}},{key:"logout",value:function(){this.login.logout(),this.profile.removeCurrentProfile(),this.$state.go("login")}},{key:"changeUserInfo",value:function(){-1!==location.href.indexOf("chain-shop")||-1!==location.href.indexOf("multi-shop")?this.Alert.show("请进入单店后再修改",!0,3e3):this.$state.go("app.shop.userinfo")}},{key:"toSurvey",value:function(){!r.a.getCurrentRestaurant()?this.Alert.show("请进入单店后再前往",!0,3e3):this.$state.go("app.shop.feedback")}}]),e}();c.$inject=["LoginProfileAction","LoginAction","$state","Alert"],t.a={controller:c,template:n("eukm")}},"5PHs":function(e,t){e.exports='<os-container os-src="{{billDetailUrl}}"></os-container> '},"5ale":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=height:100%></os-container> '},"5cqI":function(e,t,n){t.template=n("096M"),t.controller=n("BFDJ").default,t.controllerAs="vm"},"5fdX":function(e,t,n){t.template=n("c9d/"),t.controller=n("JulK").default,t.controllerAs="$ctrl"},"65PF":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAsCAYAAAD1s+ECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABSBJREFUeNrsWW1vFFUUPndm9q2LQCsF0fjSKiip8gGVaKpIqonyiSCJBGL4YCL8En+ISmLkk5+U0ohATCRIISpIBIMWFGgQC/Ztuzsz1+fcOdsdNtN2d+dutyae5OlOt7fnPvfc83bvqAMHD5FNqZAiXxHt9OfoYGWG1oYhVZSqH8ZfPAQ8DwwBLwN9QC+QBWaBm8AV4DvgNHAVKMWVeNQZeQx4DdgJbAWeEeJx2RDDU8DXwFng706RZ4s/DuwG9gOvyHdJwtyeELwOPAd0A8PVBSw3eSa+B/gQeHYR4vWSE/diV9PACHCXyW8URS8ARQsEZ4Bj4q/1BN4E3gcGWtDbBQxKPExwHDD5XcDbgjUWyE8Dt+vI8zxPy1wvpdDtSZxc5Dn4lwMS7astuUYxwR3XATtatHi95IXvDZ7kRSE+I9F8uT4lNSlTYpm4PAK8KlnGhmxifZ7kVZa7wCfAF8A/raYSHeX6kPO9rv2pB9hscXc5rW7yYhE/LVafaFWjnl+EfpB65Eobm8guS0mG9XmxOQOgnK66EhWgbmvg07agYtJLWAu0guW0m3Pqdt1No20WbYAHU7yB1mAHUNCagqg1CNMaJkFKToLbtiyhKOjCk6N1XBkngzsWibOX/OXYqPc+fk4CG3RIg8Ec9YSaQlg8qA27B1yTRdgQ1nc9NfmqtXtg6UG/THsqs/Rk6Bt3CWvDxoHvgVuWyLMhzqUmXwLJVbD4O0GJdvkl6sZzQuAw+ZPS1qYVTjAXgBOpyfumadE0gMz+KCxOWExC/z4H/MwTitXSyCjwDRdCKz4vhUky/IIyCXwJfC69TytBygb4FPiW/d6zGf4NyC/AZ7LmvVLmG5VzsnDuAP7sRD/vS99zRCo59+j90vN0JYznMX9IrHwFHOcs08ljoJbtvy5nU+7xt8sieqVQcnM3joer8Osz+JdT2KxfV8oZVksMnJH0yefTtWJ9JZ3GtEN6AiNvRjGiE5v71CyU9DTEVVU1XaTHBNJxRXpY6w3HpTHXM3O4C5xMUokjhWoCTxXlmHaPCYSkGg3ieT3KnPGUqc6cbk95OTrh5oyubDssn4OVpkD6OCbivR7yy2Y/HEVmUt2gHldHI0ehZ9TJmAr9Gyx/x3FMg+22g3zGVCBFP2JC8pRRmAeRXlDv46LFpEDEX2AhbG0PY3jhl9wMjYD8eTfL61do8AZWa90v/n65vkJb8XlPPP93WOrjTJG00rQ94D5H4+gUzl8dVAtaECcuv18E8aOZLroCH89Hu4D9pPfweViGf2SdfJUE+yQ7zD1sM5O54GRpNqNMoG3BDgyhv3fQ9yjTsEW74ElgnoWlj2XyyIue+d886epC+bZsvUzzsHW3eXAHcEjVkaXvg+RpBFsZn+N8qgLRIv7WjZH94k5l2PYS3G0YxH/AJ7vgKnyva8e76fhZp23kE31ZAnEM7nQkUzBBuM2v0D49g0UGxsePegXjKllNJih1E3O0jbwjrlStOLewAA5ah/0IoZjHLtyGm1zDF4HUCd3kHG2vsDV3ipxhCtY/6ebM944Ee1E3T7xqoI6Iil2WtHpwXvbepupOSfc9/xnL2zLE/+Q7TV43fppbFglrt4VLk1dk7yLUblJaoo2uNohrVhBxfv9UXGwh8VtiPoa9Fbum6LTFt1D0rmxR8nyb1Sdd2wfAu3LK7zR5tvq62N3kZBL5YbmC2Czt5/oV5vf8loZfXf6URH5EnrNifXeFkGZ35iPCeUp+NUr/CjAAXsiRakpRPwwAAAAASUVORK5CYII="},"6DI4":function(e,t,n){"use strict";n("ZtPF"),n("7uYe"),n("HA6K")},"6PMi":function(e,t,n){"use strict";`<document>
    <line>
      <text align="center" font="big">给后厨</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text font="tall">SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text font="tall">条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right">{% if quantity %} ×{{ quantity }}{% endif %}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <line>
      <text align="center" font="big">给后厨</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text font="tall">SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text font="tall">条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right">{% if quantity %} ×{{ quantity }}{% endif %}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},"6e6j":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api-shop.altb.elenet.me/"},payment:"http://vpca-base-payment-01.vm.elenet.me:9070/payment_webApi/payment/placeOrder",beat:{default:{uri:"https://app-api-shop.altb.elenet.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},activity:{uri:"https://app-api-shop.altb.elenet.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},shop:{uri:"https://app-api-shop.altb.elenet.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},rank:{uri:"https://app-api-shop.altb.elenet.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},goods:{uri:"https://app-api-shop.altb.elenet.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},order:{uri:"https://app-api-shop.altb.elenet.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},newOrder:{uri:"https://app-api-shop.altb.elenet.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},diagnosis:{uri:"https://app-api-shop.altb.elenet.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},delivery:{uri:"https://app-api-shop.altb.elenet.me/delivery/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/delivery/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},packs:{uri:"https://app-api-shop.altb.elenet.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},ugc:{uri:"https://app-api-shop.altb.elenet.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},arena:{uri:"https://app-api-shop.altb.elenet.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},shopGrowth:{url:"https://app-api-shop.altb.elenet.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},shopDeco:{uri:"https://app-api-shop.altb.elenet.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}},crm:{uri:"https://app-api-shop.altb.elenet.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.altb.elenet.me"}}},billUrl:"https://balance-desktop.faas.altb.elenet.me",billDetailUrl:"https://hydrosweb-test-altb.faas.elenet.me/bill",billDetailUrlForAfp:"https://hydrosweb.faas.altb.elenet.me/order/query?order_id=",chainShopBillUrl:"https://balance-headshop.faas.altb.elenet.me",chainShopBillDetailUrl:"https://hydroshead.faas.altb.elenet.me/bill",ubtUrl:"http://ubt.shop.alpha.elenet.me/eventlog",ubtFrom:"melody-development",goodsUrl:"https://melody-goods-test.faas.elenet.me",melodyStatsUrl:"https://melody-stats-test.faas.elenet.me/#",graceUrl:"http://em.alpha.elenet.me/",melodyPayUrl:"https://melody-pay-test.faas.elenet.me/#",melodyPackUrl:"http://melody-pack-test.faas.elenet.me/#",melodyActivityUrl:"https://melody-activity-test.faas.elenet.me",melodyOrderUrl:"https://melody-order.faas.alta.elenet.me",melodyShopUrl:"https://melody-shop-test.faas.elenet.me",receiptUrl:"http://eo.alpha.elenet.me/napos_web",websocketUrl:"https://client-api.alpha.elenet.me/api/line/access",appstoreUrl:"https://nest-market-test.faas.elenet.me",domUrl:"https://xy.alpha.elenet.me/feedback/homepage/index",poscodeUrl:"https://h5.altb.elenet.me/poscode",speUrl:"https://spe-test.faas.elenet.me",creditScoreUrl:"https://melody-credit-score-test.faas.elenet.me",melodyChainShopDashboardUrl:"https://melody-base-test.faas.elenet.me/dashboard",melodyBaseUrl:"https://melody-base-test.faas.elenet.me",melodySettingsUrl:"https://melody-settings-test.faas.elenet.me",melodyPayBidUrl:"https://bs-river-bid.faas.altb.elenet.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.altb.elenet.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.beta.elenet.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.altb.elenet.me/#/app/shop/vas/search",melodyPayChainBidUrl:"https://bs-river-bid.faas.altb.elenet.me/#/app/chainshop/vas/bid",melodyPayChainAccountUrl:"http://melody-vas-test.faas.elenet.me/chainaccount",melodyVasDasUrl:"https://das-napos.faas.alpha.elenet.me",chainPermission:"https://chain-permission-test.faas.elenet.me",melodyGuaranteeUrl:"https://melody-guarantee-test.faas.elenet.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.altb.elenet.me/speaker",melodyDeliveryUrl:"https://melody-delivery.faas.alpha.elenet.me",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons-test",fbsUrl:"https://melody-fbs.faas.altb.elenet.me/",crmUrl:"https://throne.faas.altb.elenet.me",melodyDecorateUrl:"https://melody-decorate.faas.altb.elenet.me"}},"6f1h":function(e,t){e.exports='<div class=shop-operating-status ng-show=$ctrl.rid> <div class=seperate></div> <div ml-dropdown direction=right new-style=new-style> <div ml-dropdown-toggle> <div ng-if="$ctrl.state !== \'open\'" class=shop-state ng-class=$ctrl.state> {{$ctrl.state | shopState}} </div> <div ng-if="$ctrl.state === \'open\' && $ctrl.nowIsInBusinessHour" class=shop-state ng-class=$ctrl.state> {{$ctrl.state | shopState}} </div> <div ng-if="$ctrl.state === \'open\' && !$ctrl.nowIsInBusinessHour" class=shop-state ng-class="\'closed\'"> 已关闭 </div> <span class="iconfont icon-switch"></span> <p class=shop-state-tips ng-if="!$ctrl.nowIsInBusinessHour && $ctrl.state === \'open\'">到达营业时间会自动调整为营业中</p> </div> <div ml-dropdown-menu> <span class=ml-dropdown-menu-arrow></span> <p class=business-hours> 营业时间: <span ng-repeat="t in $ctrl.businessHours track by $index"> {{t.startTime}}-{{t.endTime}} </span> </p> <div class=shop-action> <div class=switch-open ng-click=$ctrl.open() auth-check permission=shop_open_shop> <div class=active-icon> <i class="iconfont icon-success" ng-show="$ctrl.state === \'open\'"></i> </div> <div class=action-info> <p class=title>恢复营业</p> <p>按营业时间自动开关店</p> </div> </div> <div class=switch-delay auth-check permission=shop_close_shop ng-click="$ctrl.confirmReportClose(\'delay\')"> <div class=active-icon> <i class="iconfont icon-success" ng-show="$ctrl.state === \'delay\'"></i> </div> <div class=action-info> <p class=title>延时关店</p> <p>关店状态会在5分钟后生效</p> </div> </div> <div class=switch-closed ng-click="$ctrl.confirmReportClose(\'immediacy\')" auth-check permission=shop_close_shop> <div class=active-icon> <i class="iconfont icon-success" ng-show="$ctrl.state === \'closed\'"></i> </div> <div class=action-info> <p class=title>紧急关店</p> <p>严重影响顾客体验，请谨慎操作</p> </div> </div> </div> </div> </div> </div> <m-modal m-title=请如实选择关店原因 is-light=true size=small is-show=$ctrl.closeReportModal> <div class=close-report-modal> <div class=reason-tab> <div ng-class="{\'actived\': $ctrl.reasonType === tab.index}" ng-click=$ctrl.chooseTab(tab) ng-repeat="tab in $ctrl.closeReasonList"> {{tab.name}} </div> </div> <ul class=reasons> <li ng-repeat="reason in $ctrl.closeReasonList[0].items" ng-if="$ctrl.reasonType === 1"> <label><input type=radio ng-model=$ctrl.closeReasonIndex value="{{reason.name}}" name=close_reason>{{ reason.name }}</label> <p class=reason-tips ng-if="https://shadow.elemecdn.com/faas/melody/reason.desc && $ctrl.closeReasonIndex === reason.name">{{ reason.desc }}</p> </li> <li ng-repeat="reason in $ctrl.closeReasonList[1].items" ng-if="$ctrl.reasonType === 2"> <label><input type=radio ng-model=$ctrl.closeReasonIndex value="{{reason.name}}" name=close_reason>{{ reason.name }}</label> <p class=reason-tips ng-if="https://shadow.elemecdn.com/faas/melody/reason.desc && $ctrl.closeReasonIndex === reason.name">{{ reason.desc }}</p> </li> </ul> <div class="buttons-section flex justify-center"> <button class="btn btn-default mr30" ng-click="$ctrl.closeReportModal = false">暂不关店</button> <button class="btn btn-primary" ng-click=$ctrl.reportCloseReason() ng-disabled=!$ctrl.closeReasonIndex>确认关店</button> </div> </div> </m-modal> <m-modal m-title=建议您投诉站点并上传证据 is-light=true size=small is-show=$ctrl.stationComplaintModal> <div class=station-complaint-modal> <div class=complaint-modal__content> <p>帮助平台快速核实并处理配送站点问题！</p> <p>投诉路径：</p> <p>点击投诉——选择「<b>物流骑手</b>」中「<b>站点要求商户关店</b>」项，进行投诉！</p> </div> <div class="buttons-section flex flex-end"> <button class="btn btn-default mr10" ng-click="$ctrl.stationComplaintModal = false">取消</button> <button class="btn btn-primary" ng-click="$ctrl.stationComplaintModal = false;$ctrl.goFeedback()">去投诉站点</button> </div> </div> </m-modal> '},"6loW":function(e,t,n){"use strict";n("YXWy")},"74JD":function(e,t,n){"use strict";var i=n("fZjL"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("v+2J"),p=n.n(l),u=n("A7Dr"),d=n.n(u),h=n("RG6k"),m=n("t4A1"),f=n("v7/q");const g={"app.shop.order":"app.chainshop.ordercarry","app.shop.shop-info":"https://shadow.elemecdn.com/faas/melody/app.chainshop.shop","app.shop.settings":"https://shadow.elemecdn.com/faas/melody/app.chainshop.shop","app.shop.setting":"https://shadow.elemecdn.com/faas/melody/app.chainshop.shop","app.chainshop.orgmanage":"app.shop.shop-info","https://shadow.elemecdn.com/faas/melody/app.shop.bid":"https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.bid","app.chainshop.vas.account":"https://shadow.elemecdn.com/faas/melody/app.shop.bid","app.shop.billDetail":"https://shadow.elemecdn.com/faas/melody/app.chainshop.bill","app.shop.college":"app.chainshop.notice","app.shop.feedback":"app.chainshop.notice"};let v=function(){function e(t,n){o()(this,e),this.isOverV505Client=window.isOverV505Client,this.$state=n,h.a.onChangeWithScope(()=>{this.$onInit()},t),m.a.onChangeWithScope(()=>{this.$onInit()},t),this.rid=this.$state.params.restaurantId,t.$on("$stateChangeSuccess",()=>{this.rid=this.$state.params.restaurantId})}return c()(e,[{key:"$onInit",value:function(){this.isChain=h.a.isChain(),this.name=this.isChain?d()(m.a.getCurrentProfile(),"username"):d()(h.a.getCurrentRestaurant(),"name"),this.treeData=h.a.getRestaurantTree(),this.rid=this.$state.params.restaurantId}},{key:"switch",value:function(e){const t=e.restaurantType,n=e.id,i=this.$state.current.name.split("."),a=["app","LEAF"===t?"shop":"chainshop",...i.slice(2)];let s=this.getStateName(i,a);const o=p()({},this.$state.params,{restaurantId:n});delete o.url,this.$state.go(s,o)}},{key:"getStateName",value:function(e,t){const n=t.join(".");if(e[1]!==t[1]){if(/stats\.food/.test(n)&&!f.a.getABTestingSwitchChain())return t.slice(0,3).join(".");if(-1!==n.indexOf("appstore"))return"https://shadow.elemecdn.com/faas/melody/app.shop"}return this.$state.get(n)?n:g[e.join(".")]||this.findKey(g,e.join("."))||this.getStateName(e.slice(0,-1),t.slice(0,-1))}},{key:"findKey",value:function(e,t){const n=a()(e);var i;for(let a=0,s=n.length;a<s;a++){let s=n[a];if(e[s]===t){i=s;break}}return i}}]),e}();v.$inject=["$scope","$state"],t.a={controller:v,template:n("IMkP")}},"7Vjl":function(e,t,n){"use strict";n("pIfv")},"7W3J":function(e,t,n){t.template=n("xC4f"),t.controller=n("3Bxb").default,t.controllerAs="$ctrl"},"7acj":function(e,t){e.exports="<div class=modal ng-class=\"{'modal-open': isShow, 'modal-light': isLight}\"> <div class=modal-container ng-class=\"{huge: 'modal-huge', larger: 'modal-larger', large: 'modal-large', middle: 'modal-middle', small: 'modal-small'}[size]\"> <div class=modal-header> <span>{{title || bindTitle}}</span> <span ng-hide=unclose class=modal-close ng-click=hideModal()>×</span> </div> <div class=modal-content></div> </div> </div> "},"7bc7":function(e,t,n){t.template=n("f8E/"),t.controller=n("UBDp").default,t.controllerAs="$ctrl"},"7beu":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},"7j7G":function(e,t){e.exports="<div class=offline> <span class=offline-content>连锁订单处理功能敬请期待！</span> </div>"},"7uYe":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){e.state("app",{url:"/app",resolve:{ResourceInit:w},redirect:i,views:{"@":y}})}function i(){return m.a.isChain()?{state:"app.chainshop"}:m.a.isMulti()?{state:"app.multishop"}:{state:"https://shadow.elemecdn.com/faas/melody/app.shop",params:{restaurantId:m.a.getCurrentRestaurant().id}}}var a=n("exGp"),s=n.n(a),o=n("z2Ca"),r=n.n(o),c=n("1bdO"),l=n.n(c),p=n("A7Dr"),u=n.n(p),d=n("YEW4"),h=n.n(d),m=n("RG6k"),f=n("t4A1");let g=(()=>{var t=s()(function*(t,n){let i=yield t.getCurrentProfile();if(i)return e.localStorage.ksid=i.ksid,i;{let e=yield t.getProfiles();return 0===e.length?(n.go("login"),!1):1!==e.length||e[0].isUsing?(n.go("logined"),!1):(t.launchProfile(e[0].id),!1)}});return function(e,n){return t.apply(this,arguments)}})();t.$inject=["$stateProvider"];var v=n(0),y=n("emBO");v.module("app").config(t);var w=(()=>{var e=s()(function*(e,t,n,i,a,s,o,c,p,d,v){const y=a.isClientEnv();var w;try{if(y&&!(w=yield g(i,c)))return}catch(e){switch(console.error(e),d.show(e.message,!0),e.code){case"UNEXPECTED_EXCEPTION":case"CONNECTION_ERROR":setTimeout(function(){window.location.reload()},12e4)}return e}y&&h()(e,function(e){var t=u()(e,"get");l()(t)&&e.set("metas",r()({},t("metas"),{ksid:w.ksid}))});try{yield o.getBaseKeeper()}catch(e){return d.show(e.message,!0),o.setAllPermissions(),e}try{yield n.fetchCurrentKeeper()}catch(e){return e}var I;if(f.a.isManager())I=u()(f.a.isManager(),"restaurantUnitIds[0]");else{yield s.loadRestaurants();let e=m.a.getCurrentRestaurant();m.a.isMulti()||v.enable(e.id),p.identifyRestaurant(e),f.a.setLoginStatus(!0),I=e.id}return o.getPermissionGray(I).catch(function(){o.setAllPermissions()}),!0});return function(t,n,i,a,s,o,r,c,l,p,u){return e.apply(this,arguments)}})();w.$inject=["_x","_x2","_x3","_x4","_x5","_x6","_x7","_x8","_x9","_x10","_x11"],w.$inject=["beat","Restaurant","ProfileAction","LoginProfileAction","LoginAction","RestaurantAction","ArenaAction","$state","analytics","Alert","XShard"]}.call(t,n("DuR2"))},"7usz":function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";let o=a.a.getCurrentRestaurant().id;this.src=`${n.domUrl}?reportorType=3&shopIdType=1&shopId=${o}`;var r=s.a.schedule(this.src);s.a.watchSrc(i,r.iframe),s.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("RG6k"),s=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},"8/MA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("CfXW");const o={template:`
        <iframe style="width: 100%; border: 0;" ng-src="{{trustSrc($vm.src)}}"></iframe>
      `,controller:["$scope","$sce","config",function(e,t,n){"ngInject";e.trustSrc=function(e){return t.trustAsResourceUrl(e)},this.src=`${n.melodyVasDasUrl}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"};a.a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("https://shadow.elemecdn.com/faas/melody/app.shop.vas",{url:"/vas",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.vas",{url:"/vas",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.vas.bid",{url:"/bid?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.vas.afp",{url:"/alipayflowpipe?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("app.shop.vas.speaker",{url:"/speaker?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("app.shop.vas.account",{url:"/account?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.vas.adv",{url:"/adv?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("app.shop.vas.search",{url:"/search?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.bid",{url:"/bid?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.afp",{url:"/alipayflowpipe?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.adv",{url:"/adv?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")},resolve:{isChain:["ResourceInit","NavResource",function(e,t){return!0}]}}).state("app.chainshop.vas.account",{url:"/account?state&params",reloadOnSearch:!1,views:{"wrapper@app":n("kXlQ")}}).state("app.shop.vas.poscode",{url:"/poscode?url&state",reloadOnSearch:!1,views:{"wrapper@app":{template:`
                <os-container os-src="{{$vm.src}}"></os-container>
              `,controller:["$stateParams","config",function(e,t){this.src=`${t.poscodeUrl}?type=single&shopId=${e.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("app.chainshop.vas.poscode",{url:"/poscode?url&state",reloadOnSearch:!1,views:{"wrapper@app":{template:`
                <os-container os-src="{{$vm.src}}"></os-container>
              `,controller:["config",function(e){this.src=`${e.poscodeUrl}?type=chain`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.das",{url:"/das",reloadOnSearch:!1,views:{"wrapper@app":o}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.vas.das",{url:"/das",reloadOnSearch:!1,views:{"wrapper@app":o}})}])},"8Bsd":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},"8Q6x":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container>'},"8T8P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("loginProblem",{url:"/login-problem",reloadOnSearch:!1,views:{"":n("Bo7Q")}})}])},"8UOv":function(e,t,n){t.template=n("RGP5"),t.controller=n("pt8B").default,t.controllerAs="$ctrl"},"8Z7U":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBzdHlsZT0id2lkdGg6MzA4cHg7aGVpZ2h0OjMwOHB4OyIgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5b2iIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE0NjNweCIgaGVpZ2h0PSIxMDI0cHgiIHZpZXdCb3g9IjAgMCAxNDYzIDEwMjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE0NjMgMTAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTU0OC41NzE0MjkgOTg3LjQyODU3MWMtMjEuOTQyODU3IDAtMzYuNTcxNDI5LTcuMzE0Mjg2LTUxLjItMjEuOTQyODU3bC00MzguODU3MTQzLTQzOC44NTcxNDNjLTI5LjI1NzE0My0yOS4yNTcxNDMtMjkuMjU3MTQzLTczLjE0Mjg1NyAwLTEwMi40czczLjE0Mjg1Ny0yOS4yNTcxNDMgMTAyLjQgMGwzODcuNjU3MTQzIDM4Ny42NTcxNDNMMTMwMS45NDI4NTcgNTguNTE0Mjg2YzI5LjI1NzE0My0yOS4yNTcxNDMgNzMuMTQyODU3LTI5LjI1NzE0MyAxMDIuNCAwczI5LjI1NzE0MyA3My4xNDI4NTcgMCAxMDIuNGwtODA0LjU3MTQyOSA4MDQuNTcxNDI5QzU4NS4xNDI4NTcgOTgwLjExNDI4NiA1NzAuNTE0Mjg2IDk4Ny40Mjg1NzEgNTQ4LjU3MTQyOSA5ODcuNDI4NTcxeiIgLz4KCjwvc3ZnPgo="},"8fYN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.setting",{url:"/setting?path&category",reloadOnSearch:!1,views:{"wrapper@app":n("ja69")}}).state("app.shop.delivery-dom",{url:"/delivery/dom",reloadOnSearch:!1,views:{"wrapper@app":n("bWXe")}})}])},"8my+":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},"8smz":function(e,t,n){t.template=n("ugHg"),t.controller=n("p8rL").default,t.controllerAs="$ctrl"},"8wJo":function(e,t){e.exports=' <div class="switch-shop multi-switch" ng-show="allRestaurants.length > 1" ng-click="switchShopModal.isShopSelectorShow = true"> <span class="icon icon-shop"></span> <div> <p>切换店铺</p> <p class=tip>共有<em class=num>{{allRestaurants.length}}</em>家店铺</p> </div> </div> <m-modal m-title="账户 {{currentProfile.username}} 的店铺" size=large is-show=switchShopModal.isShopSelectorShow> <ul class=switch-shop-lists> <li class=switch-shop-list ng-repeat="restaurant in allRestaurants"> <span class=number>#{{$index + 1}}</span> <div class=info> <img ng-src="{{restaurant.imageUrl}}" alt=""> <div> <p class=name>{{restaurant.name}}</p> <p class=address>{{restaurant.address}}</p> </div> </div> <a class="btn btn-primary" ng-click=switchRestaurant(restaurant)>进入店铺</a> </li> </ul> </m-modal> '},"9+yd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api-shop.alta.elenet.me/"},payment:"http://vpca-base-payment-01.vm.elenet.me:9070/payment_webApi/payment/placeOrder",beat:{default:{uri:"https://app-api-shop.alta.elenet.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},activity:{uri:"https://app-api-shop.alta.elenet.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},shop:{uri:"https://app-api-shop.alta.elenet.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},rank:{uri:"https://app-api-shop.alta.elenet.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},goods:{uri:"https://app-api-shop.alta.elenet.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},order:{uri:"https://app-api-shop.alta.elenet.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},newOrder:{uri:"https://app-api-shop.alta.elenet.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},diagnosis:{uri:"https://app-api-shop.alta.elenet.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},delivery:{uri:"https://app-api-shop.alta.elenet.me/delivery/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/delivery/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},packs:{uri:"https://app-api-shop.alta.elenet.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},ugc:{uri:"https://app-api-shop.alta.elenet.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},arena:{uri:"https://app-api-shop.alta.elenet.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},shopGrowth:{url:"https://app-api-shop.alta.elenet.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},shopDeco:{uri:"https://app-api-shop.alta.elenet.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}},crm:{uri:"https://app-api-shop.alta.elenet.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alta.elenet.me"}}},billUrl:"https://balance-desktop.faas.alta.elenet.me",billDetailUrl:"https://hydrosweb.faas.alta.elenet.me/bill",billDetailUrlForAfp:"https://hydrosweb.faas.alta.elenet.me/order/query?order_id=",chainShopBillUrl:"https://balance-headshop.faas.alta.elenet.me",chainShopBillDetailUrl:"https://hydroshead.faas.alta.elenet.me/bill",ubtUrl:"http://ubt.shop.alpha.elenet.me/eventlog",ubtFrom:"melody-development",goodsUrl:"https://melody-goods-test.faas.elenet.me",melodyStatsUrl:"https://melody-stats-test.faas.elenet.me/#",graceUrl:"http://em.alpha.elenet.me/",melodyPayUrl:"https://melody-pay-test.faas.elenet.me/#",melodyPackUrl:"http://melody-pack-test.faas.elenet.me/#",melodyActivityUrl:"https://melody-activity.faas.alta.elenet.me",melodyOrderUrl:"https://melody-order.faas.alta.elenet.me",melodyShopUrl:"https://melody-shop-test.faas.elenet.me",receiptUrl:"http://eo.alpha.elenet.me/napos_web",websocketUrl:"https://client-api.alpha.elenet.me/api/line/access",appstoreUrl:"https://nest-market-test.faas.elenet.me",domUrl:"https://xy.alpha.elenet.me/feedback/homepage/index",poscodeUrl:"https://h5.alta.elenet.me/poscode",speUrl:"https://spe-test.faas.elenet.me",creditScoreUrl:"https://melody-credit-score-test.faas.elenet.me",melodyChainShopDashboardUrl:"https://melody-base-test.faas.elenet.me/dashboard",melodyBaseUrl:"https://melody-base-test.faas.elenet.me",melodySettingsUrl:"https://melody-settings-test.faas.elenet.me",melodyPayBidUrl:"https://bs-river-bid.faas.alta.elenet.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.alta.elenet.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.beta.elenet.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.alta.elenet.me/#/app/shop/vas/search",melodyPayChainBidUrl:"https://bs-river-bid.faas.alta.elenet.me/#/app/chainshop/vas/bid",melodyPayChainAccountUrl:"http://melody-vas-test.faas.elenet.me/chainaccount",melodyVasDasUrl:"https://das-napos.faas.alpha.elenet.me",chainPermission:"https://chain-permission-test.faas.elenet.me",melodyGuaranteeUrl:"https://melody-guarantee-test.faas.elenet.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.alta.elenet.me/speaker",melodyDeliveryUrl:"https://melody-delivery.faas.alpha.elenet.me",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons-test",fbsUrl:"https://melody-fbs.faas.alta.elenet.me/",crmUrl:"https://throne.faas.alta.elenet.me",melodyDecorateUrl:"https://melody-decorate.faas.alta.elenet.me"}},"90+t":function(e,t,n){"use strict";function i(e,t,n,i){var a={FORBIDDEN:"非法操作",FATAL:"请检查打印机相关设置",NOT_FOUND:"METHOD_NOT_FOUND"};return{handleError:function(i){t.throw("handledError::"+i.type,i.message,n.current.name),i.message?e.show(i.message,!0):e.show(a[i.type],!0)},handleRankError:function(a,s){if(t.throw("handledError::"+a.code,a.message,n.current.name),"ILLEGAL_OPERATION"===a.code)return n.go("app.shop.pay.business.rank.index",s||{}),void i(function(){e.show(a.message,!0)},500);"SERVER_ERROR"===a.code&&e.show("服务器异常",!0),"STOCK_SHORTAGE"===a.code&&e.show("抱歉，该排名位已经被人买走，买别的位置吧。",!0),"AREA_HAS_PURCHASED_TOP_LIMIT"===a.code&&e.show("您已购买该排名区的排名，试试其他排名区吧",!0),"TODAY_HAS_PURCHASED_TOP_LIMIT"===a.code&&e.show("您已达到购买排名的上限，明天再来买吧",!0)}}}i.$inject=["Alert","analytics","$state","$timeout"],n(0).module("app").factory("Handle",i)},"95fK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.stats",{url:"/stats?path",reloadOnSearch:!1,redirect:".business",views:{"wrapper@app":n("W+cB")}}).state("app.shop.stats.business",{url:"/business",reloadOnSearch:!1,views:{"wrapper@app":n("4qcw")}}).state("app.shop.stats.traffic",{url:"/traffic",reloadOnSearch:!1,views:{"wrapper@app":n("aPFe")}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.stats.food",{url:"/food",reloadOnSearch:!1,views:{"wrapper@app":n("fw+l")}}).state("app.shop.stats.comment",{url:"/comment",redirect:".info",views:{"tabs@app":n("ehhc")}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.stats.comment.info",{url:"/info",views:{"wrapper@app":n("1PFG")}}).state("app.shop.stats.comment.complain",{url:"/complain",views:{"wrapper@app":n("t1c4")}}).state("app.shop.stats.custom",{url:"/custom",reloadOnSearch:!1,views:{"wrapper@app":n("ecI0")}}).state("app.shop.stats.diagnosis",{url:"/diagnosis",reloadOnSearch:!1,views:{"wrapper@app":n("492k")}}).state("app.shop.stats.industry",{url:"/industry",reloadOnSearch:!1,views:{"wrapper@app":n("cddr")}}).state("app.chainshop.stats",{url:"/stats",redirect:".business",views:{"tabs@app":n("Wctc")}}).state("app.chainshop.stats.business",{url:"/business",views:{"wrapper@app":n("AwA5"),"tabs@app":"<div></div>"}}).state("app.chainshop.stats.traffic",{url:"/traffic",views:{"wrapper@app":n("HScm"),"tabs@app":"<div></div>"}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.stats.food",{url:"/food",views:{"wrapper@app":n("7bc7"),"tabs@app":"<div></div>"}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.stats.info",{url:"/info",views:{"wrapper@app":n("hxgD")}}).state("app.chainshop.stats.visitor",{url:"/visitor",views:{"wrapper@app":n("ab8W")}})}])},"9HWZ":function(e,t,n){"use strict";var i=n("fZjL"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r);let l=function(){function e(t,n=5e3){o()(this,e),this.orderIds=[],this.free=!0,this.timeout=n,this.cb=t}return c()(e,[{key:"push",value:function(e){Array.isArray(e)||(e=[e]),this.orderIds=this.orderIds.concat(e),this.free&&this.startPooling()}},{key:"startPooling",value:function(){this.free=!1;let e=setTimeout(()=>{this.free=!0;this.cb(this.getUniqueOrders());this.orderIds=[];clearTimeout(e)},this.timeout)}},{key:"getUniqueOrders",value:function(){let e={};return this.orderIds.forEach(t=>{e[t]=!0}),a()(e)}}]),e}();t.a=l},"9LeT":function(e,t){e.exports='<div class=s-p-state ng-show=$ctrl.rid> <div ml-dropdown> <div ml-dropdown-toggle> <div ng-if="$ctrl.state !== \'open\'" class=shop-state ng-class=$ctrl.state> {{$ctrl.state | shopState}} </div> <div ng-if="$ctrl.state === \'open\' && $ctrl.nowIsInBusinessHour" class=shop-state ng-class=$ctrl.state> {{$ctrl.state | shopState}} </div> <div ng-if="$ctrl.state === \'open\' && !$ctrl.nowIsInBusinessHour" class=shop-state ng-class="\'closed\'"> 已关闭 </div> <div class=dot-seperate></div> <p class=shop-state-tips ng-if="$ctrl.state === \'open\' && !$ctrl.nowIsInBusinessHour">到达营业时间会自动调整为营业中</p> <div class=printer-state ng-class="{disconnected: !$ctrl.connected}"> {{$ctrl.text}} </div> <span class="icon icon-group_down"></span> </div> <div ml-dropdown-menu> <div class=printer-action ng-class="{disconnected: !$ctrl.connected}" ng-click=$ctrl.printsetting($event)> <span class=connect-info>{{$ctrl.text}}</span> <span class=printer-tip ng-if=!$ctrl.connected ng-click=$ctrl.gotoTip($event)> <span>打印机连接遇到问题</span> <i class="icon icon-group_down"></i> </span> </div> <div class=shop-action> <div class=switch-closed ng-click="$ctrl.confirmReportClose(\'immediacy\')" auth-check permission=shop_close_shop> <div class=action-info> <p class=title>紧急关店</p> <p>严重影响顾客体验，请谨慎操作</p> </div> <div class=active-icon ng-show="$ctrl.state === \'closed\'"> <span class="icon icon-check"></span> </div> </div> <div class=switch-delay auth-check permission=shop_close_shop ng-click="$ctrl.confirmReportClose(\'delay\')"> <div class=action-info> <p class=title>延时关店</p> <p>关店状态会在5分钟后生效</p> </div> <div class=active-icon ng-show="$ctrl.state === \'delay\'"> <span class="icon icon-check"></span> </div> </div> <div class=switch-open ng-click=$ctrl.open() auth-check permission=shop_open_shop> <div class=action-info> <p class=title>恢复营业</p> <div> <p>按正常的营业时间开店接单</p> <p class=time>(当前营业时间： <span ng-repeat="t in $ctrl.businessHours track by $index"> {{t.startTime}}-{{t.endTime}} </span> ) </p> </div> </div> <div class=active-icon ng-show="$ctrl.state === \'open\'"> <span class="icon icon-check"></span> </div> </div> </div> </div> </div> </div> <m-modal m-title=关店确认 is-show=$ctrl.delayConfirmModal is-light=true size=middle> <p class=mt10>您有{{$ctrl.bookingOrderCount}}张未完成的预订单,请确保关闭店铺后所有预订单可按时送达。如因特殊情况无法完成服务，请尽快与顾客联系</p> <div class="flex justify-end"> <button class="btn btn-default mr20" ng-click="$ctrl.delayConfirmModal = false">暂不关闭</button> <button class="btn btn-primary" ng-click=$ctrl.closeShop()>关闭店铺</button> </div> </m-modal> <m-modal m-title=请如实选择关店原因 is-light=true size=small is-show=$ctrl.closeReportModal> <div class=close-report-modal> <div class=reason-tab> <div ng-class="{\'actived\': $ctrl.reasonType === tab.index}" ng-click=$ctrl.chooseTab(tab) ng-repeat="tab in $ctrl.closeReasonList"> {{tab.name}} </div> </div> <ul class=reasons> <li ng-repeat="reason in $ctrl.closeReasonList[0].items" ng-if="$ctrl.reasonType === 1"> <label><input type=radio ng-model=$ctrl.closeReasonIndex value="{{reason.name}}" name=close_reason>{{ reason.name }}</label> <p class=reason-tips ng-if="https://shadow.elemecdn.com/faas/melody/reason.desc && $ctrl.closeReasonIndex === reason.name">{{ reason.desc }}</p> </li> <li ng-repeat="reason in $ctrl.closeReasonList[1].items" ng-if="$ctrl.reasonType === 2"> <label><input type=radio ng-model=$ctrl.closeReasonIndex value="{{reason.name}}" name=close_reason>{{ reason.name }}</label> <p class=reason-tips ng-if="https://shadow.elemecdn.com/faas/melody/reason.desc && $ctrl.closeReasonIndex === reason.name">{{ reason.desc }}</p> </li> </ul> <div class="buttons-section flex justify-center"> <button class="btn btn-default mr30" ng-click="$ctrl.closeReportModal = false">暂不关店</button> <button class="btn btn-primary" ng-click=$ctrl.reportCloseReason() ng-disabled=!$ctrl.closeReasonIndex>确认关店</button> </div> </div> </m-modal> <m-modal m-title=建议您投诉站点并上传证据 is-light=true size=small is-show=$ctrl.stationComplaintModal> <div class=station-complaint-modal> <div class=complaint-modal__content> <p>帮助平台快速核实并处理配送站点问题！</p> <p>投诉路径：</p> <p>点击投诉——选择「<b>物流骑手</b>」中「<b>站点要求商户关店</b>」项，进行投诉！</p> </div> <div class="buttons-section flex flex-end"> <button class="btn btn-default mr10" ng-click="$ctrl.stationComplaintModal = false">取消</button> <button class="btn btn-primary" ng-click="$ctrl.stationComplaintModal = false;$ctrl.goFeedback()">去投诉站点</button> </div> </div> </m-modal> '},"9MC5":function(e,t){e.exports='<div class=dashboard-stats> <dashboard-box-header title=今日总览 nav-title=数据中心 nav-state=app.shop.stats.business ubt-id=2964></dashboard-box-header> <div class=dashboard-box-content> <div> <span>订单</span> <span>营业额</span> </div> <div> <span class=count ng-class="{zero: !$ctrl.today.Order}">{{$ctrl.today.Order}}</span> <span class=count ng-class="{zero: !$ctrl.today.Revenue}">{{$ctrl.today.Revenue | currency : ""}}</span> </div> <div style=position:relative> <span class=tip>昨日{{$ctrl.yestday.Order}}单</span> <span class=tip>昨日{{$ctrl.yestday.Revenue | currency : ""}}</span> </div> </div> <div class=crm-info ng-if=$ctrl.crmGrayEnable> <span>订单太少?&nbsp;&nbsp;试试</span> <span class=crm-link ng-click=$ctrl.gotoCrm()>精准营销</span> </div> </div> '},"9PZP":function(e,t,n){t.template=n("/2n1"),t.controller=n("zKfa").default,t.controllerAs="$ctrl"},"9UnT":function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("Warf"),m=n.n(h),f=n("A7Dr"),g=n.n(f),v=n("pPbq"),y=n("QAIe"),w=n.n(y);let I=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.orders=[],n.orderIds=[],n.count=0,n.orderDetail={},n.isDeliveryRemindShow=!1,n.isWSGray=!1,n.searchTags=[],n.isInSoundGray=!1,n.multiUnprocessOrders=[],n.multiUnprocessRefundingOrders=[],n.multiProcessedOrders=[],n.multiPageIndex=1,n.multiProcessedOrderStats={},n.multiProcessingRefundingOrders=[],n.multiUnRepliedChatListView=null,n.multiSearchResultOrders=[],n}return d()(t,e),c()(t,[{key:"getAutoConfirm",value:function(e){return[JSON.parse(window.sessionStorage.getItem(e+"autoConfirm")),JSON.parse(window.sessionStorage.getItem(e+"autoDelivery"))]}},{key:"queryOrder",value:function(e){return this.orders}},{key:"getOrderIds",value:function(){return this.orderIds}},{key:"getWSGray",value:function(){return this.isWSGray}},{key:"getUnprocessedOrders",value:function(){return this.multiUnprocessOrders}},{key:"getUnprocessedRefundingOrders",value:function(){return this.multiUnprocessRefundingOrders}},{key:"getProcessedOrders",value:function(){return this.multiProcessedOrders}},{key:"getPageTotal",value:function(){let e=g()(this.multiProcessedOrderStats,"count",0);return Math.ceil(e/25)}},{key:"getPageIndex",value:function(){return this.multiPageIndex}},{key:"getUnrepliedChatListView",value:function(){return this.multiUnRepliedChatListView}},{key:"removeChat",value:function(e){m()(this.multiUnRepliedChatListView.chats,t=>Number(t.id)===Number(e))}},{key:"getProcessingRefundingOrders",value:function(){return this.multiProcessingRefundingOrders}},{key:"getSearchResult",value:function(){return this.multiSearchResultOrders}},{key:"setOrder",value:function(e){if(this.multiSearchResultOrders.length>0){let t=this.multiSearchResultOrders.filter(t=>e.id===t.id);t.length>0&&(t[0]=e)}else this.multiSearchResultOrders.push(e)}},{key:"getOrderById",value:function(e){let t=this.multiSearchResultOrders.filter(t=>e===t.id);return t.length>0?t[0]:null}},{key:"getSearchTags",value:function(){return this.searchTags}},{key:"getIsInSoundGray",value:function(){return this.isInSoundGray}},{key:"getHandlers",value:function(){return{[v.a.UPDATE_ORDERS]:e=>{this.orders=e.orders},[v.a.UPDATE_AUTO_CONFIRM]:e=>{window.localStorage.setItem(e.shopId+"autoConfirm",e.autoConfirm);window.localStorage.setItem(e.shopId+"autoDelivery",e.autoDelivery)},[v.a.UPDATE_ORDERIDS]:e=>{this.orderIds=e.orderIds},[v.a.REMOVE_ORDER]:e=>{m()(this.orders,"id",e.orderId)},[v.a.SET_WS_GRAY]:e=>{this.isWSGray=e.inWhiteList},[v.a.LOAD_UNPROCESSED_ORDERS]:e=>{this.multiUnprocessOrders=e.orders;this.multiUnprocessOrders=this.multiUnprocessOrders.map(e=>{e.receivedTime=Date.now();return e})},[v.a.LOAD_UNPROCESSED_REFUNDING_ORDERS]:e=>{this.multiUnprocessRefundingOrders=e.orders},[v.a.REMOVE_UNPROCESSED_ORDER]:e=>{m()(this.multiUnprocessOrders,"id",e.orderId)},[v.a.LOAD_PROCESSED_ORDERS]:e=>{this.multiProcessedOrders=e.orders?e.orders:this.multiProcessedOrders;this.multiPageIndex=e.index?e.index:this.index;this.multiProcessedOrderStats=e.orderStats?e.orderStats:this.multiProcessedOrderStats},[v.a.LOAD_PROCESSING_REFUNDING_ORDERS]:e=>{this.multiProcessingRefundingOrders=e.orders},[v.a.GET_UNREPLIED_CHAT_LIST_VIEW]:e=>{this.multiUnRepliedChatListView=e.unRepliedChatListView},[v.a.LOAD_SEARCH_ORDERS]:e=>{this.multiSearchResultOrders=e.searchResultOrders},[v.a.ADD_ORDER_RIDER_EVALUATION]:e=>{if(this.multiProcessedOrders){let t=this.multiProcessedOrders.filter(t=>t.id===e.orderId);t.length>0&&(t[0].delivery.feedbackStatus="COMMENTED")}},[v.a.SET_SEARCH_TAGS]:e=>{this.searchTags=e.tags||[]},[v.a.GET_SEARCH_CHAIN_ORDERS]:e=>{this.multiSearchResultOrders=e.searchResultOrders},[v.a.SET_SOUND_GRAY]:e=>{this.isInSoundGray=e.isInSoundGray}}}}]),t}(w.a.Store);t.a=new I},"9jWW":function(e,t){e.exports="<div class=dashboard-notice ng-if=$ctrl.noticeList.length> <dashboard-box-header title=通知中心 nav-title=全部通知 nav-state=app.shop.notice></dashboard-box-header> <div class=notice-content> <div class=notice-list ubt-click=2971> <div class=notice-item ng-repeat=\"n in $ctrl.noticeList\" ng-click=$ctrl.clickTitle(n.messageId)> <span class=title>{{n.title}}</span> <span class=date>{{n.beginDate | date : 'MM-dd' }}</span> </div> </div> </div> </div> "},AENl:function(e,t){e.exports='<div class=account-settings> <div ml-dropdown> <div ml-dropdown-toggle> <span class=account-name>{{$ctrl.username}}</span> <span class="icon icon-group_down"></span> </div> <ul ml-dropdown-menu class=ul-reset width=fixed> <li> <a href="" ng-click=$ctrl.changeUserInfo();>我的账号</a> </li> <li> <a href="" ng-click=$ctrl.logout()>退出登录</a> </li> </ul> </div> </div> '},AFXA:function(e,t){e.exports='<os-container os-src="{{vm.src}}" style=margin:-10px></os-container>'},AIFM:function(e,t,n){"use strict";n("28Bo")},ASGk:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container>'},Affh:function(e,t,n){"use strict";function i(e,t,n){"ngInject";this.src=`${n.melodyBaseUrl}/userinfo?shopId=${t.restaurantId}`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config"]},"Ah/w":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api-shop.alpha.elenet.me/"},payment:"http://vpca-base-payment-01.vm.elenet.me:9070/payment_webApi/payment/placeOrder",beat:{default:{uri:"https://app-api-shop.alpha.elenet.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},activity:{uri:"https://app-api-shop.alpha.elenet.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},shop:{uri:"https://app-api-shop.alpha.elenet.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},rank:{uri:"https://app-api-shop.alpha.elenet.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},goods:{uri:"https://app-api-shop.alpha.elenet.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},order:{uri:"https://app-api-shop.alpha.elenet.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},newOrder:{uri:"https://app-api-shop.alpha.elenet.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},diagnosis:{uri:"https://app-api-shop.alpha.elenet.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},delivery:{uri:"https://app-api-shop.alpha.elenet.me/delivery/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/delivery/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},packs:{uri:"https://app-api-shop.alpha.elenet.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},ugc:{uri:"https://app-api-shop.alpha.elenet.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},arena:{uri:"https://app-api-shop.alpha.elenet.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},shopGrowth:{url:"https://app-api-shop.alpha.elenet.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},shopDeco:{uri:"https://app-api-shop.alpha.elenet.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}},crm:{uri:"https://app-api-shop.alpha.elenet.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.alpha.elenet.me"}}},billUrl:"https://balance-desktop-test.faas.elenet.me/#",billDetailUrl:"https://hydrosweb.faas.alpha.elenet.me/bill",billDetailUrlForAfp:"https://hydrosweb.faas.alpha.elenet.me/order/query?order_id=",chainShopBillUrl:"http://hydroschainstore.alpha.elenet.me/app/balance",chainShopBillDetailUrl:"https://hydroshead.faas.ar.elenet.me/bill",ubtUrl:"http://ubt.shop.alpha.elenet.me/eventlog",ubtFrom:"melody-development",goodsUrl:"https://melody-goods-test.faas.elenet.me",melodyStatsUrl:"https://melody-stats-test.faas.elenet.me/#",graceUrl:"http://em.alpha.elenet.me/",melodyPackUrl:"http://melody-pack-test.faas.elenet.me/#",melodyActivityUrl:"https://melody-activity-test.faas.elenet.me",melodyOrderUrl:"https://melody-order.faas.alpha.elenet.me",melodyShopUrl:"https://melody-shop-test.faas.elenet.me",receiptUrl:"http://eo.alpha.elenet.me/napos_web",websocketUrl:"https://client-api.alpha.elenet.me/api/line/access",appstoreUrl:"https://nest-market-test.faas.elenet.me",domUrl:"https://xy.alpha.elenet.me/feedback/homepage/index",poscodeUrl:"https://h5.alpha.elenet.me/poscode",speUrl:"https://spe-test.faas.elenet.me",creditScoreUrl:"https://melody-credit-score-test.faas.elenet.me",melodyChainShopDashboardUrl:"https://melody-base-test.faas.elenet.me/dashboard",melodyBaseUrl:"https://melody-base-test.faas.elenet.me",melodySettingsUrl:"https://melody-settings-test.faas.elenet.me",melodyPayBidUrl:"https://bs-river-bid.faas.alpha.elenet.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.alpha.elenet.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.alpha.elenet.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.alpha.elenet.me/#/app/shop/vas/search",melodyPayChainBidUrl:"https://bs-river-bid.faas.alpha.elenet.me/#/app/chainshop/vas/bid",melodyPayChainAccountUrl:"http://melody-vas-test.faas.elenet.me/chainaccount",melodyVasDasUrl:"https://das-napos.faas.alpha.elenet.me",chainPermission:"https://chain-permission-test.faas.elenet.me",melodyGuaranteeUrl:"https://melody-guarantee-test.faas.elenet.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.alpha.elenet.me/speaker",melodyDeliveryUrl:"https://melody-delivery.faas.alpha.elenet.me",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons-test",fbsUrl:"https://melody-fbs.faas.alpha.elenet.me/",crmUrl:"https://throne.faas.alpha.elenet.me",melodyDecorateUrl:"https://melody-decorate.faas.alpha.elenet.me"}},Aik2:function(e,t,n){e.exports.controller=n("Nc6B").default,e.exports.template=n("4iHo")},AqLQ:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("KcnZ");let c=function(){function e(t,n,i,s){a()(this,e),this.$scope=t,this.$state=n,this.ArenaStore=r.a,this.ArenaAction=i,this.LoginAction=s,this.modalOpen=!1,this.shopAgreements=[],this.agreement={}}return o()(e,[{key:"$onInit",value:function(){this.ArenaStore.onChangeWithScope(()=>{this.shopAgreements=this.ArenaStore.getShopAgreements();this.shopAgreements.length&&(this.modalOpen=!0,this.agreement=this.shopAgreements.shift())},this.$scope)}},{key:"buttonAction",value:function(e,t){"LOGOUT"===t?(this.LoginAction.logout(),this.$state.go("login")):this.ArenaAction.signAgreement(e,t).then(e=>{this.modalOpen=!1;this.shopAgreements.length?(this.agreement=this.shopAgreements.shift(),this.modalOpen=!0):this.ArenaAction.getShopAgreements(10)})}}]),e}();c.$inject=["$scope","$state","ArenaAction","LoginAction"],t.a={controller:c,template:n("uXzz")}},Au62:function(e,t,n){"use strict";function i(e){e.state("login",{url:"/login",resolve:{loginInit:a},views:{"":r.a}})}function a(e,t){if(e.isClientEnv())return t.getProfiles()}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=n.n(s),r=n("gs9Y");a.$inject=["LoginAction","LoginProfileAction"],i.$inject=["$stateProvider"],o.a.module("app").config(i)},Aub6:function(e,t,n){t.template=n("8Q6x"),t.controller=n("QcoF").default,t.controllerAs="$ctrl"},AwA5:function(e,t,n){t.template=n("gzyZ"),t.controller=n("dz2d").default,t.controllerAs="$ctrl"},"B7P+":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAAAXNSR0IArs4c6QAAAfNJREFUKBV9U0trGlEUvjOjcbBaahZmF0XBhbrwvQkGkj8Q6KKQTXfdFYrgolmI4CLtojCCm270T3TVbRKyEEQQdKOQCBHFQom0PjIz8eY7k8wwpLEHrt/5zuOeM+ceBfZM0um0Gyanzay1Wq2FjTPRTkjnnDcAt+Z54uSyxGFpT8p6vf4uiuJP0w5+ZeomSqZCmEwmA5IkvXc6nceyLB+53e4wKsl+v787mUz+oPWD8Xh8LZhJqVTqAxIUl8slx2IxKRAIsOFwyHq9HldVVUfcD13X3wLfGTlI+IhbeKlUup/NZhwtcU3TDCQOOyd/Npu9QILAQMKZTGZRLpfv0IohnU7HCCI0pVKp8FwupycSiSBN7zP658Viccsou+GnUCgwr9crejyeEiUdxuPxvyAbwh/N5MegBIfDsSei/E4kEvnnvV66IRQKseVyuSsKgvC73+/P7UHBYJApisII7TIajRjiZ1TpstvtejBOy4/eWT6fp2+wbORvt9v3kHOqpMzn8zfVavXGinhBqdfrbDqdMrzZN8ONsX/B0Wq12g1uNKdsIPFGo6HjjXSKowRjI7ABW9iEr+CffD7fL7zHXTQa3R4MBmqz2RRR4TV81dVqdYJPUa01ohuwGXnACc4+2n6FUjSgM+in+HvQNvxfMDl5U8QDeezwsAhPMR4AAAAASUVORK5CYII="},BFDJ:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";n.status&&n.valid?this.src=`${i.melodyShopUrl}/#/nest/shop-chain-manage?status=${n.status}&valid=${n.valid}`:this.src=`${i.melodyShopUrl}/#/nest/shop-chain-manage`;var s=a.a.schedule(this.src);a.a.watchSrc(e,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},BICS:function(e,t,n){"use strict";function i(e,t){function i(e){e.callBack=null,this.addCallBack=function(t){e.callBack="function"==typeof t?t:function(){}}}return i.$inject=["$scope"],{restrict:"E",transclude:!0,scope:{title:"@",size:"@",isShow:"=",onClose:"&"},controller:i,link:(e,n,i,a,s)=>{e.hideModal=function(){e.callBack&&e.callBack(),!1!==t(i.onClose)(e.$parent)&&(e.isShow=!1)};s(e.$parent,e=>{n.find(".modal-new-content").append(e)})},template:n("deJu")}}i.$inject=["$state","$parse"],n(0).module("app").directive("modalNew",i)},BNiw:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE3LjE5NiUiIHgyPSI4OS45OTglIiB5MT0iNC45OTQlIiB5Mj0iOTIuNTU5JSI+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGQURCN0IiLz4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRUVCMDQ0Ii8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxwYXRoIGZpbGw9InVybCgjYSkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE2IDI1LjIxN0w2LjkwMiAzMCA4LjY0IDE5Ljg3bC03LjM2LTcuMTc1IDEwLjE3MS0xLjQ3OEwxNiAybDQuNTQ5IDkuMjE3IDEwLjE3MSAxLjQ3OC03LjM2IDcuMTc1TDI1LjA5OCAzMHoiLz4KPC9zdmc+Cg=="},BSfM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e,t){return{restrict:"E",transclude:!0,scope:{order:"=",restaurant:"=",isMulti:"=",deliverable:"=",confirmPrint:"=onConfirmPrint",print:"=onPrint",invalidOrder:"=onInvalidateOrder",copy:"=onCopy",onAgreeRefund:"=onAgreeRefund",onRefuseRefund:"=onRefuseRefund",sendMessage:"&sendMessage",showPaymentState:"="},controller:i,template:n("dZDq")}}function i(t,i,a,o,h,m){function f(){t.isShowCallDeliveryPrint=!t.stateUI.isRefund&&t.stateUI.processing&&I}function g(){return t.stateUI.processed&&t.deliverable&&I?!t.stateUI.isRefund&&t.stateUI.invalid||t.stateUI.refunded?void(t.isShowCallDelivery=!1):t.deliverySent?void(t.isShowCallDelivery=!1):"NONE"===t.order.orderTraceButton?void(t.isShowCallDelivery=!1):"CALL"===t.order.orderTraceButton?void(t.isShowCallDelivery=!0):null===t.order.orderTraceButton&&I?void(t.isShowCallDelivery=!0):void 0:void(t.isShowCallDelivery=!1)}function v(){let e={},n={};n.level=t.star,n.description=t.evaluationText||null,n.tags=[],t.evaluations.forEach(e=>{e.checked&&n.tags.push(e.tagName)}),e.orderId=t.order.id,o.addOrderRiderEvaluation(e),t.orderEvaluation=n}function y(){t.evaluateList=l.a.getDeliveryServiceEvaluationTags()}t.getPageName=function(){return i.current.name},t.Math=e.Math,t.isDetailShow=!1,t.toggleDetail=function(e){t.isDetailShow=!t.isDetailShow,t.isDetailShow&&t.getOrderProcessRecordsView(e.id).then(t=>{e.orderTraceView=t})},t.stateUI={isMulti:!1,processing:!1,processed:!1,invalid:!1,toRefund:!1,refunding:!1,refunded:!1,paymentInvalid:!1},t.getOrderProcessRecordsView=o.loadOrderProcessRecordsView.bind(o),t.refundingState={APPLIED:"用户申请退单",REJECTED:"餐厅已申诉",ARBITRATING:"客服仲裁中",SUCCESSFUL:"退单成功",FAILED:"退单失败"},a.orderStatusSet(t.order.status,t.paymentStatus,t.order.refundStatus,t),t.modals={invalid:{isShow:!1,isRemarkShow:!1,remarkContent:"",oldReason:null,reason:{FAKE_ORDER:!1,DUPLICATE_ORDER:!1,CONTACT_USER_FAILED:!1,FOOD_SOLD_OUT:!1,RESTAURANT_CLOSED:!1,DISTANCE_TOO_FAR:!1,RESTAURANT_TOO_BUSY:!1,OTHERS:!1},changeReason:function(e){t.modals.invalid.reason[e]=!0,t.modals.invalid.oldReason!==e&&(t.modals.invalid.reason[t.modals.invalid.oldReason]=!1),t.modals.invalid.oldReason=e,t.modals.invalid.isRemarkShow="others"===e},setInvalid:function(){var e="",n=t.modals.invalid.remarkContent,i=t.modals.invalid.reason;t.modals.invalid.oldReason?t.modals.invalid.isRemarkShow&&!n?h.show("请填写其他无效理由",!0):(u.forEach(i,function(t,n){t&&(e=n)}),t.invalidOrder(t.order,e,n).then(e=>{t.modals.invalid.isShow=!1;t.order=e;a.orderStatusSet(t.order.status,t.paymentStatus,t.order.refundStatus,t)})):h.show("请选择一个原因!",!0)}},agreeReturn:{isShow:!1,password:"",agree:function(e){t.modals.agreeReturn.password.length?t.onAgreeRefund(e,t.modals.agreeReturn.password,e.restaurantId):h.show("请输入密码！",!0)}},refuseReturn:{isShow:!1,reason:"",imageUrl:"",refuse:function(e){t.modals.refuseReturn.reason.length&&t.onRefuseRefund(e,t.modals.refuseReturn.reason,t.modals.refuseReturn.imageUrl,e.restaurantId)}}},t.getPaymentStatusText=function(e){return{unpaid:"尚未支付订单",failed:"支付失败订单",pending:"订单生成中"}[e]||"无效订单"},t.orderId=t.order.id,t.stateUI.isMulti=t.isMulti,t.orderSummary=a.getOrderSummary(t.order.groups),t.orderStatus={invalid:{src:n("KO+o"),status:"无效订单"},userCancel:{src:n("T7xw"),status:"订单已取消"},valid:{src:n("3u+7"),status:"已在线支付"},refundSuccess:{src:n("uHxT"),status:"已退款"},refundFailed:{src:n("KO+o"),status:"已驳回"},lackOfCapacity:{src:n("Mylv"),status:"运力不足已取消"}},t.getOrderStatus=(()=>{if(!t.order)return;let e=t.order;let n=null;t.stateUI.invalid&&"userCancelOrder"!==e.invalidType&&"lackOfCapacity"!==e.invalidType?n=t.orderStatus.INVALID:t.stateUI.invalid&&"userCancelOrder"===e.invalidType?n=t.orderStatus.userCancel:t.stateUI.paymentInvalid||t.stateUI.invalid||"ONLINE"!==e.payment||"UNPAID"===e.paymentStatus||"FAILED"===e.paymentStatus||"PENDING"===e.paymentStatus||"INVALID"===e.status?"SUCCESSFUL"===e.refundStatus?n=t.orderStatus.refundSuccess:"FAILED"===e.refundStatus?n=t.orderStatus.refundFailed:t.stateUI.invalid&&"lackOfCapacity"===e.invalidType&&(n=t.orderStatus.lackOfCapacity):n=t.orderStatus.VALID;return n||void 0}),t.deliverySent=!1,t.callDelivery=(e=>o.callDelivery(e.id,e.restaurantId).then(e=>{e&&(t.deliverySent=!0,t.removeUnprocessedOrder())})),t.confirmPrintDelivery=(e=>t.confirmPrint(e).then(function(){return o.callDeliveryNoReload(e.id,e.restaurantId)})),t.cancelDelivery=(e=>o.cancelDelivery(e.id,e.restaurantId).then(()=>{t.order.orderTraceButton="CALL";t.deliverySent=!1;g()})),t.setHostingOrderSelfProcess=(e=>o.setHostingOrderSelfProcess(e).then(()=>{let e=c.a.getCurrentRestaurant().id;o.loadProcessedOrders(e)})),t.setDeliveryBySelf=function(e){return o.setDeliveryBySelf(e).then(()=>{e.delivery.canDeliveryBySelf=!1}).catch(e=>{h.show(e.message,!0)})},t.isShowCallDeliveryPrint=null,t.isShowCallDelivery=null;var w=null,I=null;w=t.stateUI.isMulti?r()(s()(c.a.getAllShops(),e=>e.id===t.restaurant.id),"id"):r()(c.a.getCurrentRestaurant(),"id"),I=("AVAILABLE"===l.a.getCrowdShopProductStatus(w)||"CANCELING"===l.a.getCrowdShopProductStatus(w)||c.a.getCurrentPlatform(w))&&1!==l.a.getControlledShopProductStatus(w)&&3!==l.a.getControlledShopProductStatus(w),t.showDiscountGroup=(e=>{if("NORMAL"===e.type)return!0;if("DISCOUNT"===e.type)return e.items.filter(e=>0===e.price).length>0}),t.getDeliveryTime=function(e){return d(1e3*e).format("HH:mm")},t.statusCanEnquiry=(e=>!0),t.removeUnprocessedOrder=(()=>{f();g();t.isDeliveryFeeChangeShow=!1}),t.$watch("star",(e,n)=>{e>3&&(n<=3||!n)&&(t.evaluateList.highEvaluations.forEach(e=>{e.checked=!1}),t.evaluations=t.evaluateList.highEvaluations);e<=3&&(n>3||!n)&&(t.evaluateList.lowEvaluations.forEach(e=>{e.checked=!1}),t.evaluations=t.evaluateList.lowEvaluations)}),t.selectLabel=(e=>{e.checked=!e.checked}),t.evaluateDeliveryService=(e=>{let n=[];t.evaluations.forEach(e=>{e.checked&&n.push(e.tagId)});let i=e.id||null;let a=t.evaluationText||null;return m.evaluateDeliveryService(i,t.star,n,a).then(()=>{v();h.show("评价成功");t.isEvaluateRiderShow=!1}).catch(e=>{h.show(e.message,!0)})}),t.getDeliveryServiceEvaluation=(e=>{t.orderEvaluation?t.isRiderEvaluationShow=!0:(t.isGettingDeliveryServiceEvaluation=!0,m.getDeliveryServiceEvaluation(e).then(e=>{t.orderEvaluation=e;t.isRiderEvaluationShow=!0;t.isGettingDeliveryServiceEvaluation=!1}).catch(e=>{t.isGettingDeliveryServiceEvaluation=!1;h.show(e.message,!0)}))}),y(),l.a.onChange(y),t.canEnquiry=l.a.canEnquiry(w),t.canEnquiry&&(t.isDeliveryFeeChangeShow=!1,t.confirmPrintDelivery=(e=>o.confirmPrintOrder(e,c.a.getRestaurantById(e.restaurantId),!0).then(()=>t.callDelivery(e))),t.callDelivery=(e=>m.enquiryCallDelivery(e.id).then(n=>{n.feeTrend?(e.delivery.deliveryFee=n.deliveryFee,t.isDeliveryFeeChangeShow=!0):(t.isDeliveryFeeChangeShow=!1,t.deliverySent=!0,h.show("您已成功呼叫配送"),t.removeUnprocessedOrder(e.id))}).catch(n=>{t.removeUnprocessedOrder(e.id);h.show(n.message,!0)})),t.cancelDelivery=(e=>m.enquiryCancelDelivery(e.id).then(()=>{t.order.orderTraceButton="CALL";t.deliverySent=!1;g()})),t.statusCanEnquiry=(e=>{if(!t.stateUI.paymentInvalid&&!t.stateUI.invalid&&"ONLINE"===e.payment&&"UNPAID"!==e.paymentStatus&&"FAILED"!==e.paymentStatus&&"PENDING"!==e.paymentStatus&&"INVALID"!==e.status)return!0;return!1}),t.removeUnprocessedOrder=(e=>{f();g();t.isDeliveryFeeChangeShow=!1;o.dispatch({actionType:p.a.REMOVE_UNPROCESSED_ORDER,orderId:e})})),f(),g(),t.deliveryBySelfOnCancelled=(e=>o.setHostingOrderSelfProcess(e).then(e=>{t.order=e;a.orderStatusSet(t.order.status,t.paymentStatus,t.order.refundStatus,t)}).catch(e=>{h.show(e.message,!0)})),t.noMoreDeliveryOnCancelled=(e=>o.noMoreDeliveryOnCancelled(e).then(e=>{t.order=e;a.orderStatusSet(t.order.status,t.paymentStatus,t.order.refundStatus,t)}).catch(e=>{h.show(e.message,!0)}))}var a=n("o5Mu"),s=n.n(a),o=n("A7Dr"),r=n.n(o),c=n("RG6k"),l=n("+asM"),p=n("f4CT");i.$inject=["$scope","$state","orderCardService","OrderAction","Alert","ShopDeliveryAction"],t.$inject=["$state","orderCardService"];var u=n(0),d=n("PJh5");u.module("app").directive("orderCard",t)}.call(t,n("DuR2"))},BaoZ:function(e,t){e.exports='<div class=dashboard-order> <dashboard-box-header title=待处理订单 nav-title=处理订单 nav-state=app.shop.order ubt-id=2960></dashboard-box-header> <div class=dashboard-box-content> <div> <span class=count ng-class="{zero: !$ctrl.newOrder}" ui-sref=app.shop.order ubt-click=2956>{{$ctrl.newOrder}}</span> <span class=count ng-class="{zero: !$ctrl.abnormalOrder}" ui-sref="app.shop.order({path: \'exception\'})" ubt-click=2957>{{$ctrl.abnormalOrder}}</span> <span class=count ng-class="{zero: !$ctrl.urgeOrder}" ui-sref="app.shop.order({path: \'remind\'})" ubt-click=2958>{{$ctrl.urgeOrder}}</span> <span class=count ng-class="{zero: !$ctrl.cancelOrder}" ui-sref="app.shop.order({path: \'refund\'})" ubt-click=2959>{{$ctrl.cancelOrder}}</span> </div> <div> <span ui-sref=app.shop.order ubt-click=2956>新订单</span> <span ui-sref="app.shop.order({path: \'exception\'})" ubt-click=2957>异常订单</span> <span ui-sref="app.shop.order({path: \'remind\'})" ubt-click=2958>催单</span> <span ui-sref="app.shop.order({path: \'refund\'})" ubt-click=2959>退单</span> </div> </div> </div>'},BfIO:function(e,t,n){"use strict";function i(e,t,n,i){function o(){e.unRepliedChatListView=a.a.getUnrepliedChatListView()}s.a.hideScheduleContainer(),i.getUnrepliedChatListView(),a.a.onChange(o),e.getPassedMinutes=(e=>{let t=Date.parse(new Date);return((t-1e3*e)/6e4).toFixed(0)});var r=t(i.getUnrepliedChatListView.bind(i,null),18e4);e.$on("$destroy",()=>{t.cancel(r)}),e.quickReplyContent={one:"您的外卖已送出，请留意外送员电话",two:"您好，由于天气原因，外派有所延误，请您耐心等待",three:"您的外卖正在烹饪，稍后为您送出",four:"不好意思，今天店里人手不齐，稍后为您送出"},e.replayMessage=function(e,t){if(t)e.replayContent=t;else if(!e.replayShow)return void(e.replayShow=!0);e.replayContent?i.replyChat(e.id,e.replayContent,e.order.restaurantId).then(()=>{a.a.removeChat(e.id)}).catch(e=>{n.show(e.message+",请稍后重试！",!0)}):n.show("请输入回复内容",!0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("9UnT"),s=n("CfXW");i.$inject=["$scope","$interval","Alert","OrderAction"]},Bo7Q:function(e,t,n){t.template=n("5ale"),t.controller=n("OxYK").default,t.controllerAs="$ctrl"},BoTH:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container> '},BvRC:function(e,t,n){"use strict";function i(e,t){var n,i=t.defer(),a={isShow:!1,isWarn:!1,content:""};return a.show=function(t,s,o){return o=_.isNumber(o)?o:2e3,n&&(e.cancel(n),i.resolve()),a.isWarn=s,a.isShow=!0,a.content=t,n=e(function(){a.isShow=!1,a.isWarn=!1,a.content="",i.resolve()},o),i.promise},a}i.$inject=["$timeout","$q"],n(0).module("app").factory("Alert",i)},"C/ss":function(e,t){e.exports=" <div class=chain-toolbar-search-input> <span class=\"iconfont icon-search pre-icon\"></span> <input type=text placeholder=请输入完整订单号 ng-focus=onSearchFocus() ng-model=searchKeywords select-on-click/> </div> <div class=chain-toolbar-search-result ng-show=isSearchResultShow> <div class=no-result ng-show=\"searchResultRecords.length === 0 && searchKeywords\"> 没有搜索到相关订单。 </div> <ul class=chain-toolbar-search-result-lists ng-show=\"searchResultRecords.length > 0\"> <li ng-repeat=\"https://shadow.elemecdn.com/faas/melody/searchResultRecord in searchResultRecords track by searchResultRecord.id\" ng-click=selectOrder(searchResultRecord.id)> <div class=payment-banner ng-show=\"\n          searchResultRecord.payment !== 'CASH' &&\n          searchResultRecord.paymentStatus !== 'SUCCESS'\"> <span class=\"icon icon-error\"></span> <span ng-bind=getPaymentStatusText(searchResultRecord.paymentStatus)> </span> </div> <div class=chain-toolbar-search-result-list> <h3 class=\"daysn color-blue\" ng-class=\"{\n            'large-number': searchResultRecord.daySn > 99,\n            'color-red': searchResultRecord.status === 'UNPROCESSED',\n            'color-gray': searchResultRecord.status === 'INVALID' || (\n              searchResultRecord.paymentStatus !== 'SUCCESS' &&\n              searchResultRecord.payment !== 'CASH'\n            )\n          }\" ng-bind-html=percolatorDaysn(searchResultRecord.daySn)> </h3> <div class=information> <p>{{searchResultRecord.consigneeAddress}}</p> <p class=mb5> <span class=mr5 ng-repeat=\"phone in searchResultRecord.consigneePhones\"> {{::phone}} </span> </p> <p class=color-gray ng-bind-html=percolatorId(searchResultRecord.id)> </p> </div> <span class=price>{{'￥' + searchResultRecord.income}}</span> </div> </li> </ul> </div> <div class=chain-toolbar-search-result-dropback ng-show=isSearchResultShow ng-click=\"isSearchResultShow = false\"></div> "},C9Iq:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},CDGH:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";let r=n.params.path||"/appstore",c=i.restaurantId;this.src=c?`${e.appstoreUrl}${r}?shopId=${c}`:`${e.appstoreUrl}${r}`,-1!==r.indexOf("/mine")?a.container.broadcast("https://shadow.elemecdn.com/faas/melody/appstore.mine",{}):a.container.broadcast("https://shadow.elemecdn.com/faas/melody/appstore.list",{}),o.a.schedule(this.src),o.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/appstore.go",t=>{let i=t.type,a=t.path;this.src=`${e.appstoreUrl}${a}`;"appstore-mine"===i?s.a.isChain()?n.go("app.chainshop.appstore-mine",{path:a}):n.go("app.shop.appstore-mine",{path:a}):s.a.isChain()?n.go("app.chainshop.appstore",{path:a}):n.go("app.shop.appstore",{path:a})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("RG6k")),o=n("CfXW");i.$inject=["config","$location","$state","$stateParams"]},CHlu:function(e,t,n){"use strict";n("6DI4")},CQde:function(e,t,n){"use strict";t.template=n("/Wu+"),t.controller=n("CDGH").default,t.controllerAs="$ctrl"},CZSq:function(e,t,n){e.exports.controller=n("ME4v").default,e.exports.template=n("JarU")},CfXW:function(e,t,n){"use strict";function i(e){const t=document.createElement("a");if(t.href=e,-1===t.hostname.indexOf("https://shadow.elemecdn.com/faas/melody/ele.me")&&-1===t.hostname.indexOf("https://shadow.elemecdn.com/faas/melody/elenet.me")&&"localhost"!==t.hostname&&"127.0.0.1"!==t.hostname)throw new Error("您正在访问非饿了么域名，将不受饿了么保护!")}function a(e){i(e);var t=document.createElement("iframe");return t.setAttribute("src",e),t.setAttribute("sendbox","allow-forms allow-same-origin allow-scripts allow-popups"),t.addEventListener("load",e=>{try{t.contentWindow.addEventListener("click",()=>{const e=document.querySelector(".container");e&&e.click()})}catch(e){}}),t}function s(e){if(e&&e.iframe){const t=document.querySelector("#schedule-container");t.removeChild(e.iframe),h()(f,e.src)}}function o(e){return(e.includes("melody-order-old")||e.includes("melody-order"))&&(e.includes("processing")||e.includes("querying"))&&!m.a.isChain()}function r(){return u()(f).length}function c(){return u()(f).filter(e=>!o(e)).sort((e,t)=>f[e].launchTime-f[t].launchTime)}function l(e,t){return Date.now()-e>t}var p=n("fZjL"),u=n.n(p),d=n("uqrR"),h=n.n(d),m=n("RG6k"),f={},g=null;setTimeout(function e(){for(let e in f){var t=f[e];t&&t.iframe&&l(t.launchTime,18e5)&&!("frontend"===t.state&&!o(e))&&(t.iframe.setAttribute("src",e),t.launchTime=Date.now())}setTimeout(e,18e5)},18e5),setTimeout(function e(){for(let e in f){var t=f[e];t&&!o(e)&&l(t.launchTime,36e4)&&"backend"===t.state&&s(t)}setTimeout(e,36e4)},36e4),t.a={hideScheduleContainer(){document.querySelector("#schedule-container").style.display="none",this.suspend(g)},showScheduleContainer(){document.querySelector("#schedule-container").style.display=null},hideAppWrapper(){const e=document.querySelector("#app-wrapper"),t=e.querySelector("os-container");e.style.display="none",t&&e.removeChild(t)},showAppWrapper(){document.querySelector("#app-wrapper").stype.display=null},createApp(e){const t=a(e),n=document.querySelector("#schedule-container");return t.style.display="none",n.appendChild(t),{iframe:t,src:e,launchTime:null,state:"load"}},suspend(e){e&&e.iframe&&(e.iframe.style.display="none",e.state="backend")},launch(e){if(this.hideAppWrapper(),this.showScheduleContainer(),g=e,e&&e.iframe&&(e.iframe.style.display=null,e.state="frontend",e.launchTime=Date.now()),r()>5){var t=c(),n=t[0],i=f[n];if(!i)throw new Error("The number of launched Apps reaches maximum!");s(i)}},schedule(e){f[e]||(f[e]=this.createApp(e));var t=f[e];return g&&this.suspend(g),this.launch(t),t},watchSrc(e,t){e.$watch("osSrc",e=>{if(e)try{i(e),t.attr("src",e)}catch(e){console.error(e.message)}})},clearApps(){f={}}}},CvAq:function(e,t){e.exports='<div class=login-box-form> <form novalidate name=mobileLoginForm> <div class=login-box-form-mobile> <div> <input type=text class=login-box-form-input placeholder=输入管理员绑定手机号 ng-model=$ctrl.form.mobile autofocus=true ng-readonly=$ctrl.riskLogin required/> <span ng-show=$ctrl.form.mobile ng-click=$ctrl.clearMobile()>&times;</span> </div> <button class="btn btn-primary" ng-if="$ctrl.count.message === 60" ng-click=$ctrl.sendVerifyCode(false) ng-disabled=$ctrl.verifyCodeSent>获取验证码</button> <span ng-if="$ctrl.count.message < 60">{{$ctrl.count.message}}s</span> </div> <input type=text class=login-box-form-input placeholder=请输入验证码 ng-model=$ctrl.form.verifyCode autofocus=true required/> <div class=login-box-form-voice> <div> <span class=login-box-form-error ng-if=$ctrl.errorMessage>{{$ctrl.errorMessage}}</span> </div> <button ng-click=$ctrl.sendVerifyCode(true) ng-if="$ctrl.count.voice === 60" ng-disabled=$ctrl.verifyCodeSent>使用语音验证码</button> <span ng-if="$ctrl.count.voice < 60">{{$ctrl.count.voice}}秒后重新获取语音验证码</span> </div> <div class=login-box-form-captcha ng-if=$ctrl.captchaImageB64> <input type=text placeholder=图片验证码 class=login-box-form-input ng-model=$ctrl.form.captcha> <div class=captcha-image ng-click=$ctrl.updateCaptcha()> <img ng-src="{{$ctrl.captchaImageB64}}" alt=图片验证码> </div> </div> <button class=login-box-form-button ng-disabled=mobileLoginForm.$invalid ng-click=$ctrl.loginByMobile()>登录</button> </form> </div> '},"D+9K":function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";e.switchShopModal={isShopSelectorShow:!1},e.switchRestaurant=function(n){e.switchShopModal.isShopSelectorShow=!1,a.a.clearApps(),t.go("app.shop.dashboard",{restaurantId:n.id},{reload:!0,inherit:!1})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","RestaurantAction","Alert"]},DKPC:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("A7Dr"),c=n.n(r),l=n("/wOq");let p=function(){function e(t,n,i){a()(this,e),this.$scope=t,this.$timeout=n,this.LoginAction=i,this.LoginStore=l.a,this.errorMessage="",this.captchaImageB64="",this.riskLogin=!1,this.form={mobile:"",verifyCode:"",captcha:""},this.count={message:60,voice:60},this.verifyCodeSent=!1;const s=l.a.getProfiles()||[];this.loginedSessionIds=s.map(e=>e.ksid)}return o()(e,[{key:"$onInit",value:function(){this.LoginStore.onChangeWithScope(()=>this.handleError(),this.$scope),this.riskLoginInit()}},{key:"$onDestory",value:function(){this.LoginStore.offChange(()=>this.handleError())}},{key:"handleError",value:function(){const e=this.LoginStore.getLoginResult();e.succeed||(this.errorMessage=c()(e,"failureData.errorMessage"),this.captchaImageB64=c()(e,"failureData.captchaImageB64"))}},{key:"riskLoginInit",value:function(){const e=this.LoginStore.getLoginResult();[1,3,4,5].indexOf(c()(e,"https://shadow.elemecdn.com/faas/melody/failureData.code"))<0||(this.form.mobile=c()(e,"maskedMobile"),this.verifyToken=c()(e,"verifyToken"),this.riskLogin=!0)}},{key:"clearMobile",value:function(){this.form.mobile="",this.riskLogin=!1}},{key:"loginByMobile",value:function(){this.riskLogin?this.LoginAction.loginByMobileRiskLogin(this.verifyToken,this.form.verifyCode,this.form.captcha,this.loginedSessionIds):this.LoginAction.loginByMobile(this.form.mobile,this.form.verifyCode,this.form.captcha,this.loginedSessionIds)}},{key:"countDown",value:function(e){const t=e?"voice":"message";this.count[t]--,0!==this.count[t]?(this.verifyCodeSent||(this.verifyCodeSent=!0),this.$timeout(()=>this.countDown(e),1e3)):(this.count[t]=60,this.verifyCodeSent=!1)}},{key:"sendVerifyCode",value:function(e){if(this.errorMessage="",!this.form.mobile)return void(this.errorMessage="请输入手机号");this.riskLogin?this.LoginAction.sendRiskLoginVerifyCode(this.verifyToken,e).then(()=>this.countDown(e)).catch(e=>{this.errorMessage=e.message}):this.LoginAction.sendVerifyCode(this.form.mobile,e).then(()=>this.countDown(e)).catch(e=>{this.errorMessage=e.message})}},{key:"updateCaptcha",value:function(){this.LoginAction.refreshCaptchaCode("",this.form.mobile).then(e=>{this.captchaImageB64=e})}}]),e}();p.$inject=["$scope","$timeout","LoginAction"],t.a={controller:p,template:n("CvAq")}},DLZP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api.shop.ele.me/"},payment:"https://payapi.ele.me/payment_webApi/payment/placeOrder",beat:{default:{uri:"http://app-api.shop.ele.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},activity:{uri:"http://app-api.shop.ele.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},shop:{uri:"http://app-api.shop.ele.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},rank:{uri:"http://app-api.shop.ele.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},goods:{uri:"http://app-api.shop.ele.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},order:{uri:"http://app-api.shop.ele.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},newOrder:{uri:"http://app-api.shop.ele.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},diagnosis:{uri:"http://app-api.shop.ele.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},delivery:{uri:"http://app-api.shop.ele.me/delivery/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/delivery/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},packs:{uri:"http://app-api.shop.ele.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},ugc:{uri:"http://app-api.shop.ele.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},arena:{uri:"http://app-api.shop.ele.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},shopGrowth:{url:"https://app-api.shop.ele.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},shopDeco:{uri:"https://app-api.shop.ele.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}},crm:{uri:"http://app-api.shop.ele.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api.shop.ele.me"}}},billUrl:"https://balance-desktop.faas.ele.me",billDetailUrl:"https://hydrosweb.faas.ele.me/bill",billDetailUrlForAfp:"https://hydrosweb.faas.ele.me/order/query?order_id=",chainShopBillUrl:"https://balance-headshop.faas.ele.me",chainShopBillDetailUrl:"https://hydroshead.faas.ele.me/bill",ubtUrl:"http://ubt.shop.ele.me/eventlog",ubtFrom:"melody",goodsUrl:"https://melody-goods.faas.ele.me",melodyStatsUrl:"https://melody-stats.faas.ele.me/#",graceUrl:"http://em.ele.me/",melodyPackUrl:"https://melody-pack.faas.ele.me/#",melodyOrderUrl:"https://melody-order.faas.ele.me",melodyActivityUrl:"https://melody-activity.faas.ele.me/",melodyShopUrl:"https://melody-shop.faas.ele.me",receiptUrl:"https://eo.ele.me/napos_web",websocketUrl:"https://client-api.ele.me/api/line/access",appstoreUrl:"https://nest-market.faas.ele.me",domUrl:"https://xy.ele.me/feedback/homepage/index",poscodeUrl:"https://h5.ele.me/poscode/",speUrl:"https://spe.faas.ele.me",creditScoreUrl:"https://melody-credit-score.faas.ele.me",melodyChainShopDashboardUrl:"https://melody-base.faas.ele.me/dashboard",melodyBaseUrl:"https://melody-base.faas.ele.me",melodySettingsUrl:"https://melody-settings.faas.ele.me",melodyPayUrl:"https://melody-pay.faas.ele.me/#",melodyPayBidUrl:"https://bs-river-bid.faas.ele.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.ele.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay.faas.ele.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.ele.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.ele.me/#/app/shop/vas/search",melodyPayChainAccountUrl:"https://melody-vas.faas.ele.me/chainaccount",melodyPayChainBidUrl:"https://bs-river-bid.faas.ele.me/#/app/chainshop/vas/bid",melodyVasDasUrl:"https://das-napos.faas.ele.me",melodyGuaranteeUrl:"https://melody-guarantee.faas.ele.me",chainPermission:"https://chain-permission.faas.ele.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.ele.me/speaker",melodyDeliveryUrl:"https://melody-delivery.faas.ele.me",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons",fbsUrl:"https://melody-fbs.faas.ele.me/",crmUrl:"https://throne.faas.ele.me",melodyDecorateUrl:"https://melody-decorate.faas.ele.me"}},"DNz+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("QgF1"),o=n("3Ztm");a.a.module("app").config(s.a).directive("selectAutoClose",o.a)},DV8u:function(e,t,n){"use strict";function i(e){e.state("app.chainshop.billDetail",{url:"/billdetail?url",views:{"wrapper@app":o}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a);i.$inject=["$stateProvider"];let o=n("tqnw");s.a.module("app").config(i)},DYlY:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE0IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOS4xICgzMTcyMCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y2xvc2U8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS01IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9IjEiPgogICAgICAgIDxnIGlkPSLmnI3liqHlkIjlkIwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01NTAuMDAwMDAwLCAtNDQxLjAwMDAwMCkiIGZpbGw9IiM2NjY2NjYiPgogICAgICAgICAgICA8ZyBpZD0i5Li76aG1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MC4wMDAwMDAsIDQ1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9IuaIkeeahOacjeWKoeWMhSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLjAwMDAwMCwgMTM3LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSLlnKjnur/mlK/ku5giIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDM5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iY2xvc2UiIHBvaW50cz0iMTEzLjIxMDUyNiAyMjcgMTE4IDIyMi4yMTA1MjYgMTE1Ljc4OTQ3NCAyMjAgMTExIDIyNC43ODk0NzQgMTA2LjIxMDUyNiAyMjAgMTA0IDIyMi4yMTA1MjYgMTA4Ljc4OTQ3NCAyMjcgMTA0IDIzMS43ODk0NzQgMTA2LjIxMDUyNiAyMzQgMTExIDIyOS4yMTA1MjYgMTE1Ljc4OTQ3NCAyMzQgMTE4IDIzMS43ODk0NzQiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},DaZv:function(e,t,n){t.template=n("cZ1l"),t.controller=n("dUCe").default,t.controllerAs="$ctrl"},DiGi:function(e,t){e.exports='<div class=view-container> <div class=toolbar-head ng-if="isOverV505Client && !isClientEnv"></div> <div class="toolbar new-style" ng-if=isOverV505Client> <div class=toolbar-left> <div class=toolbar-logo> <img src=https://fuss10.elemecdn.com/0/14/ac5312aebbc978c824acc62128e0csvg.svg alt=饿了么> </div> <shop-switcher class=new-style></shop-switcher> <shop-operating-status></shop-operating-status> </div> <div class=toolbar-right> <div class=toolbar-search ui-view=search></div> <div class=seperate></div> <printer-state></printer-state> <toolbar-notice ng-if=!isMulti></toolbar-notice> <account></account> </div> </div> <div class=toolbar ng-if=!isOverV505Client> <div class=toolbar-left> <div class=toolbar-title> <span class="icon icon-eleme"></span> <span>商家版</span> </div> <div class=toolbar-search ui-view=search> </div> </div> <div class=toolbar-right> <shop-switcher></shop-switcher> <s-p-state></s-p-state> <account-settings></account-settings> <notice-bell ng-if=!isMulti></notice-bell> </div> </div> <section class=container> <nav class=nav ng-class="{\'full-width\': navFullWidth, \'is-multi\': isMulti}" ng-mouseover=handleNavMouseover() ng-mouseleave=handleNavMouseleave()> <navbar class=nav-navbar> <ui-view name=navbar></ui-view> </navbar> <ui-view name=switcher class=multi-shop-switcher></ui-view> </nav> <div class=mainer> <tabs class=toolbar-tabs> <ui-view name=tabs></ui-view> </tabs> <div id=app-wrapper ui-view=wrapper class=content> </div> <div id=schedule-container class=content></div> </div> <div class=nav-mask ng-class="{\'show\': showMask}" ng-if=!isMulti></div> </section> </div> <div ui-view=global-container></div> <div class=alert-container ng-class="{\'alert-show\': Alert.isShow}"> <div class=alert-content ng-class="{\'warn\': Alert.isWarn}"> {{Alert.content}} </div> </div> '},Dovi:function(e,t,n){"use strict";var i=n("vMAF"),a=n.n(i),s=a()({POLLING:null,MARKET_MANAGER_QUESTIONS:null,MARK_VOTED:null,UPDATE_AUTO_CONFIRM:null,GET_BASE_KEEPER:null,SET_PERMISSION_ENABLED:null,GET_PERMISSION_GRAY:null,CLEAR_RECEIPT_COUNT:null,SET_FOOD_GRAY:null,SET_SHOP_GRAY:null,SET_ALL_PERMISSIONS:null,GET_SHOP_AGREEMENTS:null});t.a=s},DuSP:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h),f=n("f4CT");let g=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.isInGray=!1,n}return d()(t,e),c()(t,[{key:"getIsInGray",value:function(){return this.isInGray}},{key:"getHandlers",value:function(){return{[f.a.SHOP_DECO_GRAY_LOADED]:e=>{this.isInGray=e.result}}}}]),t}(m.a.Store);t.a=new g},E6Yu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.receipt",{url:"/receipt",views:{"wrapper@app":n("Je29")}})}])},"EA+7":function(e,t){e.exports='<div class=tree-view-list ng-show=$ctrl.showTreeView> <div class=tvl> <div class=tree-node ng-class="{\n        active: $ctrl.effectList.indexOf(node.id) !== -1,\n        enter: node.$enter\n      }" ng-repeat="https://shadow.elemecdn.com/faas/melody/node in node.childList track by node.id" ng-click="$ctrl.select($event, node)" ng-mouseenter=$ctrl.enter(node) ng-mouseleave=$ctrl.leave(node)> <span>{{node.name}}</span> <span class="icon icon-keyboard-right" ng-show=node.childList.length></span> <div class=tree-node-children ng-show=node.childList.length ng-include="\'https://shadow.elemecdn.com/faas/melody/tree-selector.html\'"></div> </div> </div> </div>'},EFJn:function(e,t,n){"use strict";function i(e){"ngInject";function t(t,n,i,a){var s=e(i.dynamicMaxvalue);a.$validators.dynamicMaxvalue=((e,n)=>{var i=Number(s(t));var a=Number(e||n);return a<=i}),t.$watch(i.dynamicMaxvalue,e=>{var t=Number(e);if(!isNaN(t)){let e=a.$modelValue,n=a.$viewValue,i=a.$setValidity,s=Number(e||n);i("dynamicMaxvalue",s<=t)}})}return{link:t,require:"ngModel"}}t.a=i,i.$inject=["$parse"]},EYTI:function(e,t,n){e.exports.controller=n("o1nU").default,e.exports.template=n("ifVp")},Ejaw:function(e,t,n){"use strict";function i(){return{restrict:"AE",scope:{mTip:"=",html:"="},link:a}}function a(e,t,n){e.dir=n.mDir||"top",n.$observe("words",n=>{if(!n)return;s(e,t,n)})}function s(e,t,n){e.mTip&&r(t.attr({"data-toogle":"tooltip",title:n,"data-placement":e.dir})).tooltip({html:e.html||!1})}a.$inject=["scope","element","attrs"];var o=n(0),r=n(1);n("UB8f"),o.module("app").directive("mTip",i)},FPbx:function(e,t,n){"use strict";n("gRVC")},FQIM:function(e,t,n){"use strict";e.exports.controller=n("uhNk").default,e.exports.template=n("5PHs")},Fdnq:function(e,t,n){"use strict";function i(e,t,n,i,a){function r(){e.isSearching=!0,a.loadSearchChainResultOrders(e.searchKeywords)}function c(){e.searchResultRecords=o.a.getSearchResult()}function l(t){var n=String(e.searchKeywords);return t=t.toString(),t=t.replace(new RegExp(n,"g"),'<span class="toolbar-search-result-mark">'+n+"</span>")}function p(){return new RegExp(/^\d{1,4}$/).test(e.searchKeywords)}function u(){return new RegExp(/^\d{5,}$/).test(e.searchKeywords)}e.searchKeywords="",e.searchResultRecords=[],e.isSearchResultShow=!1,e.isFocus=!1,e.searchTags=[],e.getTags=(()=>{a.getSearchTags().then(t=>{e.searchTags=t})}),e.tagSearch=(n=>{e.isSearchResultShow=!1;let i={name:n.name,type:n.type};t.go("app.shop.order.tag-searching",{info:s()(i)})}),e.onSearchFocus=function(){e.isSearchResultShow=!0,window.perf&&window.perf.sendEvent({name:"点击搜索订单",id:"SkdIbMLXb"})},e.onSearchBlur=function(){n(function(){e.isSearchResultShow=!1},300)},e.$watch("searchKeywords",function(t,i){t!==i&&(e.searchPromise&&n.cancel(e.searchPromise),e.searchPromise=n(r,300))}),e.selectOrder=function(n){e.isSearchResultShow=!1;t.go("app.chainshop.order.searching",{orderId:n})},o.a.onChangeWithScope(c),e.percolatorDaysn=function(e){return e=i("doubleDigit")(e),p()?l(e):e},e.percolatorPhone=function(e){return u()?l(e):e},e.percolatorId=function(e){return u()?l(e):e},e.getPaymentStatusText=function(e){return{unpaid:"尚未支付订单",failed:"支付失败订单",pending:"订单生成中"}[e]||"无效订单"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("mvHQ"),s=n.n(a),o=n("9UnT");i.$inject=["$scope","$state","$timeout","$filter","OrderAction"]},FvuL:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";let o=decodeURIComponent(t.path),r=`${n.melodySettingsUrl}/${o}?shopId=${t.restaurantId}`;this.src=r;var c=s.a.schedule(this.src);s.a.watchSrc(i,c.iframe),s.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{const n=encodeURIComponent(t);e.go(".",{path:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config","$scope"]},GGhG:function(e,t){e.exports='<div class=password-set-container> <div class=password-set-outer-wrapper> <div class=outer-wrapper-title> <span>设置密码</span> <button class="btn btn-link" ng-click=toMain()>暂不设置</button> </div> <div class=outer-wrapper-content> <p>尊敬的商户，为了便于您记住登录密码，首次登录需设置密码</p> <div class=password-form> <div class=password-inner-wrap> <span class=inner-wrap-name>新密码: </span> <input type=password class=inner-wrap-content ng-model=password placeholder=设置新密码> </div> <div class="password-inner-wrap password-tips"> <span class=inner-wrap-name></span> <span class=inner-wrap-content>密码需包含数字和字母，且长度超过8位以上</span> </div> <div class=password-inner-wrap> <span class=inner-wrap-name>确认新密码: </span> <input type=password class=inner-wrap-content ng-model=confirmPassword placeholder=确认新密码> </div> <div class=password-inner-wrap> <span class=inner-wrap-name></span> <div class=inner-wrap-content> <button class="btn btn-primary" ng-click=setFirstPasswd() ng-disabled="password.length < 8 || confirmPassword.length < 8"> 确认 </button> </div> </div> </div> </div> </div> </div> <div class=alert-container ng-class="{\'alert-show\': Alert.isShow}"> <div class=alert-content ng-class="{\'warn\': Alert.isWarn}"> {{Alert.content}} </div> </div>'},GNCq:function(e,t,n){"use strict";var i=n("fZjL"),a=n.n(i),s=n("C4MV"),o=n.n(s),r={};t.a={getItem(e){return r[e]},setItem(e,t,n){n?o()(r,e,{value:t,writable:!1,enumerable:!0,configurable:!0}):r[e]=t},removeItem(e){delete r[e]},hasItem(e){return!!r[e]},keys(){return a()(r)},data:r}},GZDb:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9IiNEOERDRTYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE2IDI1LjIxN0w2LjkwMiAzMCA4LjY0IDE5Ljg3bC03LjM2LTcuMTc1IDEwLjE3MS0xLjQ3OEwxNiAybDQuNTQ5IDkuMjE3IDEwLjE3MSAxLjQ3OC03LjM2IDcuMTc1TDI1LjA5OCAzMHoiLz4KPC9zdmc+Cg=="},HA6K:function(e,t,n){"use strict";function i(e,t,n,i,a,s){console.log("config",n),console.log("ksid",i),i&&d()(n.beat,function(e,t){var n=e.opts;"1.0.0"===n.ncp||void 0===n.ncp?n.query.ksid=i:"2.0.0"===n.ncp&&(n.metas.ksid=i,a&&(n.metas.hostName=a))}),e.init(n.beat),t.init(m,"development"===s,n.ubtFrom)}function a(e,t,n,i,a,s,r){const l=p()(t=>{try{r.traceOrderLog([],"LOG_OUT_EXCEPTION",{result:"退出登录打点",ksid:e.arena.get("metas").ksid,error:c()(t)}),a.removeCurrentProfile(),setTimeout(()=>{n.go("login")},2e3)}catch(t){console.log(t)}});o()(s.beat).forEach(t=>{const n="default"===t?e:e[t];n.on("error",e=>{switch(e.code){case"UNAUTHORIZED":case"LOGIN_REQUIRED":case"INVALID_SELF_DIST_RESTAURANT_D":l(e)}})})}Object.defineProperty(t,"__esModule",{value:!0});var s=n("fZjL"),o=n.n(s),r=n("mvHQ"),c=n.n(r),l=n("QQCc"),p=n.n(l),u=n("YEW4"),d=n.n(u);a.$inject=["beat","analytics","$state","Alert","LoginProfileAction","config","OrderAction"],i.$inject=["beatProvider","analyticsProvider","config","ksid","hostName","env"];var h=n(0),m=n("0ZIY");h.module("app").config(i).run(a)},HNU3:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyGuaranteeUrl}?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},HScm:function(e,t,n){"use strict";t.template=n("8my+"),t.controller=n("mrBA").default,t.controllerAs="$ctrl"},HWj1:function(e,t,n){"use strict";function i(e){e.state("app.multishop",{url:"/multi-shop",redirect:".processcenter",resolve:{ResourceInit:a},views:{"navbar@app":c.a,"wrapper@app":p.a,"search@app":d.a,"switcher@app":m.a}})}function a(e,t,n,i){"ngInject";e.disable(),t.setCurrentRestaurant(null),f.a.getAllShops().forEach(e=>{i.getCrowdShopProductStatus(e.id);i.getControlledShopProductStatus(e.id)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=n.n(s),r=n("vjXx"),c=n.n(r),l=n("hglM"),p=n.n(l),u=n("5Hqf"),d=n.n(u),h=n("EYTI"),m=n.n(h),f=n("RG6k");a.$inject=["XShard","RestaurantAction","ResourceInit","ShopDeliveryAction"],i.$inject=["$stateProvider"],o.a.module("app").config(i)},HY7c:function(e,t,n){"use strict";n("HWj1")},Hgq0:function(e,t,n){e.exports.controller=n("hDbe").default,e.exports.template=n("GGhG")},HuKM:function(e,t,n){"use strict";n("M+a6"),n("wvyT"),n("bW9i"),n("I8m0"),n("NpL7")},Hx08:function(e,t,n){t.template=n("Tu4W"),t.controller=n("Lv5N").default,t.controllerAs="$ctrl"},I8m0:function(e,t,n){"use strict";n(0).module("app").filter("collegeWords",()=>(e,t)=>{if(e.toString().length<=t)return e;return e.split("").slice(0,t).join("")+"..."})},IEWi:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQwcHgiIGhlaWdodD0iNDBweCIgdmlld0JveD0iMCAwIDQwIDQwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnZlcmZfc3VjY2VzczwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSLnu5HlrprmlrDlupfmtYHnqIsiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLpqozor4HmiJDlip8iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03MzIuMDAwMDAwLCAtMzQwLjAwMDAwMCkiIGZpbGw9IiM1NEE3RjQiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMyLjAwMDAwMCwgMzQwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLDQwIEMzMS4wNDU2OTUsNDAgNDAsMzEuMDQ1Njk1IDQwLDIwIEM0MCw4Ljk1NDMwNSAzMS4wNDU2OTUsMCAyMCwwIEM4Ljk1NDMwNSwwIDAsOC45NTQzMDUgMCwyMCBDMCwzMS4wNDU2OTUgOC45NTQzMDUsNDAgMjAsNDAgTDIwLDQwIFogTTE5LjYwMTUyMTIsMjcuOTc1Mjk0NiBMMzEuNTQ5NTIyLDE2LjAyNzI5MzggTDI4LjcyMTA5NDksMTMuMTk4ODY2NyBMMTguMDI0NDE5OCwyMy44OTU1NDE3IEwxMi4zNjc1NjU2LDE4LjIzODY4NzUgTDkuNTM5MTM4NDMsMjEuMDY3MTE0NiBMMTguMDI0NDE5OCwyOS41NTIzOTYgTDE5LjYwMTUyMTIsMjcuOTc1Mjk0NiBaIE0yMCwzNiBDMTEuMTYzNDQ0LDM2IDQsMjguODM2NTU2IDQsMjAgQzQsMTEuMTYzNDQ0IDExLjE2MzQ0NCw0IDIwLDQgQzI4LjgzNjU1Niw0IDM2LDExLjE2MzQ0NCAzNiwyMCBDMzYsMjguODM2NTU2IDI4LjgzNjU1NiwzNiAyMCwzNiBaIiBpZD0idmVyZl9zdWNjZXNzIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},IMkP:function(e,t){e.exports="<div class=shop-switcher ng-show=\"$ctrl.rid && !$ctrl.isChain\" ng-class=\"{'new-style': $ctrl.isOverV505Client}\"> <span class=shop-name>{{$ctrl.name}}</span> </div> <tree-view-selector tree-data=$ctrl.treeData on-select=$ctrl.switch(node) light=true selectable=\"['LEAF', 'ROOT']\" selected=$ctrl.rid ng-show=$ctrl.isChain> </tree-view-selector> "},IPI6:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("a+F3");let m=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"_$onInit",value:function(){return this.db.getOrderData(this.rid).then(e=>{this.newOrder=e.NewOrder;this.abnormalOrder=e.AbnormalOrder;this.urgeOrder=e.UrgeOrder;this.cancelOrder=e.CancleOrder})}}]),t}(h.a);t.a={template:n("BaoZ"),controller:m}},Iojo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h),f=n(0),g=n.n(f),v=n("f4CT");let y=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"getEnv",value:function(){return"production"!==(window.$ENV?window.$ENV.split("_").pop():null)?window.localStorage.getItem("env")||"alpha":"production"}},{key:"isProduction",value:function(){return"production"===this.getEnv()}},{key:"loadGray",value:function(){let e=this.isProduction()?"":"-test";return fetch(`https://crayfish.elemecdn.com/melody.shop.ele.me@json/gray${e}`).then(e=>e.json()).then(e=>{this.dispatch({actionType:v.a.GRAY_LOADED,result:e.gray})})}}]),t}(m.a.ActionCreator);g.a.module("app").service("GrayAction",y)},"Ipc/":function(e,t,n){"use strict";n("HY7c")},JOOO:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE1cHgiIGhlaWdodD0iMjFweCIgdmlld0JveD0iMCAwIDE1IDIxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IHNrZXRjaHRvb2wgMy44LjMgKDI5ODAyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT43MkNGQTU3RS03NTAzLTQ1MEUtQjE5RC05RjdCNTgwRTYzNzE8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIHNrZXRjaHRvb2wuPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Iui/numUgeW6l+acuuaehOeuoeeQhiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWIh+WbviIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE2OS4wMDAwMDAsIC02MS4wMDAwMDApIiBmaWxsPSIjNEM1MTY1Ij4KICAgICAgICAgICAgPHBhdGggZD0iTTE3Ni41NjM5MzcsNjIuNzIyODMzMyBDMTc5LjM3ODU5NSw2Mi43MjI4MzMzIDE4MS42Njc1NzgsNjQuOTkyNzQxMyAxODEuNjY3NTc4LDY3Ljc4Mzk0MzUgQzE4MS42Njc1NzgsNzAuOTU1OTk0NCAxNzguNTU2OTA5LDc1Ljc0NzYwMDUgMTc2LjU2MjY2MSw3OC4zODk1IEMxNzQuNTY4NDE0LDc1Ljc1MDEzMSAxNzEuNDYwMjk2LDcwLjk1OTc5MDIgMTcxLjQ2MDI5Niw2Ny43ODM5NDM1IEMxNzEuNDYwMjk2LDY0Ljk5Mjc0MTMgMTczLjc0OTI3OSw2Mi43MjI4MzMzIDE3Ni41NjM5MzcsNjIuNzIyODMzMyBNMTc2LjU2MzkzNyw4MS40ODkgQzE3OS4zOTA5OTYsNzguMTI1NSAxODMuNjIyNzYxLDcyLjM1OTgzMzMgMTgzLjYyMjc2MSw2OCBDMTgzLjYyMjc2MSw2NC4xMzk1IDE4MC40NTY4NzgsNjEgMTc2LjU2MzkzNyw2MSBDMTcyLjY3MDk5Niw2MSAxNjkuNTA1MTEzLDY0LjEzOTUgMTY5LjUwNTExMyw2OCBDMTY5LjUwNTExMyw3Mi4zNjEgMTczLjczOTIzMSw3OC4xMjY2NjY3IDE3Ni41NjM5MzcsODEuNDg5IFogTTE3OC43MTA5OTYsNjggQzE3OC43MTA5OTYsNjYuODI2ODI5MiAxNzcuNzQ4MDQsNjUuODcwODMzMyAxNzYuNTYzOTM3LDY1Ljg3MDgzMzMgQzE3NS4zNzk4MzQsNjUuODcwODMzMyAxNzQuNDE2ODc4LDY2LjgyNjgyOTIgMTc0LjQxNjg3OCw2OCBDMTc0LjQxNjg3OCw2OS4xNzMxNzA4IDE3NS4zNzk4MzQsNzAuMTI5MTY2NyAxNzYuNTYzOTM3LDcwLjEyOTE2NjcgQzE3Ny43NDgwNCw3MC4xMjkxNjY3IDE3OC43MTA5OTYsNjkuMTczMTcwOCAxNzguNzEwOTk2LDY4IFoiIGlkPSJsb2NhdGlvbiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},JPSn:function(e,t){e.exports=' <div class=single-toolbar-search-input> <span class="iconfont icon-search pre-icon" ng-if=!isFocus></span> <input type=text placeholder="{{placeholder}}" maxlength=20 ng-focus=onSearchFocus() ng-model=searchKeywords /> <span class="iconfont icon-search btn-search" ng-if=isFocus ng-class="{ \'is-active\': isSearchResultShow && !!searchKeywords }" ng-click=searchOrders()></span> </div> <div class=single-toolbar-search-result ng-show=isSearchResultShow> <p class=des ng-show=!searchKeywords> 搜索相关订单 </p> <div class=no-result ng-show="searchResultRecords.length === 0 && searchKeywords && !isSearching"> <span>未找到与「{{ searchKeywords }}」有关的订单</span> </div> <div class=searching ng-show="isSearching && searchKeywords"> 搜索中... </div> <ul class=single-toolbar-search-result-lists ng-show="searchResultRecords.length > 0 && !isSearching && searchKeywords"> <li ng-repeat="searchResultRecord in searchResultRecords track by searchResultRecord.activeTime"> <p class=date style="">{{ searchResultRecord.activeTime.slice(5) }} 订单</p> <div ng-repeat="https://shadow.elemecdn.com/faas/melody/searchResultRecord2 in searchResultRecord.searchOrder track by searchResultRecord2.id" ng-click=selectOrder(searchResultRecord2.id)> <div class=payment-banner ng-show="\n            searchResultRecord2.payment !== \'CASH\' &&\n            searchResultRecord2.paymentStatus !== \'SUCCESS\'"> <span class="icon icon-error"></span> <span ng-bind=getPaymentStatusText(searchResultRecord2.paymentStatus)> </span> </div> <div class=single-toolbar-search-result-list> <h3 class="daysn color-blue" ng-class="{\n              \'large-number\': searchResultRecord2.daySn > 99,\n              \'color-red\': searchResultRecord2.status === \'UNPROCESSED\',\n              \'color-gray\': searchResultRecord2.status === \'INVALID\' || (\n                searchResultRecord2.paymentStatus !== \'SUCCESS\' &&\n                searchResultRecord2.payment !== \'CASH\'\n              )\n            }" ng-bind-html=percolatorDaysn(searchResultRecord2.daySn)> </h3> <div class=information> <p>{{searchResultRecord2.consigneeAddress}}</p> <p class=mb5> <span class=mr5 ng-repeat="phone in searchResultRecord2.consigneePhones"> {{::phone}} </span> </p> <p class=color-gray ng-bind-html=percolatorId(searchResultRecord2.id)> </p> </div> <span class=price>{{\'￥\' + searchResultRecord2.income}}</span> </div> </div> </li> </ul> </div> <div class=single-toolbar-search-result-dropback ng-show=isSearchResultShow ng-click="isSearchResultShow = false"> </div> '},JarU:function(e,t){e.exports='<os-container os-src="{{src}}"></os-container> '},Je29:function(e,t,n){t.template=n("Ye5a"),t.controller=n("vT70").default,t.controllerAs="$ctrl"},Jufg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h),f=n(0),g=n.n(f),v=n("f4CT");let y=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this));return n.api=e.shopDeco.app.invoke,n}return t.$inject=["beat"],d()(t,e),c()(t,[{key:"loadGray",value:function(e){this.api("GrayScaleService.isStoreDecorationWhiteList",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.SHOP_DECO_GRAY_LOADED,result:e})})}}]),t}(m.a.ActionCreator);g.a.module("app").service("ShopDecoAction",y)},JulK:function(e,t,n){"use strict";function i(){"ngInject";this.src="https://h5.ele.me/service/agreement/?HEAEDER_SHOW=1",a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW")},JyEj:function(e,t,n){"use strict";var i=n("//Fk"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("PJh5"),p=n.n(l),u=n("CfXW");let d=function(){function e(t,n){o()(this,e),this.api=t.arena.app.invoke,this.ugcApi=t.ugc.app.invoke,this.rankApi=t.rank.app.invoke,this.activityApi=t.activity.app.invoke,this.NoticeAction=n,this.packsApi=t.packs.app.invoke,this.shopGrowthApi=t.shopGrowth.app.invoke,this.crmApi=t.crm.app.invoke}return c()(e,[{key:"getOrderData",value:function(e){return u.a.hideScheduleContainer(),this.api("PCMainViewService.getShopOrderNotice",{shopId:e})}},{key:"getStatsData",value:function(e){return a.a.all([this.api("PCMainViewService.getTodayBusinessData",{shopId:e}),this.api("PCMainViewService.getYestdayBusinessData",{shopId:e})]).then(e=>({today:e[0],yestday:e[1]}))}},{key:"getActivityData",value:function(e){return a.a.all([this.activityApi("applyActivityManage.getApplyActivity",{shopId:e}),...["ACTIVATED","PENDING","EXPIRED"].map(t=>this.activityApi("activityCenter.getActivityByShopIdAndStatus",{shopId:e,activityStatus:t}))]).then(e=>{function t(e){return!/^SELF/i.test(e.activityType)}let n=e[0].filter(e=>"OPEND"===e.applyStatus&&p()()>=p()(e.applyBeginDate)&&p()()<=p()(e.applyEndDate)).length;let i=e.slice(1).reduce((e,t)=>[...e,...t]).filter(t).length;let a=e[1].filter(t).length;return{canApply:n,applied:i,activited:a}})}},{key:"getNoticeData",value:function(e){return this.api("PCMainViewService.getPCNotice",{shopId:e})}},{key:"getPollingNoticeResult",value:function(e){return this.api("PushService.polling",{shopId:e})}},{key:"setNoticeBarClear",value:function(e){return this.api("NoticeShopService.setNoticeBarClear",{shopId:e})}},{key:"getTaskData",value:function(e){return this.api("PCMainViewService.getShopHealthCheck",{shopId:e})}},{key:"getFeedbackData",value:function(e){let t=p()().subtract(90,"days").minute(0).second(0).format().split("+")[0],n=p()().minute(0).second(0).format().split("+")[0];return this.ugcApi("ShopRatingService.countNoReplyShopRating",{shopIds:[e],query:{beginDate:t,endDate:n,hasContent:!0}})}},{key:"pushOrNot",value:function(e){return this.packsApi("servingPack.pushOrNot",{shopId:e})}},{key:"saveNewDeliveryRule",value:function(e){return this.packsApi("servingPack.saveNewDeliveryRule",{shopId:e})}},{key:"submitBDComment",value:function(e){return this.shopGrowthApi("BDSatisfactionService.commitComment",{commentInfo:e})}},{key:"getCustomerStatistics",value:function(e,t,n){return this.crmApi("CustomerService.getCustomerStatistics",{shopId:e,startTime:t,endTime:n})}},{key:"getCrmGray",value:function(e){return this.crmApi("CustomerService.inWhiteList",{shopId:e})}}]),e}();d.$inject=["beat"],t.a=d},K0OK:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${i.speUrl}?shopId=${n.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(e,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},K6AV:function(e,t,n){t.template=n("ZMVT"),t.controller=n("tlTg").default,t.controllerAs="$ctrl"},KAZN:function(e,t){e.exports='<os-container os-src="{{vm.src}}" style=margin:-10px></os-container> '},KB7M:function(e,t,n){"use strict";function i(e){return"object"==typeof e||"function"==typeof e}function a(e){return Array.isArray(e)}var s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r);let l=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getItem",value:function(e){return sessionStorage.getItem(e)||""}},{key:"setItem",value:function(e,t){if(!e||i(e))throw new Error("sessionStorage参数key值不合规！");if(!t||i(t)&&!a(t))throw new Error("sessionStorage参数value值不合规！");sessionStorage.setItem(e,t)}},{key:"getArrayItem",value:function(t){if(!t||i(t))throw new Error("sessionStorage参数key值不合规！");return e.getItem(t).split(",").filter(e=>""!==e)}}]),e}();t.a=l},KJr0:function(e,t,n){"use strict";e.exports=function(){}},"KO+o":function(e,t){e.exports="data:image/png;base64,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"},KcnZ:function(e,t,n){"use strict";(function(e){var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("/hwr"),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("Dovi");let y=["shop_read_shop_info","shop_read_shop_delivery","shop_open_shop","shop_close_shop","shop_modify_logo","shop_modify_business_hours","shop_modify_order_phone","shop_modify_boardcast","shop_modify_abstract","shop_modify_book","shop_modify_invoice","shop_modify_photo","shop_modify_camera","shop_modify_cert_info","shop_buy_delivery","shop_modify_delivery_provider","shop_modify_delivery_area","shop_modify_delivery_init_price","shop_modify_delivery_price","shop_read_shop_list","shop_set_business_status","shop_batch_set_shop_status"],w=["goods_read_goods","goods_create_goods","goods_update_goods","goods_on_off_shelve_goods","goods_delete_goods","goods_stock_management","goods_batch_management_goods","goods_chain_write_brush_goods","goods_management_menu"],I=function(t){function n(){o()(this,n);var e=p()(this,(n.__proto__||a()(n)).call(this));return e.pollingResult={},e.marketManagerQuestions=[],e.baseKeeper={},e.grayInfo={inWhiteList:!0},e.permissionEnabled=!0,e.permissionCodes=[],e.shopAgreements=[],e}return d()(n,t),c()(n,[{key:"getMarketManagerQuestions",value:function(){return this.marketManagerQuestions}},{key:"getPolling",value:function(){return this.pollingResult}},{key:"getBaseKeeper",value:function(){return this.baseKeeper}},{key:"isClientEnv",value:function(){return!!e.__napos__sendToBrowser__}},{key:"getAutoProcessInfo",value:function(e){return[JSON.parse(window.localStorage.getItem(e+"autoConfirm")),JSON.parse(window.localStorage.getItem(e+"autoDelivery"))]}},{key:"getPermissions",value:function(){return{permissions:this.permissionCodes,enabled:this.permissionEnabled,inWhiteList:this.permissionGray}}},{key:"getPermissionGray",value:function(){return this.permissionGray}},{key:"getFoodPermissionGray",value:function(){return this.foodPermissionGray}},{key:"getShopAgreements",value:function(){return this.shopAgreements}},{key:"getHandlers",value:function(){return{[v.a.MARKET_MANAGER_QUESTIONS]:e=>{this.marketManagerQuestions=e.questions},[v.a.POLLING]:e=>{this.pollingResult=e.pollingResult},[v.a.GET_SHOP_AGREEMENTS]:e=>{this.shopAgreements=e.shopAgreements},[v.a.CLEAR_RECEIPT_COUNT]:e=>{this.pollingResult.receiptRedCount=0},[v.a.GET_BASE_KEEPER]:e=>{this.baseKeeper=e.keeper;this.permissionCodes=m()(this.baseKeeper.permissionCodes)||[]},[v.a.MARK_VOTED]:e=>{this.pollingResult.managerVotable=!1},[v.a.UPDATE_AUTO_CONFIRM]:e=>{window.localStorage.setItem(e.shopId+"autoConfirm",e.autoConfirm);window.localStorage.setItem(e.shopId+"autoDelivery",e.autoDelivery)},[v.a.SET_PERMISSION_ENABLED]:e=>{this.permissionEnabled=e.enabled},[v.a.GET_PERMISSION_GRAY]:e=>{this.permissionGray=e.result},[v.a.SET_FOOD_GRAY]:e=>{e.result||(this.permissionCodes=this.permissionCodes.concat(w));this.foodPermissionGray=e.result},[v.a.SET_SHOP_GRAY]:e=>{e.result||(this.permissionCodes=this.permissionCodes.concat(y))},[v.a.SET_ALL_PERMISSIONS]:e=>{this.permissionCodes=this.permissionCodes.concat(y).concat(w)}}}}]),n}(g.a.Store);t.a=new I}).call(t,n("DuR2"))},KoNM:function(e,t,n){"use strict";function i(){return o.a.isMulti()?{state:"app.multishop.processcenter.processed"}:{state:"app.shop.order.processing"}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),o=n("RG6k");s.a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.order",{url:"/order?path",redirect:i}).state("app.shop.order.processing",{url:"/processing",reloadOnSearch:!1,views:{"wrapper@app":n("DaZv")}}).state("app.shop.order.querying",{url:"/querying",views:{"wrapper@app":n("Hx08")}}).state("app.shop.order.searching",{url:"/searching/:orderId",views:{"wrapper@app":n("XlDX")}}).state("app.shop.order.searchings",{url:"/searchings/:fuzzyPhrase",views:{"wrapper@app":n("+qb0")}}).state("app.shop.order.tag-searching",{url:"/tag-searching/:info",views:{"wrapper@app":n("ZRaY")}}).state("app.chainshop.order.processing",{url:"/processing?path",reloadOnSearch:!1,views:{"wrapper@app":n("DaZv")}}).state("app.chainshop.order.query",{url:"/query?path",reloadOnSearch:!1,views:{"wrapper@app":n("Hx08")}}).state("app.chainshop.order.searching",{url:"/searching/:orderId",views:{"wrapper@app":n("XlDX")}}).state("app.multishop.processcenter.searching",{url:"/searching/:orderId",views:{"wrapper@app":n("XlDX")}})}])},KqWW:function(e,t,n){"use strict";function i(e){var t={},n=t,i=e.browser.invoke;return t.invoke=((e,t)=>i(e,t)),t.stopFlashWindow=(()=>{i("pc.notify.stopFlashWindow")}),t.startFlashWindow=(()=>{i("pc.notify.startFlashWindow")}),t.callSwitchToFront=(()=>{i("pc.system.callSwitchToFront")}),t.clearGlobalPrintSettings=s()(function*(){try{return yield i("pc.print.clearGlobalPrintSettings"),!0}catch(e){return console.error(e),!1}}),t.getGlobalPrintSettings=s()(function*(){try{return yield i("pc.print.getGlobalPrintSettings")}catch(e){return yield n.clearGlobalPrintSettings(),yield i("pc.print.getGlobalPrintSettings")}}),t.updateGlobalPrintSettings=(e=>i("pc.print.updateGlobalPrintSettings",[e])),t.getPrinters=(()=>i("pc.print.getPrinters")),t.getAvailablePrinters=s()(function*(){try{let e=yield n.getPrinters(),t=r()(e,{isEnabled:!0});return t||[]}catch(e){return[]}}),t.haneAvailablePrinter=s()(function*(){return!!(yield n.getAvailablePrinters()).length}),t.enablePrinter=(e=>i("pc.print.enablePrinter",{printerId:e})),t.disablePrinter=(e=>i("pc.print.disablePrinter",{id:e})),t.updatePrinter=(e=>i("pc.print.updatePrinter",e)),t.printOrderByTpl=(e=>i("pc.print.printOrderByTpl",e)),t}Object.defineProperty(t,"__esModule",{value:!0});var a=n("exGp"),s=n.n(a),o=n("Ga4K"),r=n.n(o);i.$inject=["beat"],n(0).module("app").factory("ClientService",i)},Kvte:function(e,t,n){"use strict";n("qYZz")},L9RH:function(e,t,n){t.template=n("zz8v"),t.controller=n("zOzo").default,t.controllerAs="vm"},LA4R:function(e,t,n){"use strict";n("TJ0e")},LEHW:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("A7Dr"),c=n.n(r),l=n("/wOq");let p=function(){function e(t,n){a()(this,e),this.$scope=t,this.LoginAction=n,this.LoginStore=l.a,this.errorMessage="",this.captchaImageB64="",this.form={username:"",password:"",captcha:""};const i=l.a.getProfiles()||[];this.loginedSessionIds=i.map(e=>e.ksid)}return o()(e,[{key:"$onInit",value:function(){this.LoginStore.onChangeWithScope(()=>this.handleError(),this.$scope)}},{key:"$onDestory",value:function(){this.LoginStore.offChange(()=>this.handleError())}},{key:"loginByUsername",value:function(){this.LoginAction.loginByUsername(this.form.username,this.form.password,this.form.captcha,this.loginedSessionIds)}},{key:"handleError",value:function(){const e=this.LoginStore.getLoginResult(),t=c()(e,"failureData.weakPassword"),n=[1,3,4,5].indexOf(c()(e,"https://shadow.elemecdn.com/faas/melody/failureData.code"))>-1;e.succeed||(t||n||(this.errorMessage=c()(e,"failureData.errorMessage")),this.captchaImageB64=c()(e,"failureData.captchaImageB64"))}},{key:"updateCaptcha",value:function(){this.LoginAction.refreshCaptchaCode(this.form.username,"").then(e=>{this.captchaImageB64=e})}}]),e}();p.$inject=["$scope","LoginAction"],t.a={controller:p,template:n("RNMg")}},LNAS:function(e,t,n){"use strict";function i(e){"ngInject";e.config({debug:!1})}t.a=i,i.$inject=["$ocLazyLoadProvider"]},LOPs:function(e,t,n){"use strict";n("YmXs")},Llrn:function(e,t,n){"use strict";n("6loW")},Lv5N:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${i.melodyOrderUrl}/app/query?shopId=${n.restaurantId}`;var o=s.a.schedule(this.src);s.a.watchSrc(e,o.iframe),s.a.hideAppWrapper(),a.container.broadcast("order.switchToQuery",{}),window.perf&&window.perf.sendEvent({name:"点击订单查询",id:"BkL5sXzX-"}),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",e=>{"/app/query"===e&&t.go(".")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$scope","$state","$stateParams","config"]},"M+a6":function(e,t,n){"use strict";function i(){return function(e){return e<10&&(e="0"+e),e}}n(0).module("app").filter("doubleDigit",i)},ME4v:function(e,t,n){"use strict";function i(e,t,n){e.src=`${t.melodyBaseUrl}/college`,a.a.schedule(e.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","config","$stateParams"]},MFP3:function(e,t,n){e.exports='<div class=organization-container> <div class=verify ng-show=vm.bindModal.isShow> <div class=verify-header> <div class=step> <div class="step-no active"> 1 </div> <span class="step-entry active word">录入店铺信息</span> </div> <span class=step-line ng-class="{active : vm.step !== \'begin\'}"> </span> <div class=step> <div class=step-no ng-class="{active : vm.step !== \'begin\'}"> 2 </div> <span class="step-entry word" ng-class="{active : vm.step !== \'begin\'}">选择验证方式</span> </div> <span class=step-line ng-class="{active : vm.step !== \'begin\' && vm.step !== \'second\'}"></span> <div class=step> <div class=step-no ng-class="{active : vm.step !== \'begin\' && vm.step !== \'second\'}"> 3 </div> <span class="step-varify word" ng-class="{active : vm.step !== \'begin\' && vm.step !== \'second\'}">验证</span> </div> <span class=step-line ng-class="{active : vm.step === \'success\'}"> </span> <div class=step> <div class=step-no ng-class="{active : vm.step === \'success\' }"> 4 </div> <span class="step-success word" ng-class="{active : vm.step === \'success\' }">绑定成功</span> </div> </div> <div class=verify-body> <form name=firstStepForm ng-submit=vm.confirmShop(vm.bindModal.id) novalidate> <div class="body-step body-step-first" ng-show="vm.step === \'begin\'"> <div> <span>店铺ID或店铺号:</span> <input type=number ng-model=vm.bindModal.id /> </div> <div class=verify-button> <button class="btn btn-cancel" type=button ng-click=vm.cancelVerify()>取消</button> <button class="btn btn-primary" type=submit ng-disabled=!vm.bindModal.id>下一步</button> </div> </div> </form> <div class="body-step body-step-second" ng-show="vm.step === \'second\'"> <ul class=verify-way> <div class=choose-way ng-hide="!vm.info.maskedIdcardNumber && !vm.info.maskedMobile">请选择验证方式:</div> <li class=mb24 ng-show=vm.info.maskedMobile> <div class=icon-container> <span class="icon icon-phone-small mr13" ng-click="vm.step = \'verify-phone\'"></span> 通过手机验证码 </div> <a class="btn btn-small btn-primary" ng-click="vm.step = \'verify-phone\'"> 立即验证 </a> </li> <li ng-show=vm.info.maskedIdcardNumber> <div class=icon-container> <span class="icon icon-identify-small mr13 mt5"></span> 通过身份认证信息 </div> <a class="btn btn-small btn-primary" ng-click="vm.step = \'verify-account\'"> 立即验证 </a> </li> <div class=mb24 ng-show="!vm.info.maskedIdcardNumber && !vm.info.maskedMobile">您还没有绑定个人信息</div> </ul> <div class=verify-button> <button class="btn btn-cancel" ng-click=vm.cancelVerify()>取消</button> </div> </div> <div class="body-step-third body-step" ng-show="vm.step === \'verify-phone\'"> <form name=verifyPhoneForm ng-submit=vm.verifyPhone(vm.reset.phoneVerifyCode,vm.reset.VerifyCode) novalidate> <div> <span>手机号码:</span> <span class=phone-number>{{vm.info.maskedMobile}}</span> <button class="btn btn-primary btn-code" ng-show=!vm.reset.isCountShow type=button ng-click=vm.sendBindShopVerifyCode()>点击获取验证码</button> <button class="btn disabled" ng-show=vm.reset.isCountShow> {{vm.reset.count}} s </button> </div> <div class=verify-code> <span>验证码: </span> <input type=text ng-model=vm.reset.phoneVerifyCode /> </div> <div class=verify-picture ng-show=vm.captchCode> <span>图形验证码:</span> <input type=text ng-model=vm.reset.VerifyCode /> <img ng-src="{{vm.captchCode}}" alt=验证码 ng-click=vm.updateCaptcha() /> </div> <div class=verify-button> <button class="btn btn-cancel" type=button ng-click=vm.cancelVerify()>取消</button> <button class="btn btn-primary" type=submit>下一步</button> </div> </form> </div> <div class="body-step-third body-step" ng-show="vm.step === \'verify-account\'"> <form name=verifyAccountForm ng-submit="vm.verifyAccount(vm.reset.identity, vm.reset.bankId, vm.reset.name)" novalidate> <div class=bank-name> <span>银行开户姓名:</span> <input type=text ng-model=vm.reset.name ng-required=true /> </div> <div class=card> <span>身份证号码:</span> <input type=text ng-model=vm.reset.identity ng-required=true /> </div> <div class=bank-number> <span>银行卡号:</span> <input type=text ng-model=vm.reset.bankId ng-required=true /> </div> <div class=verify-button> <button class="btn btn-cancel" type=button ng-click=vm.cancelVerify()>取消</button> <button class="btn btn-primary" type=submit ng-disabled=verifyAccountForm.$invalid> 下一步 </button> </div> </form> </div> <div class="body-step-fourth body-step" ng-show="vm.step === \'success\'"> <img src='+n("IEWi")+' /> <div class=bind-success>绑定店铺成功 <div>现在可以<span ui-sref=app.chainshop.orgmanage>返回</span>查看</div> </div> </div> </div> <div class=verify-footer ng-show="vm.step === \'verify-phone\'"> <div>没收到短信验证码？</div> <div>1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。</div> <div>2、请核实手机是否已欠费停机，或者屏蔽了系统短信。</div> </div> </div> <div class=input-search> <form name=search ng-submit=vm.searchShop()> <input type=text placeholder=搜索 ng-model=vm.search /> <span class=icon-search ng-click=vm.searchShop()></span> </form> </div> <div class=organization-content ng-if=!vm.bindModal.isShow> <ul ng-hide=vm.isSearch> <li ng-repeat="item in vm.shopTrees" ng-include="\'https://shadow.elemecdn.com/faas/melody/tree.shop.html\'"></li> </ul> <ul ng-hide=!vm.isSearch> <li ng-repeat="item in vm.searchResult"> <div class=shop-tree-item> <div class=tree-line> <span class=icon-group_down ng-show=item.visible></span> <span class=item-name> {{item.chainShop.name }} </span> </div> <div class=tree-line-right select-auto-close> <div class=operation>操作</div> <span class=icon-group_down></span> <ul class=operation-selector> <li ng-show="item.chainShop.restaurantUnitType !== \'LEAF\'" ng-click="vm.openModal(\'nameModal\', item)">修改姓名</li> <li ng-show="\n                        item.chainShop.hasChild ?\n                        item.chainShop.childrenType === \'GROUP\' :\n                        (item.chainShop.restaurantUnitType === \'GROUP\' ||\n                         item.chainShop.restaurantUnitType === \'ROOT\')\n                    " ng-click="vm.openModal(\'groupModal\', item)">增加子结构</li> <li ng-show="\n                      item.chainShop.hasChild ?\n                      item.chainShop.childrenType === \'LEAF\' :\n                      (item.chainShop.restaurantUnitType === \'GROUP\' ||\n                       item.chainShop.restaurantUnitType === \'ROOT\')\n                    " ng-click=vm.bindShop(item)>绑定已有店铺</li> <li ng-show="item.chainShop.restaurantUnitType === \'LEAF\'" ui-sref="app.shop.dashboard({restaurantId: item.chainShop.id})">进入店铺</li> <li ui-sref="app.chainshop.orgmanage.manager({Id: item.chainShop.id})">增加管理员</li> <li ng-show="item.chainShop.restaurantUnitType !== \'ROOT\'" ng-click="vm.openModal(\'moveModal\', item)">移动</li> <li ng-show="(!item.chainShop.hasChild) && (item.chainShop.restaurantUnitType !== \'ROOT\')" ng-click="vm.openModal(\'removeModal\', item)">删除</li> </ul> </div> </div> </li> </ul> </div> <m-modal m-title=修改名称 is-show=vm.nameModal.isShow on-close="vm.resetModal(\'nameModal\')" is-light=true> <form name=modifyNameModalForm ng-submit=vm.editName() novalidate> <div class=change-name-container> <div class=change-name-content> <div class=change-name>结构名称</div> <input type=text placeholder=请输入新名称 ng-maxlength=50 ng-model=vm.nameModal.name ng-required=true /> <div class="fs12 color-red warning" ng-show=modifyNameModalForm.$error.maxlength> 最多不超过50个字 </div> </div> <div class=change-name-footer> <button class=cancel-change-name type=button ng-click="vm.resetModal(\'nameModal\')">取消</button> <button class=confirm-change-name type=submit ng-disabled=modifyNameModalForm.$invalid>确定</button> </div> </div> </form> </m-modal> <m-modal m-title=创建结构 is-show=vm.groupModal.isShow on-close="vm.resetModal(\'groupModal\')" is-light=true> <form name=createMiddleModalForm ng-submit="vm.addGroup(vm.groupModal.current, vm.groupModal.name)" novalidate> <div class=change-name-container> <div class=change-name-content> <div class=change-name>结构名称</div> <input type=text placeholder=请输入新名称 ng-maxlength=50 ng-model=vm.groupModal.name ng-required=true /> <div class="fs12 color-red warning" ng-show=createMiddleModalForm.$error.maxlength> 最多不超过50个字 </div> </div> <div class=change-name-footer> <button class=cancel-change-name type=button ng-click="vm.resetModal(\'groupModal\')">取消</button> <button class=confirm-change-name type=submit ng-disabled=createMiddleModalForm.$invalid>确定</button> </div> </div> </form> </m-modal> <div class=move> <m-modal m-title=移动节点 is-show=vm.moveModal.isShow on-close="vm.resetModal(\'moveModal\')" is-light=true> <input type=text placeholder=搜索 class=move-search ng-model=vm.moveModal.search /> <ul> <li ng-repeat="item in vm.moveTree | filter: vm.moveModal.search"> <span class=flex-1 ng-class="{active: item.checked}">{{item.name}}</span> <input type=checkbox name=treeviewCheckbox ng-model=item.checked ng-change=vm.onChange(item)> </li> </ul> <button class=cancel-move ng-click="vm.resetModal(\'moveModal\')">取消</button> <button class=confirm-move ng-click=vm.moveGroup(vm.moveModal.current) ng-disabled=!vm.isSelected>确定</button> </m-modal> </div> <m-modal m-title=确认删除 is-show=vm.removeModal.isShow on-close="vm.resetModal(\'removeModal\')" is-light=true> <form name=removeModalForm ng-submit=vm.removeGroup(vm.removeModal.current) novalidate> <div class=change-name-container> <div class=remove-content> <p>删除{{vm.removeModal.current.chainShop.name}}后，在该机构上的管理员、开放平台授权、连锁店 结算等都将失效。 </p> <p>请输入该结构的名称进行删除</p> <input type=text placeholder=请输入结构名称 ng-model=vm.removeModal.confirm /> </div> <div class="change-name-footer remove-footer"> <button class=cancel-change-name type=button ng-click="vm.resetModal(\'removeModal\')">取消</button> <button class=confirm-change-name ng-disabled="https://shadow.elemecdn.com/faas/melody/vm.removeModal.confirm !== vm.removeModal.current.chainShop.name" type=submit>确定</button> </div> </div> </form> </m-modal> </div> <script type=text/ng-template id=tree.shop.html> <div class="shop-tree-item">\n    \x3c!-- names on the left --\x3e\n    <div class="tree-line"\n         ng-click="vm.openGroup(item)">\n\x3c!--       <span class="icon-group_down" ng-show="item.visible"></span>\n      <img src="'+n("wtr9")+'"\n           class="icon-group_right"\n           ng-show="!item.visible"/> --\x3e\n      <img class="icon-right"\n           src="'+n("wtr9")+'"\n           ng-class="{down: item.visible}"\n           ng-show="item.chainShop.hasChild">\n      <img class="icon-right down"\n           src="'+n("wtr9")+'"\n           ng-show="!item.chainShop.hasChild">\n      <span class="item-name">\n        <img src="'+n("JOOO")+'"\n             class="item-name-location"\n             ng-show="item.chainShop.restaurantUnitType === \'GROUP\'"/>\n        <img src="'+n("eNfG")+'"\n             class="item-name-shop"\n             ng-show="item.chainShop.restaurantUnitType === \'LEAF\'"/> {{item.chainShop.name }} </span>\n    </div>\n    \x3c!-- content on the right --\x3e\n    <div class="tree-line-right"\n         ng-click="vm.openSelector(item, $event)"\n         select-auto-close>\n      <div class="operation">操作</div>\n      <span class="icon-group_down" ></span>\n      <ul class="operation-selector">\n        <li ng-show="item.chainShop.restaurantUnitType !== \'LEAF\'"\n            ng-click="vm.openModal(\'nameModal\', item)">修改姓名</li>\n        <li ng-show="\n                item.chainShop.hasChild ?\n                item.chainShop.childrenType === \'GROUP\' :\n                (item.chainShop\n                     .restaurantUnitType === \'GROUP\' ||\n                 item.chainShop\n                     .restaurantUnitType === \'ROOT\')\n            "\n            ng-click="vm.openModal(\'groupModal\', item)">增加子结构</li>\n        <li ng-show="\n              item.chainShop.hasChild ?\n              item.chainShop.childrenType === \'LEAF\' :\n              (item.chainShop\n                   .restaurantUnitType === \'GROUP\' ||\n               item.chainShop\n                   .restaurantUnitType === \'ROOT\')\n            "\n            ng-click="vm.bindShop(item)">绑定已有店铺</li>\n        <li ng-show="item.chainShop.restaurantUnitType === \'LEAF\'"\n            ui-sref="app.shop.dashboard({restaurantId: item.chainShop.id})">进入店铺</li>\n        <li ng-show="!item.chainShop.hasAdmin"\n            ui-sref="app.chainshop.orgmanage.manager({id: item.chainShop.id})">增加管理员</li>\n        <li ng-show="item.chainShop.restaurantUnitType !== \'ROOT\'"\n            ng-click="vm.openModal(\'moveModal\', item)">移动</li>\n        <li ng-show="(!item.chainShop.hasChild) && (item.chainShop.restaurantUnitType !== \'ROOT\')"\n            ng-click="vm.openModal(\'removeModal\', item)">删除</li>\n      </ul>\n    </div>\n  </div>\n\n  \x3c!-- recursion --\x3e\n  <ul class="shop-tree-lists"\n      ng-show="item.visible">\n    <li ng-repeat="item in item.childList"\n        ng-include="\'https://shadow.elemecdn.com/faas/melody/tree.shop.html\'">\n    </li>\n  </ul> <\/script> '},MKxV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("f4CT"),g=n("QAIe"),v=n.n(g);let y=function(e){function t(e,n){o()(this,t);var i=p()(this,(t.__proto__||a()(t)).call(this));return i.beat=e,i.Handle=n,i}return t.$inject=["beat","Handle"],d()(t,e),c()(t,[{key:"getNotices",value:function(e){return this.beat.rank.app.invoke("notice.getNotices",{restaurantId:e}).then(e=>this.dispatch({actionType:f.a.PAY_GET_NOTICE,result:e}))}}]),t}(v.a.ActionCreator);m.a.module("app").service("PayNoticeAction",y)},MMVl:function(e,t,n){"use strict";var i,a=n("z2Ca");n.n(a);"testing"!==(i="faas_production"===window.$ENV?"production":(localStorage.env||window.$ENV||"alpha").split("_").pop())&&"development"!==i||(i="alpha");var s=n("xkjM")("./"+i).default;t.a=s},Mofd:function(e,t,n){"use strict";e.exports.controller=n("D+9K").default,e.exports.template=n("8wJo")},MwrZ:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},MxEY:function(e,t){e.exports='<os-container os-src="{{chainShopBillDetailUrl}}"></os-container> '},Mylv:function(e,t){e.exports="data:image/png;base64,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"},"N/tJ":function(e,t,n){"use strict";n("ivkS")},N0Qf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.appstore",{url:"/appstore/:path",views:{"wrapper@app":n("CQde")}}).state("app.chainshop.appstore",{url:"/appstore/:path",views:{"wrapper@app":n("CQde")}}).state("app.shop.appstore-mine",{url:"/appstore-mine/:path",views:{"wrapper@app":n("CQde")}}).state("app.chainshop.appstore-mine",{url:"/appstore-mine/:path",views:{"wrapper@app":n("CQde")}})}])},N9rI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("https://shadow.elemecdn.com/faas/melody/app.shop.pack",{url:"/pack?url&page",reloadOnSearch:!1,views:{"wrapper@app":n("tcuR")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.pack",{url:"/pack?url&state",reloadOnSearch:!1,views:{"wrapper@app":n("tcuR")}})}])},NIhd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){e.state("https://shadow.elemecdn.com/faas/melody/app.shop",{url:"/shop/:restaurantId",redirect:s,resolve:{ResourceInit:i,ShopStateInit:a},views:{"navbar@app":h,"search@app":m,"switcher@app":f,"global-container":g}})}function i(e,t,n,i,a,s,o,r){function c(e){switch(console.error(e),o.show(e.message,!0),e.code){case"UNEXPECTED_EXCEPTION":case"CONNECTION_ERROR":setTimeout(function(){window.location.reload()},15e3)}}if(t.restaurantId){const n=Number(t.restaurantId);return e.disable(),e.enable(n),i.fetchRestaurantView(n).then(()=>{s.identifyRestaurant(p.a.getCurrentRestaurant());if(!u.a.isManager())return;if(l()(p.a.getRestaurantTree(),"length"))return;const e=u.a.getChainKeeper().restaurantUnitIds.slice(0,1);return i.fetchRestaurantTree(e)}).catch(c)}}function a(t,n,i){const a=Number(t.restaurantId),s=l()(e,"GLOBAL_OPENAPI_SERVER.setCurrentShopId");return s&&s(a),e.localStorage.setItem("currentShopId",a),n.setShopId(a),r.a.all([n.queryGrayInfo()]).catch(()=>{})}function s(){const e=p.a.getKfcUserType();return"comment"===e?{state:".comments"}:"shop"===e?{state:".settings"}:{state:".dashboard"}}var o=n("//Fk"),r=n.n(o),c=n("A7Dr"),l=n.n(c),p=n("RG6k"),u=n("t4A1");a.$inject=["$stateParams","OrderAction","ResourceInit"],t.$inject=["$stateProvider"];var d=n(0),h=n("8smz"),m=n("br82"),f=n("Mofd"),g=n("7W3J");d.module("app").config(t),i.$inject=["XShard","$stateParams","ArenaAction","RestaurantAction","Restaurant","analytics","Alert","ResourceInit"],i.$inject=["XShard","$stateParams","ArenaAction","RestaurantAction","Restaurant","analytics","Alert","ResourceInit"],a.$inject=["$stateParams","OrderAction","ResourceInit"]}.call(t,n("DuR2"))},NNRy:function(e,t){e.exports='<div class=order-cards> <order-card ng-repeat="order in processedOrders track by order.id + order.status" order=order restaurant=getRestaurant(order.restaurantId) on-invalidate-order=invalidateOrder is-multi=true deliverable=true on-copy=copyOrder on-print=printOrder></order-card> <div m-s-page offset=5 total=pageTotal index=pageIndex></div> <p ng-show="processedOrders.length === 0" class=no-order>暂时没有已处理订单</p> </div>'},NPQV:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},NPRn:function(e,t,n){e.exports={tabs:{template:n("wUSg"),controller:n("VxYB").default,controllerAs:"vm"},organization:{template:n("MFP3"),controller:n("b7Uk").default,controllerAs:"vm"},manager:{template:n("eF6W"),controller:n("2sfz").default,controllerAs:"vm"},role:{template:n("3dkY"),controller:n("k1py").default,controllerAs:"vm"}}},NSgz:function(e,t,n){"use strict";function i(e,t,n){"ngInject";const i=t.fuzzyPhrase;this.src=`${n.melodyOrderUrl}/app/searchings/${i}?shopId=${t.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper(),window.perf&&window.perf.sendEvent({name:"确定搜索订单",id:"S1nxyz8QW"}),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{"/app/processing"===t?e.go("app.shop.order.processing"):"/app/query"===t&&e.go("app.shop.order.querying")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config"]},NWd1:function(e,t,n){t.template=n("+341"),t.controller=n("Q2ZQ").default,t.controllerAs="vm"},Nc6B:function(e,t,n){"use strict";function i(e,t,n){e.chainShopBillUrl=n.chainShopBillUrl,a.a.schedule(e.chainShopBillUrl),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","beat","config"]},NpL7:function(e,t,n){"use strict";function i(){return function(e,t="YYYY-MM-DD HH:mm:ss"){return s()(e,t)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Eoz/"),s=n.n(a);n(0).module("app").filter("datetime",i)},OGdB:function(e,t){},ORXn:function(e,t){e.exports='<div class=dashboard-activity> <dashboard-box-header title=活动 nav-title=平台活动 nav-state=app.shop.activity.plantform ubt-id=2965></dashboard-box-header> <div class=dashboard-box-content> <div> <span>已报名</span> <span>可报名</span> </div> <div> <span class=count ng-class="{zero: !$ctrl.applied}" ui-sref=app.shop.activity.plantform ubt-click=2966>{{$ctrl.applied}}</span> <span class=count ng-class="{zero: !$ctrl.waitBegin}" ui-sref=app.shop.activity.plantform ubt-click=2968>{{$ctrl.canApply}}</span> </div> <div> <span class=tip>进行中({{$ctrl.activited}})</span> <span></span> </div> </div> </div> '},OxYK:function(e,t,n){"use strict";function i(e,t,n){"ngInject";this.src=`${n.melodyBaseUrl}/login-problem`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config"]},P74o:function(e,t,n){e.exports.controller=n("ngdq").default,e.exports.template=n("wPqq")},PEHf:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/customer/comment?state=${t.state}&shopId=${t.restaurantId}`;var o=s.a.schedule(this.src);s.a.watchSrc(i,o.iframe),s.a.hideAppWrapper(),a.container.on("ugcChange",t=>{const n=encodeURIComponent(t);e.go(".",{state:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config","$scope"]},PKdr:function(e,t,n){"use strict";n("Za0U")},PLTV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("NGSm"),o=(n.n(s),n("uoCA")),r=n("KcnZ"),c=n("ilQr"),l=n("t4A1"),p=n("QkKs"),u=n("Reue"),d=n("mLeL"),h=n("kZ/N"),m=n("EFJn"),f=n("Pbqc"),g=n("uJ7U"),v=n("zcUp"),y=n("UovG"),w=n("74JD"),I=n("5LZX"),A=n("R8dz"),b=n("VUfd"),S=n("+9Bh"),C=n("3qgy"),k=n("fvm2"),O=n("LEHW"),T=n("DKPC"),D=n("kICC"),N=n("AqLQ"),E=n("W4z3"),R=n("TS32"),M=n("ZEp4"),P=n("LNAS"),L=n("fECv");a.a.module("app").config(P.a).service("NavNoticeAction",p.a).service("XShard",L.a).directive("ngAutodisable",d.a).directive("osContainer",h.a).directive("dynamicMaxvalue",m.a).directive("mlDropdown",f.a).directive("mlDropdownToggle",f.b).directive("mlDropdownMenu",f.c).component("shopOperatingStatus",g.a).component("printerState",v.a).component("sPState",y.a).component("shopSwitcher",w.a).component("account",I.a).component("accountSettings",A.a).component("pagination",b.a).component("treeViewSelector",S.a).component("noticeBell",C.a).component("toolbarNotice",k.a).component("usernameLoginForm",O.a).component("mobileLoginForm",T.a).component("loginTopbar",D.a).component("agreementModal",N.a).component("noticeModal",E.a).filter("shopState",R.a).filter("noticeNum",M.a).run(["beat",function(e){s.container.init({RestaurantStore:o.a,ArenaStore:r.a,NavNoticeStore:u.a,NoticeStore:c.a,ProfileStore:l.a}),s.container.on("LOGIN_REQUIRED",function(t){e.emit("error",{code:t.code,type:t.type})})}]).run(["ksid","NoticeAction",function(e,t){let n;n="faas_production"===window.$ENV?"production":(localStorage.env||window.$ENV||"alpha").split("_").pop(),"testing"!==n&&"development"!==n||(n="alpha"),e&&(t.init(n,e),t.getNoticeList({limit:5,offset:0,tab:"ALL",readStat:"ALL"}),t.pollingNotices(),t.getNoticeNum())}])},PNBs:function(e,t,n){"use strict";function i(){function e(e,t,n){const i=t.find(".nav-title")[0],a=t.find(".nav-children"),s=t.find(".nav-list");t.on("click",e=>{i.contains(e.target)&&(s.hasClass("unfold")?s.removeClass("unfold"):(r()("html").find(".nav-list.unfold").removeClass("unfold"),s.addClass("unfold")))}),e.$on("$stateChangeSuccess",()=>{setTimeout(()=>{const e=a.find(".nav-item.active");e.length?(s.addClass("active"),window.innerWidth>=1280&&s.addClass("unfold")):(s.removeClass("unfold"),s.removeClass("active"))},0)}),e.$on("navClose",()=>{s.hasClass("unfold")&&s.removeClass("unfold")})}return{link:e,scope:{icon:"@",name:"@",notice:"="},transclude:!0,template:n("tS3V")}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),o=n(1),r=n.n(o);s.a.module("app").directive("navList",i)},PX0p:function(e,t,n){"use strict";n("V18I")},Pata:function(e,t,n){"use strict";function i(e,t,n,i,o){"ngInject";function r(n){t.go(".",{url:encodeURIComponent(n)}),e.$apply()}const c=decodeURIComponent(n.url),l=decodeURIComponent(n.state);o.search("state",null);const p=t.$current.name.replace(/\./g,"/");this.src="undefined"===c?`${i.melodyPackUrl}/${p}`:c,"undefined"!==l&&(this.src=this.src+"/"+l.replace(/\./g,"/")),n.params&&(this.src=this.src+"?"+n.params),"app/shop/pack"===p&&(this.src=`${i.melodyPackUrl}/${p}/`),this.src=this.src&&this.src.includes("chainshop")?this.src:`${this.src}?shopId=${n.restaurantId}`;var u=s.a.schedule(this.src);s.a.watchSrc(e,u.iframe),s.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/url.sync",r),e.$on("$destroy",()=>{a.container.off("https://shadow.elemecdn.com/faas/melody/url.sync",r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$scope","$state","$stateParams","config","$location"]},Pavo:function(e,t){e.exports='<div class=tree-view-selector ng-class="[$ctrl.direction, {open: $ctrl.showTreeView}]"> <div class=toggle-tree-view ng-click=$ctrl.toggle($event)> <span class=shop-name>{{$ctrl.selectedNode.name}}</span> <span class=icon ng-class="{\'icon-group_down\': $ctrl.light, \'icon-arrow-down\': !$ctrl.light}"></span> </div> <div class=tree-view-list ng-show=$ctrl.showTreeView> <span class=tree-view-list-arrow></span> <div class=tvl> <div class=tree-node ng-class="{active: $ctrl.selectedNode.id === $ctrl.node.id}" ng-click=$ctrl.selectAll() ng-mouseenter=$ctrl.enter($ctrl.node) ng-mouseleave=$ctrl.leave($ctrl.node)> <span>全部</span> </div> <div class=tree-node ng-class="{\n          active: $ctrl.effectList.indexOf(node.id) !== -1,\n          enter: node.$enter\n        }" ng-repeat="https://shadow.elemecdn.com/faas/melody/node in $ctrl.node.childList track by node.id" ng-click="$ctrl.select($event, node)" ng-mouseenter=$ctrl.enter(node) ng-mouseleave=$ctrl.leave(node)> <span>{{node.name}}</span> <span class="icon icon-keyboard-right" ng-show=node.childList.length></span> <div class=tree-node-children ng-show=node.childList.length ng-include="\'https://shadow.elemecdn.com/faas/melody/tree-selector.html\'"></div> </div> </div> </div> </div>'},Pbqc:function(e,t,n){"use strict";function i(e,t,n,i=!1){return e.addEventListener(t,n,i),function(){e.removeEventListener(t,n,i)}}function a(){function e(e,t,n,i){var a=n.direction||"left",s=n.newStyle||"";t.addClass("ml-dropdown"),t.addClass(a),t.addClass(s),i.dropdown=t,i.init()}return{link:e,restrict:"A",controller:u}}function s(){function e(e,t,n,a){a.dropdownToggle=t,t.addClass("ml-dropdown-toggle");let s=i(t[0],"click",e=>{e.preventDefault();e.stopPropagation();a.toggle()});e.$on("$destroy",s)}return{link:e,restrict:"A",require:"^ml-dropdown"}}function o(){function e(e,t,n,i){i.dropdownMenu=t,t.addClass("ml-dropdown-menu")}return{link:e,restrict:"A",require:"^ml-dropdown"}}t.a=a,t.b=s,t.c=o;var r=n("Zrlr"),c=n.n(r),l=n("wxAW"),p=n.n(l);let u=function(){function e(){c()(this,e)}return p()(e,[{key:"init",value:function(){this.open=!1}},{key:"toggle",value:function(){this.open=!this.open,this.open?this.binder=i(document,"click",()=>{this.toggle()}):"function"==typeof this.binder&&(this.binder(),this.binder=(()=>{})),this.render()}},{key:"render",value:function(){this.dropdown.toggleClass("open"),this.dropdownMenu.toggle(),"fixed"===this.dropdownMenu.attr("width")&&this.dropdownMenu.css({width:this.dropdownToggle.outerWidth()+"px"})}}]),e}()},PdWR:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},PhH3:function(e,t,n){"use strict";function i(e,t){function n(n,i,a){function s(e){if(e){l=!0,i.addClass("disabled"),i.text(e+"秒后再试");var t=setInterval(()=>{e>1?(e--,i.text(e+"秒后再试")):(clearInterval(t),l=!1,i.removeClass("disabled"),i.text(p))},1e3)}}var r=Number(a.interval)||60,c="true"===a.byVoice,l=!1,p=i.text();i.on("click",i=>{i.preventDefault();if(l)return;var p=a.mobile;if(!o.test(p))return t.show("请输入正确的手机号码",!0),void n.$apply();e.app.invoke("secure.login.sendVerifyCode",{mobile:p,byVoice:c}).then(()=>{s(r)}).catch(e=>{t.show(e.message,!0)})})}return{link:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a);i.$inject=["beat","Alert"];const o=/^[+86]?1[3|4|5|7|8]\d{9}$/;s.a.module("app").directive("sendVerifyCode",i)},Py4N:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";const r=t.state;let c=s.a[i.current.name];this.src=n[c],t.state&&(this.src=this.src+"/"+r),t.params&&(this.src=this.src+"?"+t.params);const l=i.current.name.includes("chainshop");this.src=l?this.src:t.params?`${this.src}&shopId=${t.restaurantId}`:`${this.src}?shopId=${t.restaurantId}`,a.container.broadcast("biz-strategy:route-switch");var p=o.a.schedule(this.src);o.a.watchSrc(e,p.iframe),o.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",e=>{i.go(".",{state:e.state,params:e.params})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("Zr5S")),o=n("CfXW");i.$inject=["$scope","$stateParams","config","$state"]},Q2E1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.guarantee",{url:"/guarantee",reloadOnSearch:!1,views:{"wrapper@app":n("Q7Sd")}})}])},Q2ZQ:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";function o(){const e=decodeURIComponent(n.path);if(-1!==e.indexOf("imageUrl"))return`${i.melodyShopUrl}/#/app/shop/logo/upload?`+e.substring(e.indexOf("&")+1);const t=n.action||"";let a=`${i.melodyShopUrl}/#/app/shop/${e}`;switch(e){case"index":case"undefined":a=`${i.melodyShopUrl}/#/app/shop${t?"?action="+t:""}`;break;case"confirm-cooperation":case"confirm-meituan-time":n.params&&(a+=`?params=${n.params}`);break;case"userinfo":a=`${i.melodyBaseUrl}/userinfo`;break;case"identity":a=`${i.melodyBaseUrl}/shop-identity`}return a}function r(e){var t=e.includes("?")?`${e}&shopId=${n.restaurantId}`:`${e}?shopId=${n.restaurantId}`;s.a.schedule(t),s.a.hideAppWrapper()}this.src=o(),r(this.src),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",e=>{const n=encodeURIComponent(e);t.go(".",{path:n})}),a.container.on("shopStateChange",e=>{t.go(".",{path:e});this.src=o();r(this.src)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$scope","$state","$stateParams","config"]},Q7Sd:function(e,t,n){t.template=n("BoTH"),t.controller=n("HNU3").default,t.controllerAs="$ctrl"},QA6H:function(e,t,n){e.exports.controller=n("Tmiv").default,e.exports.template=n("cqo2")},QBuL:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("a+F3");let m=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"_$onInit",value:function(){return this.db.getFeedbackData(this.rid).then(e=>{this.negative=e.noReplyNegativeCount;this.comment=e.noReplyCount})}}]),t}(h.a);t.a={template:n("r+5W"),controller:m}},QCbo:function(e,t,n){"use strict";t.a=["$stateProvider",e=>{e.state("app.shop.dashboard",{url:"/dashboard",reloadOnSearch:!0,resolve:{},views:{"wrapper@app":{template:n("fooD")}}})}]},"QD+Y":function(e,t,n){"use strict";function i(){return g}function a(){return v}function s(e={},t={}){const n=e.daySn,i=e.id,a=e.paymentStatus,s=e.consigneeName,o=e.consigneeAddress,c=e.remark,p=e.invoiceTitle,d=e.payAmount,m=e.phoneAlertDescription,g=e.statusForPrint,v=t.name,y=f()(1e3*e.activeTime).format("MM-DD HH:mm"),w=e.bookedTime?f()(1e3*e.bookedTime).format("MM-DD HH:mm"):null,I=e.groups.filter(e=>"normal"===e.type||"discount"===e.type),A=e.consigneePhones.map(e=>11===e.length?[e.slice(0,3),e.slice(3,7),e.slice(7,11)].join("-"):e);if(e.activities||e.hongbao||e.deliveryFee||e.deliveryFeeTotal){e.groups=e.groups||[];let t=h()(e.groups,e=>"extra"===e.type);t||e.groups.push({name:"其他",type:"extra",items:[]})}var b=l()(h()(e.groups,e=>"extra"===e.type)),S=u()(b,"items");if(e.activities){let t=e.activities.map(e=>{var t=e.price||e.amount;e.total=-1*Math.abs(t);return e});S=S.concat(t)}e.hongbao&&S.push({name:"使用红包",total:-1*Math.abs(e.hongbao)}),e.vipDeliveryFeeDiscount&&S.push({name:"会员减免配送费",total:-1*Math.abs(e.vipDeliveryFeeDiscount)}),(e.deliveryFee||e.deliveryFeeTotal)&&S.push({name:"配送费",total:Math.abs(e.deliveryFee||e.deliveryFeeTotal)});const C=u()(S,"length"),k={daySn:n,id:i,paymentStatus:a,consigneeName:s,consigneePhones:A,consigneeAddress:o,remark:c,invoiceTitle:p,payAmount:d,restaurantName:v,activeTime:y,bookedTime:w,groups:I,others:S,othersShow:C,phoneAlertDescription:m,statusForPrint:g};return r()(k)}var o=n("mvHQ"),r=n.n(o),c=n("BXMS"),l=n.n(c),p=n("A7Dr"),u=n.n(p),d=n("o5Mu"),h=n.n(d),m=n("PJh5"),f=n.n(m);let g=`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text>预订{{ bookedTime }}送达</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text>发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }} {% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text>应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text font="tall">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="tall">{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="tall">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    <barcode style="normal" value="{{ id }}" />
    <line />
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`,v=`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="tall">预订</text><text font="big">{{ bookedTime }}</text><text font="tall">送达</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text font="big">发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" space="4" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7" font="tall"> {{ total }}</text>
        </line>
        {% if showBarCode %}
          <barcode style="tall" value="{{ barCode }}" />
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text font="big">已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text font="big">应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7" font="big">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text font="big">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="big">{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="big">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    <barcode style="tall" value="{{ id }}" />
    <line />
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a={getSmallTpl:i,getNormalTpl:a,getPrintData:s}},QJBl:function(e,t){e.exports=' <div class=forgetpassword-bg> <div class=forgetpassword-container> <div class=forgetpassword-top> <p class=forget-title> 找回密码 <a class=back ui-sref=app> {{backTxt}} </a> </p> <ul> <li class=active> <span class=serialNum>1</span> 填写账号名 </li> <li ng-class="{active : step === \'first\' || step === \'second\' || step === \'last\'}"> <span class=serialNum>2</span> 验证身份 </li> <li ng-class="{active : step === \'second\' || step === \'last\'}"> <span class=serialNum>3</span> 设置新密码 </li> <li ng-class="{active : step === \'last\'}"> <span class=serialNum>4</span> 完成 </li> </ul> </div> <div class=forgetpassword-content> <div class=forgetpassword-inputarea ng-show="step === \'begin\'"> <span class=title>请输入您要找回登录密码的账号名</span> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 账号名： </div> <div class=forgetpassword-input-text> <input type=input ng-model=reset.username /> </div> </div> <div class="forgetpassword-input tips"> <div class=forgetpassword-input-title></div> <div class="forgetpassword-input-text tip"> 忘记账户名？请联系市场经理，或联系客服021-80203777 </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 图形验证码： </div> <div class=forgetpassword-input-text> <input type=input ng-model=reset.usernameCaptcha placeholder=请输入右侧验证码 /> </div> <div class=forgetpassword-input-button> <img ng-src="{{resetToken.captchaImageB64}}" alt=验证码 ng-click=vm.updateCaptcha()> </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title></div> <div class=forgetpassword-input-text> <button class="btn btn-primary" ng-autodisable ng-click=getkeeperByUsername() ng-disabled="!reset.username || !reset.usernameCaptcha" type=button> 下一步 </button> </div> <div class=forgetpassword-input-button></div> </div> </div> <div class=forgetpassword-inputarea ng-show="step === \'first\'"> <p class=forgetpassword-tip ng-show=!resetKeeper.maskedMobile> 您未绑定手机号码，无法通过身份验证找回密码，请联系市场经理或者联系客服（021-80203777）进行密码找回。 </p> <div class=title ng-show="resetKeeper.maskedMobile || (resetKeeper.maskedIdCardNumber && false)"> 您正在为 <span class=color-red>＃{{resetKeeper.username}}＃</span> 找回密码，请选择验证方式 </div> <ul class=forgetpassword-way ng-show="resetKeeper.maskedMobile || (resetKeeper.maskedIdCardNumber && false)"> <li class="mr20 active" ng-show=resetKeeper.maskedMobile ng-click="way = \'phone\'; step=\'first\'"> <span class="icon icon-phone-small mr10"></span> <div class=column> <span class=choice>通过手机验证码</span> <span class=choice-des>需要您绑定的手机可接收短信</span> </div> <div class=select-icon> <span>✓</span> </div> </li> <li ng-click="way = \'identify\'; step = \'first\'" ng-show="resetKeeper.maskedIdCardNumber && !resetKeeper.maskedMobile"> <span class="icon icon-identify-small mr10"></span> <div class=column> <span class=choice>通过银行卡验证</span> <span class=choice-des>需要您绑定的银行卡和身份证信息</span> </div> <div class=select-icon> <span>✓</span> </div> </li> </ul> </div> <div class=forgetpassword-inputarea ng-show="step === \'first\'"> <form ng-show="way === \'phone\' && resetKeeper.maskedMobile" class=resetpassword-step-form> <p>请验证您的手机号</p> <div ng-show="way === \'phone\'" class=forgetpassword-input> <div class=forgetpassword-input-title> 手机号： </div> <div class=forgetpassword-input-text> {{resetKeeper.maskedMobile}} </div> <div class=forgetpassword-input-button> <a class="btn btn-primary btn-small" ng-show="reset.count === 60" ng-click=sendVerifyCode(false)> 获取验证码 </a> <button class="btn disabled btn-small" ng-show="reset.count < 60"> {{reset.count}} s </button> </div> </div> <div class="forgetpassword-input tips"> <div class=forgetpassword-input-title></div> <div class="forgetpassword-input-text tip" ng-show="reset.voiceCount === 60"> 获取不到短信验证码？试试 <a class=color-blue ng-click=sendVerifyCode(true)>语音验证码</a> </div> <div class="forgetpassword-input-text tip" ng-show="reset.voiceCount < 60"> 获取不到短信验证码? <span>{{reset.voiceCount}} s后重新发送 </span> </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 验证码：</div> <div class=forgetpassword-input-text> <input type=input ng-model=reset.verifyCode /> </div> <div class=forgetpassword-input-button></div> </div> <div class=forgetpassword-input ng-show=reset.verifyCodeImg> <div class=forgetpassword-input-title>图形验证码：</div> <div class="forgetpassword-input-text row"> <input type=input class=verifyCodeCaptcha ng-model=reset.verifyCodeCaptcha /> <img ng-src="{{reset.verifyCodeImg}}" ng-click=refreshCaptcha() alt=验证码 /> </div> <div class=forgetpassword-input-button></div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title></div> <div class=forgetpassword-input-text> <button class="btn btn-primary" ng-disabled="!reset.verifyCode || (reset.verifyCodeImg && !reset.verifyCodeCaptcha)" ng-autodisable ng-click=checkVerifyCode() type=button> 下一步 </button> </div> <div class=forgetpassword-input-button></div> </div> </form> <form name=identifyForm ng-show="way === \'identify\' && resetKeeper.maskedIdCardNumber" class=resetpassword-step-form> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 身份证号码： </div> <div class=forgetpassword-input-text> <input type=text required ng-model=reset.identify /> </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 银行卡开户人姓名： </div> <div class=forgetpassword-input-text> <input type=text required ng-model=reset.name /> </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 银行卡号： </div> <div class=forgetpassword-input-text> <input type=text required ng-model=reset.bankId /> </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title></div> <div class=forgetpassword-input-text> <button class="btn btn-primary" ng-disabled=!identifyForm.$valid ng-autodisable ng-click=checkIdentityInfo() type=button> 下一步 </button> </div> </div> </form> </div> <div class=forgetpassword-inputarea ng-show="step === \'second\'"> <span class=title>请设置您的新密码</span> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 新密码： </div> <div class=forgetpassword-input-text> <input type=password ng-model=reset.newPassword /> </div> <div class=forgetpassword-input-button></div> </div> <div class="forgetpassword-input tips"> <div class=forgetpassword-input-title></div> <div class="forgetpassword-input-text tip"> 密码需包含数字和字母，且长度超过8位以上 </div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title> 确认新密码： </div> <div class=forgetpassword-input-text> <input type=password ng-model=reset.newPasswordRepeat /> </div> <div class=forgetpassword-input-button></div> </div> <div class=forgetpassword-input> <div class=forgetpassword-input-title></div> <div class=forgetpassword-input-text> <button class="btn btn-primary" ng-disabled="!reset.newPassword || !reset.newPasswordRepeat" ng-autodisable ng-click=setNewPassword() type=button> 下一步 </button> </div> <div class=forgetpassword-input-button></div> </div> </div> <div class=forgetpassword-step-last ng-show="step === \'last\'"> <p>重置成功，请牢记!<br/> </p><p> <span class=color-red>{{countDownLoginNum}}</span> 秒后自动跳转至登录界面 </p> <a ui-sref=login class="btn btn-primary btn-small pl15 pr15">立即登录</a> <p></p> </div> <div class=forgetpassword-bottom ng-show=false> <p>没收到短信验证码？ <br/> 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。 <br/> 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。 </p> </div> </div> </div> </div> <div class=alert-container ng-class="{\'alert-show\': Alert.isShow}"> <div class=alert-content ng-class="{\'warn\': Alert.isWarn}"> {{Alert.content}} </div> </div>'},QRsZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAsCAYAAAD1s+ECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAArhJREFUeNrsmVuITVEYx7fjOEqUMaPJpXGL4UmJ3B7k0uRFIk1yH0l5GZ6mCfFAnpRcypQipkmh1BQhNQ9uhZcZuY5Sxm00hgwpFP+v89/1tSxj9p6ZtfbJ/tev1t7nrHX+e69vfedbreyaDVsDz1oAKsEcMBqUgg7QCppAA3hs65j1aHo2OAZmWj4bSeaBneAi2A5e6S9lPBnfAW7+xbipAWAlaAZLfJuvBYfUrP8EZ8ByMB6MAFPBRnBd9ZP7l8AiM2yKwTLGW1+owZxiqgIcUNctYLUlpj+Cp3yopaAelIAcuACmgzYxPwNc4wP0lW5ZzMsP1zEMRHfBYvDlH2NdAfMZZrIOijhzqzJcNMUOwmU9mMB2l/x4D4yHesb+oWQNTMsai+YDaAQ/emn0neXeWtWWN9cWccyrjJAKzt46MT9IfUHi634/vPUcpz5UfcxxTtG8aKGZbVr7KWQm8gFEb8DzmOPcUe3JrlJlkRGacfVJtUtcme9S7d4kh+F6TFfmX4JfbJcyZ8dRuWq/cGX+M3jA9kCwIuY4lTr+XZYH51V7Fxgcsf8kSY/q+pxL83Uq9seBIxH6DgFn1QNLOm9yab6DbzyUbCRO9mAGRrFAm6UKuWpZQ66ryqMs2kJVsSjbYslCsjHZDR6Buep+dZjvfWxGNhvlgtQ7JxhWb0E7C7Ayo59kq73guM+d1HcuvHtgPxiqstBYYku128DlJOykRIeZQfaAh5bPJbZv0HS5adz3Hlb0Huwjw8AY/ot+Zf3zrbvOvs2bJcSTKB0yQQGroM1nE+6vjGlT9NrcoSX9zdeyFBA2pTGfmk/Np+ZT86n51Hxq/n8yn7QqMxelJK4BB7l/9K0pQf6QrVvznUH+pC00X5PQKGm3hc3pAghvOR1stJkPz0U7E2hawvd2kD/K+eNQ4rcAAwAjjnzQxjm80wAAAABJRU5ErkJggg=="},QYHD:function(e,t,n){"use strict";e.exports=function(){}},QcoF:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${i.melodyDecorateUrl}?shopId=${n.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(e,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},QgF1:function(e,t,n){"use strict";function i(e){"ngInject";e.state("app.chainshop.orgmanage",{url:"/orgmanage",redirect:".organization",resolve:{isLoad:["$q","$ocLazyLoad","$injector",(e,t,i)=>{return e(e=>{n.e(0).then((()=>{const i=n("Prqj").default.name;t.load({name:i});e(i)}).bind(null,n)).catch(n.oe)})}],getUnitType:["isLoad","RoleAction","ResourceInit",(e,t,n)=>{var i=o.a.getChainRestaurantId();return t.getCurrentShopUnitType(i).catch(()=>{})}]},views:{"tabs@app":r.tabs}}).state("app.chainshop.orgmanage.organization",{url:"/organization",resolve:{RestaurantInit:["ResourceInit","OrgmanageAction","isLoad",function(e,t,n){var i=o.a.getChainRestaurantId();return t.getShopRoot(i,"CHAIN")}]},views:{"wrapper@app":r.organization}}).state("app.chainshop.orgmanage.manager",{url:"/manager/:id",views:{"wrapper@app":r.manager},resolve:{RestaurantInit:["ResourceInit","OrgmanageAction","RoleAction","Alert","isLoad",function(e,t,n,i,a){var r=o.a.getChainRestaurantId();return s.a.all([t.getShopRoot(r,"CHAIN"),n.getKeeper().then(e=>n.getRolesByKeeperId(r,e.id).catch(e=>{i.show(e.message,!0)})).catch(e=>{i.show(e.message,!0)})])}]}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.orgmanage.role",{url:"/role",views:{"wrapper@app":r.role}})}t.a=i;var a=n("//Fk"),s=n.n(a),o=n("uoCA");i.$inject=["$stateProvider"];var r=n("tK8f")},"Qis/":function(e,t,n){"use strict";function i(e){e.state("app.shop.billDetail",{url:"/billdetail?url",views:{"wrapper@app":s},data:{pageId:"365"}}).state("app.shop.afpBillDetail",{url:"/afpbilldetail?order_id",views:{"wrapper@app":o}})}i.$inject=["$stateProvider"];var a=n(0),s=n("FQIM"),o=n("vjNt");a.module("app").config(i)},QkKs:function(e,t,n){"use strict";function i(e){return JSON.parse(window.localStorage[e]||"{}")}function a(e,t){window.localStorage[e]=o()(t)}var s=n("mvHQ"),o=n.n(s),r=n("Zx67"),c=n.n(r),l=n("Zrlr"),p=n.n(l),u=n("wxAW"),d=n.n(u),h=n("zwoO"),m=n.n(h),f=n("Pf15"),g=n.n(f),v=n("A7Dr"),y=n.n(v),w=n("QAIe"),I=n.n(w);let A=function(e){function t(e){p()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this));return n.shopapi=e.shop.app.invoke,n.rankapi=e.rank.app.invoke,n.ugcapi=e.ugc.app.invoke,n.packsapi=e.packs.app.invoke,n}return g()(t,e),d()(t,[{key:"fetchCommentInfo",value:function(e){return this.ugcapi("shopRating.countNewShopRating",{shopId:e,isChainShop:!1}).then(e=>{this.dispatch({result:e,actionType:"FETCH_COMMENT_INFO"});return e})}},{key:"fetchChainCommentInfo",value:function(){return this.ugcapi("shopRating.countNewShopRating",{shopId:null,isChainShop:!0}).then(e=>{this.dispatch({result:e,actionType:"FETCH_CHAIN_COMMENT_INFO"});return e})}},{key:"isISVInGray",value:function(e){return this.ugcapi("taobaoISV.getABTestingSwitch",{shopId:e}).then(e=>{this.dispatch({result:e,actionType:"ISV_GET_GRAYINFORMATION"});return e})}},{key:"getISVUrl",value:function(e){return this.ugcapi("taobaoISV.getISVUrl",{shopId:e})}},{key:"getChainBrandInformation",value:function(e){return this.rankapi("chainBrand.getChainBrandInformation",{restaurantUnitId:e}).then(e=>{this.dispatch({chainGrayInfo:e,actionType:"FETCH_CHAIN_GRAYLIST"});return e})}},{key:"getAdvertisementStatus",value:function(e){return this.rankapi("advertisement.getAdvertisementStatus",{nodeId:e}).then(e=>{this.dispatch({rs:e,actionType:"GET_ADVERTISEMENT_STATUS"});return e})}},{key:"isServingPackInGray",value:function(e){return this.packsapi("servingPack.isInGrayList",{shopId:e}).then(e=>{this.dispatch({servingPackInGray:e,actionType:"SERVINGPACK_IN_GRAY"});return e})}},{key:"getGrayInformation",value:function(e){return this.rankapi("wager.getGrayInformation",{restaurantId:e}).then(e=>{this.dispatch({grayInformation:e,actionType:"BID_GET_GRAYINFORMATION"});return e})}},{key:"clearMarketBidNotice",value:function(e){var t=i("hint_flag");y()(t["app.shop.market-for-bid"],"clicked")||(t["app.shop.market-for-bid"]={clicked:!0,time:Date.now()},a("hint_flag",t));var n=i("broadcastStore");n["market-bid-notice"]=e,a("broadcastStore",n),this.dispatch({actionType:"CLEAR_BID_NOTICE"})}},{key:"updateCommentNotice",value:function(e){this.dispatch({result:e,actionType:"FETCH_COMMENT_INFO"})}},{key:"updateChainCommentNotice",value:function(e){this.dispatch({result:e,actionType:"FETCH_CHAIN_COMMENT_INFO"})}},{key:"setSingleCheckDate",value:function(e){return this.ugcapi("shopRating.setLastCheckCommentDate",{shopId:e,isChainShop:!1})}},{key:"setChainCheckDate",value:function(){return this.ugcapi("shopRating.setLastCheckCommentDate",{shopId:null,isChainShop:!0})}},{key:"fetchFeedbackCount",value:function(e){return this.ugcapi("fbs.getUnreadCount",{shopId:e}).then(e=>{this.dispatch({count:e,actionType:"FETCH_FEEDBACK_COUNT"});return e})}},{key:"updateFeedbackCount",value:function(e){this.dispatch({count:e,actionType:"FETCH_FEEDBACK_COUNT"})}}]),t}(I.a.ActionCreator);A.$inject=["beat"],t.a=A},Qlrj:function(e,t,n){"use strict";n("bmUn")},R8dz:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s);let r=function(){function e(t,n,i,s){a()(this,e),this.profile=t,this.login=n,this.$state=i,this.Alert=s}return o()(e,[{key:"$onInit",value:function(){window.__napos__sendToBrowser__?this.profile.getCurrentProfile().then(e=>{this.username=e.username}):this.username=localStorage.getItem("username")||"viva la vida"}},{key:"logout",value:function(){this.login.logout(),this.profile.removeCurrentProfile(),this.$state.go("login")}},{key:"changeUserInfo",value:function(){-1!==location.href.indexOf("chain-shop")||-1!==location.href.indexOf("multi-shop")?this.Alert.show("请进入单店后再修改",!0,3e3):this.$state.go("app.shop.userinfo")}}]),e}();r.$inject=["LoginProfileAction","LoginAction","$state","Alert"],t.a={controller:r,template:n("AENl")}},"RB/N":function(e,t,n){n("ex5W"),n("BICS"),n("30lJ"),n("Ejaw"),n("PNBs"),n("/mbe"),n("BSfM"),n("SG+0"),n("PhH3"),n("pj4h"),n("aOo4"),n("uul8"),n("tWMx")},RG6k:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("SUue"),m=n.n(h),f=n("A7Dr"),g=n.n(f),v=n("f4CT"),y=n("QAIe"),w=n.n(y),I=n("t4A1");const A=(e,t)=>{Array.isArray(e)||(e=[e]);e.forEach(e=>{if(e.childList&&e.childList.length){let n=e.childList;A(n,t)}t(e)})};let b=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.currentPlatform={},n.currentRestaurant=null,n.misc=null,n.availableActivity=!1,n.isInGraylist=!1,n.restaurantTree=null,n.certificationResult={},n.shopPhotos=[],n.uploadResult={},n.dealy=0,n.records=[],n.shopLogoStatus={},n.shopLogoFromTemplate=[],n.uploadLocalLogo={},n.shopVideoDevice={},n.foodSafetyLevel={},n.kfcUserType="common",n.chainShopGray=!0,n}return d()(t,e),c()(t,[{key:"getCurrentRestaurant",value:function(){return this.currentRestaurant}},{key:"getChainRestaurantId",value:function(){return g()(I.a.getChainKeeper(),"restaurantUnitIds.0")}},{key:"getRestaurantType",value:function(){return this.currentRestaurant.type}},{key:"getRestaurantView",value:function(){return this.view}},{key:"getRestaurantMisc",value:function(){return this.misc}},{key:"getRestaurantDetail",value:function(){return this.detail}},{key:"getRestaurantFeature",value:function(){return this.feature}},{key:"getDealy",value:function(){return this.dealy}},{key:"isAvailableActivity",value:function(){return this.availableActivity}},{key:"getRestaurantById",value:function(e){return this.findById(e)}},{key:"getKsid",value:function(){return window.localStorage.getItem("ksid")}},{key:"isChain",value:function(){return I.a.isManager()}},{key:"getChainChildId",value:function(){var e=this.getRestaurantTree();if(e.length){var t=e[0],n=t.childList?t.childList[0]:null;if(n)return n.id}return null}},{key:"isMulti",value:function(){return this.records&&this.records.length>1}},{key:"getAllShops",value:function(){return this.records}},{key:"getCurrentPlatform",value:function(e){return!e&&this.currentRestaurant&&(e=this.currentRestaurant.id),this.currentPlatform[e]}},{key:"getAllRestaurants",value:function(){return this.getAll()}},{key:"getRestaurantTree",value:function(){return this.restaurantTree}},{key:"getCertificationResult",value:function(){return this.certificationResult}},{key:"getAllPhotos",value:function(){return this.shopPhotos}},{key:"getUploadResult",value:function(){return this.uploadResult}},{key:"getExceptionMessage",value:function(){return this.exceptionMessage}},{key:"getAutoConfirm",value:function(e){return[JSON.parse(window.sessionStorage.getItem(e+"autoConfirm")),JSON.parse(window.sessionStorage.getItem(e+"autoDelivery"))]}},{key:"getShopLogoStatus",value:function(){return this.shopLogoStatus}},{key:"getShopLogoFromTemplate",value:function(){return this.shopLogoFromTemplate}},{key:"getUploadLocalLogo",value:function(){return this.uploadLocalLogo}},{key:"getShopVideoDevice",value:function(){return this.shopVideoDevice}},{key:"getFoodSafetyLevel",value:function(){return this.foodSafetyLevel}},{key:"getKfcUserType",value:function(){return this.kfcUserType}},{key:"getEnv",value:function(){return localStorage.env||"production"}},{key:"getChainShopGray",value:function(){return this.chainShopGray}},{key:"getChildRestaurantById",value:function(e){var t=this.getRestaurantTree();let n=null;return A(t,t=>{t.id===e&&(n=t)}),n}},{key:"getHandlers",value:function(){return{[v.a.LOAD_RESTAURANTS]:e=>{this.records=e.restaurants},[v.a.SET_CURRENT_RESTAURANT]:e=>{if(null===e.currentRestaurant)return void(this.currentRestaurant=null);this.currentRestaurant=this.findById(e.currentRestaurant.id)},[v.a.UPDATE_RESTAURANT_STATUS]:e=>{this.currentRestaurant.totalStatus=e.totalStatus;this.currentRestaurant.busyLevel=e.busyLevel},[v.a.GET_PLATFORM]:e=>{this.currentPlatform[e.restaurantId]=e.platform},[v.a.UPDATE_PLATFORM]:e=>{this.currentPlatform[e.restaurantId]=e.platform},[v.a.FETCH_RESTAURANT_VIEW]:e=>{this.currentRestaurant=e.result.basis;this.view=e.result;this.misc=e.result.misc;this.feature=e.result.feature;this.detail=e.result.detail;this.exceptionMessage=e.result.exceptionMessage},[v.a.GET_AVAILABLE_ACTIVITY]:e=>{this.availableActivity=e.result},[v.a.IS_IN_GRAYLIST]:e=>{this.isInGraylist=e.isInRankGray},[v.a.FETCH_RESTAURANT_TREE]:e=>{this.restaurantTree=e.restaurantTree},[v.a.FETCH_SHOP_CERTIFICATE]:e=>{this.certificationResult=e.result},[v.a.FETCH_ALL_SHOP_PHOTOS]:e=>{this.shopPhotos=e.result},[v.a.FETCH_PHOTO_UPLOAD_RESULT]:e=>{this.uploadResult=e.result},[v.a.LOAD_SHOP_CLOSE_DEALY]:e=>{this.dealy=e.result},[v.a.AUTO_CONFIRM]:e=>{window.sessionStorage.setItem(e.shopId+"autoConfirm",e.autoConfirm);window.sessionStorage.setItem(e.shopId+"autoDelivery",e.autoDelivery)},[v.a.FETCH_SHOP_LOGO_STATUS]:e=>{this.shopLogoStatus=e.result},[v.a.FETCH_SHOP_LOGO_FROM_TEMPLATE]:e=>{this.shopLogoFromTemplate=e.result},[v.a.FETCH_LOCAL_LOGO_HASH]:e=>{this.uploadLocalLogo=e.result},[v.a.FETCH_SHOP_VIDEO_DEVICES]:e=>{this.shopVideoDevice=e.result},[v.a.UPDATE_PHOTO_COUNT]:e=>{m()(this.view,"shopPhotoView.totalCount",e.count)},[v.a.GET_FOOD_SAFETY_LEVEL]:e=>{this.foodSafetyLevel=e.result},[v.a.GET_KFC_USER_TYPE]:e=>{this.kfcUserType=e.result},[v.a.FETCH_CHAIN_SHOP_GRAY]:e=>{this.chainShopGray=e.result}}}}]),t}(w.a.Store);t.a=new b},RGP5:function(e,t){e.exports="<div> <notice-modal></notice-modal> </div> "},RNMg:function(e,t){e.exports='<div class=login-box-form> <form novalidate name=usernameLoginForm> <input type=text class=login-box-form-input placeholder=请输入账号 ng-model=$ctrl.form.username autofocus=true required/> <div class=login-box-form-password> <input type=password class=login-box-form-input placeholder=请输入密码 ng-model=$ctrl.form.password required/> <span ui-sref=passwordReset>忘记密码？</span> </div> <div class=login-box-form-captcha ng-if=$ctrl.captchaImageB64> <input type=text placeholder=图片验证码 class=login-box-form-input ng-model=$ctrl.form.captcha> <div class=captcha-image ng-click=$ctrl.updateCaptcha()> <img ng-src="{{$ctrl.captchaImageB64}}" alt=图片验证码> </div> </div> <span class=login-box-form-error ng-if=$ctrl.errorMessage>{{$ctrl.errorMessage}}</span> <button class=login-box-form-button ng-disabled=usernameLoginForm.$invalid ng-click=$ctrl.loginByUsername()>登录</button> </form> </div> '},Reue:function(e,t,n){"use strict";function i(e){return JSON.parse(window.localStorage[e]||"{}")}var a,s,o,r,c,l,p,u,d,h,m,f=n("Zx67"),g=n.n(f),v=n("Zrlr"),y=n.n(v),w=n("wxAW"),I=n.n(w),A=n("zwoO"),b=n.n(A),S=n("Pf15"),C=n.n(S),k=n("A7Dr"),O=n.n(k),T=n("QAIe"),D=n.n(T);let N=function(e){function t(){return y()(this,t),b()(this,(t.__proto__||g()(t)).apply(this,arguments))}return C()(t,e),I()(t,[{key:"getNotifyCount",value:function(){return a}},{key:"getFeedbackCount",value:function(){return s}},{key:"isBidInGray",value:function(){return r}},{key:"isISVInGray",value:function(){return p}},{key:"getChainGrayInfo",value:function(){return l}},{key:"getCommentNotice",value:function(){return u}},{key:"getChainCommentNotice",value:function(){return d}},{key:"getMarketBidNotice",value:function(){return this.buildMarketBidNotice(h)}},{key:"getBidNotice",value:function(){return h}},{key:"getPollingNoticeResult",value:function(){return o}},{key:"buildMarketBidNotice",value:function(e){const t=O()(i("broadcastStore"),"market-bid-notice");return e&&e!==t?{class:"nav-notice-dot",$type:"broadcast"}:{}}},{key:"buildCommentNotice",value:function(e){let t=e.newRatingCount,n=e.newNegativeCount;return n>100&&(n="99+"),n?{class:"nav-notice-num",text:n}:t?{class:"nav-notice-dot"}:{}}},{key:"isServingPackInGray",value:function(){return c}},{key:"getAdvertisementStatus",value:function(){return m}},{key:"getHandlers",value:function(){return{PAY_GET_NOTICE:e=>{h=O()(e,"result.wagerNotice")},CLEAR_BID_NOTICE:e=>{h=void 0},FETCH_COMMENT_INFO:e=>{u=this.buildCommentNotice(O()(e,"result"))},FETCH_CHAIN_COMMENT_INFO:e=>{d=this.buildCommentNotice(O()(e,"result"))},ISV_GET_GRAYINFORMATION:e=>{p=e.result},FETCH_NOTICES_NUM:e=>{var t=e.pollingResult.pollingNoticeResult;t&&(a=t.redCount,o=t)},CLEAR_NOTICES_NUM:e=>{a=0},CLEAR_POLLING_NOTICE_RESULT:e=>{o=null},BID_GET_GRAYINFORMATION:e=>{r=O()(e,"https://shadow.elemecdn.com/faas/melody/grayInformation.gray")},FETCH_CHAIN_GRAYLIST:e=>{l=O()(e,"chainGrayInfo")},FETCH_FEEDBACK_COUNT:e=>{s=e.count},SERVINGPACK_IN_GRAY:e=>{c=e.servingPackInGray},GET_ADVERTISEMENT_STATUS:e=>{m=e.rs}}}}]),t}(D.a.Store);t.a=new N},RtYt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("CfXW");let o=function e(t,n,i){a()(this,e);const o=n.getInboxUrl(),r=t.params.detail;if(r){const e=o.split("?");this.src=`${e[0]}/message/${r}?${e[1]}`}else this.src=o;this.src=`${this.src}&shopId=${t.params.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()};o.$inject=["$state","NoticeAction"],t.default=o},"SG+0":function(e,t,n){"use strict";function i(){return{restrict:"A",link:a}}function a(e,t){var n;t.on("click",function(){n!==this&&(this.select(),n=this)}),t.on("blur",function(){n=null})}n(0).module("app").directive("selectOnClick",i)},SLs8:function(e,t,n){"use strict";var i=n("vMAF"),a=n.n(i);t.a=a()({FETCH_SHOP_ROOT:null,GET_CHILD_CHAINSHOPS:null,QUERY_CHILD_CHAINSHOPS:null,CREATE_GROUP_SHOP:null,DELETE_GROUP_SHOP:null,MOVE_GROUP_SHOP:null,UPDATE_GROUP_SHOP:null,GET_TOKEN:null,GET_CAPTCHA:null,GET_INFO:null,GET_VERIFY:null,GET_KEEPER_FOR_ROLE:null,GET_ROLE_LIST:null,GET_ALL_PERMISSIONS:null,SET_SHOP_UNIT_TYPE:null})},SQ9m:function(e,t,n){"use strict";t.a={bindings:{title:"@",navTitle:"@",navState:"@",ubtId:"@"},template:n("/TBV")}},Skq0:function(e,t){e.exports='<div class=printer-state-container ng-show=$ctrl.rid> <div ml-dropdown new-style=new-style> <div ml-dropdown-toggle> <div class=printer-state ng-class="{disconnected: !$ctrl.connected}"> <span class="iconfont icon-printer mr5"></span> {{$ctrl.text}}</div> </div> <div ml-dropdown-menu> <span class=ml-dropdown-menu-arrow></span> <div class=ml-dropdown-menu-content> <div class=ml-dropdown-menu-wrapper> <div class=ml-dropdown-menu-item> <span class=connect-info ng-class="{disconnected: !$ctrl.connected}" ng-click=$ctrl.printsetting($event)> <span class="iconfont icon-success" ng-if=$ctrl.connected></span> <span class="iconfont icon-error" ng-if=!$ctrl.connected></span> 打印机{{$ctrl.text}} </span> </div> </div> <div class=ml-dropdown-menu-wrapper ng-if=!$ctrl.connected> <div class=ml-dropdown-menu-item ng-click=$ctrl.printsetting($event)> 打印机设置 </div> <div class=ml-dropdown-menu-item ng-click=$ctrl.gotoTip($event)> 打印机问题帮助 </div> </div> </div> </div> </div> <div class=seperate></div> </div>'},Srfd:function(e,t,n){e.exports.controller=n("0PeU").default,e.exports.template=n("QJBl")},Sut9:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE1cHgiIGhlaWdodD0iOXB4IiB2aWV3Qm94PSIwIDAgMTUgOSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy44LjIgKDI5NzUzKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5uZXh0X2l0ZW08L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i56ue5Lu35o6S5ZCNMS41X+aIkeacieeWkemXruS8mOWMliIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyMy4wMDAwMDAsIC0xNDMuMDAwMDAwKSIgZmlsbD0iI0VFRUVFRSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zMjcuNDIxMjI1LDE1My4wMjU5OCBMMzI3LjQyMTIyNSwxNDUuMjk2NDg1IEwzMjUuMTQ5NzIsMTQ1LjI5NjQ4NSBMMzI1LjE0OTcyLDE1NS4xMzk2NzEgTDMyNS4zMDY1MzUsMTU1LjEzOTY3MSBMMzI1LjMwNjUzNSwxNTUuMjk3NDg0IEwzMzUuMTQ5NzIsMTU1LjI5NzQ4NCBMMzM1LjE0OTcyLDE1My4wMjU5OCBMMzI3LjQyMTIyNSwxNTMuMDI1OTggWiIgaWQ9Im5leHRfaXRlbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzMwLjE0OTcyMCwgMTUwLjI5Njk4NSkgcm90YXRlKC0yMjUuMDAwMDAwKSB0cmFuc2xhdGUoLTMzMC4xNDk3MjAsIC0xNTAuMjk2OTg1KSAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},SzED:function(e,t,n){"use strict";n("Uq5T"),n("T9PJ"),n("cnR4"),n("TkI2"),n("rqGo"),n("/zyc"),n("gvF1"),n("mUJG"),n("imMA"),n("Z0iy"),n("Iojo"),n("YUrt"),n("MKxV"),n("oC0W"),n("BvRC"),n("bgQL"),n("crbQ"),n("90+t"),n("cjux"),n("KqWW"),n("Jufg")},T7xw:function(e,t){e.exports="data:image/png;base64,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"},T9PJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n("Zx67"),i=n.n(t),a=n("Zrlr"),s=n.n(a),o=n("wxAW"),r=n.n(o),c=n("zwoO"),l=n.n(c),p=n("Pf15"),u=n.n(p),d=n(0),h=n.n(d),m=n("QAIe"),f=n.n(m),g=n("f4CT");let v=function(t){function n(e){s()(this,n);var t=l()(this,(n.__proto__||i()(n)).call(this));return t.beat=e,t.appInvoke=e.arena.app.invoke,t}return n.$inject=["beat"],u()(n,t),r()(n,[{key:"isClientEnv",value:function(){return!!e.__napos__sendToBrowser__}},{key:"loginByUsername",value:function(e,t,n,i){return this.appInvoke("LoginService.loginByUsername",{username:e,password:t,captchaCode:n,loginedSessionIds:i}).then(e=>{this.dispatch({actionType:g.a.LOGIN_BY_USERNAME,loginResult:e})})}},{key:"loginByMobile",value:function(e,t,n,i){return this.appInvoke("LoginService.loginByMobile",{mobile:e,verifyCode:t,captchaCode:n,loginedSessionIds:i}).then(e=>{this.dispatch({actionType:g.a.LOGIN_BY_MOBILE,loginResult:e})})}},{key:"loginByMobileRiskLogin",value:function(e,t,n,i){return this.appInvoke("RiskLoginService.loginByMobile",{token:e,verifyCode:t,captchaCode:n,loginedSessionIds:i}).then(e=>{this.dispatch({actionType:g.a.LOGIN_BY_MOBILE,loginResult:e})})}},{key:"sendVerifyCode",value:function(e,t){return this.appInvoke("LoginService.sendVerifyCode",{mobile:e,isByVoice:t})}},{key:"sendRiskLoginVerifyCode",value:function(e,t){return this.appInvoke("RiskLoginService.sendVerifyCode",{token:e,isByVoice:t})}},{key:"refreshCaptchaCode",value:function(e,t){return this.appInvoke("LoginService.refreshCaptchaCode",{username:e,mobile:t})}},{key:"logout",value:function(){return this.appInvoke("LoginService.logout")}}]),n}(f.a.ActionCreator);h.a.module("app").service("LoginAction",v)}.call(t,n("DuR2"))},TJ0e:function(e,t,n){"use strict";n("wnEP")},TJSo:function(e,t,n){"use strict";function i(e){e.state("logined",{url:"/logined",resolve:{loginInit:a},views:{"":o}})}function a(e,t){if(e.isClientEnv())return t.getProfiles()}a.$inject=["LoginAction","LoginProfileAction"],i.$inject=["$stateProvider"];var s=n(0),o=n("QA6H");s.module("app").config(i)},TS32:function(e,t,n){"use strict";const i={open:"营业中",delay:"已打烊",closed:"已关闭"};t.a=function(){return function(e){return i[e]}}},TUA9:function(e,t,n){"use strict";`<document>
    <line>
      <text align="center" font="big">商家小票</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text font="big">发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" space="4" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7" font="tall"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>顾客实付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text font="big">应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <line>
      <text font="big">预计收入</text>
      <text align="right" font="big">{{ income }}</text>
    </line>
    <separator char="-" />
    <line>
      <text></text>
    </line>
    <line>
      <text font="big">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="big">{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="big">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <line>
      <text align="center" font="big">商家小票</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text font="big">备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text font="big">发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text font="tall">{{ name }}</text>
          <text align="right" space="4" font="tall">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7" font="tall"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>顾客实付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text font="big">应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <line>
      <text font="big">预计收入</text>
      <text align="right" font="big">{{ income }}</text>
    </line>
    <separator char="-" />
    <line>
      <text></text>
    </line>
    <line>
      <text font="big">{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text font="big">{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text font="big">{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},TW4j:function(e,t,n){"use strict";var i=n("mvHQ"),a=n.n(i),s=n("Zx67"),o=n.n(s),r=n("Zrlr"),c=n.n(r),l=n("wxAW"),p=n.n(l),u=n("zwoO"),d=n.n(u),h=n("Pf15"),m=n.n(h),f=n("a+F3");let g=function(e){function t(){return c()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),p()(t,[{key:"$onInit",value:function(){let e=window.location.search.substr(1),t=this.transformQuery(decodeURI(e));if(this.ratings=[{code:"VERY_UNSATISFIED",desc:"服务质量差"},{code:"UNSATISFIED",desc:"较差，改进空间大"},{code:"COMMON",desc:"一般，需要改进"},{code:"SATISFIED",desc:"较满意，再接再厉"},{code:"VERY_SATISFIED",desc:"非常满意"}],this.reasons=["无法联系到市场经理","服务态度恶劣","未妥善处理问题","擅自修改餐厅信息","私自上线活动或开通付费项目","勒索受贿"].map(e=>({value:e,active:!1})),this.rating={index:-1,change:!0},this.comment=null,this.commiting=!1,t&&t.visitRecordId){let e=t.BDName,n=t.visitRecordId,i=t.visitTime,a=t.expireTime;this.BDName=e,this.visitRecordId=n,this.visitTime=i,this.expireTime=a;let s=this.loadHistory();-1!==s.indexOf(this.visitRecordId)?this.commented=!0:this.show=!0}}},{key:"transformQuery",value:function(e){if(e&&e.length){let t=e.split("&"),n={};return t.forEach(e=>{let t=e.split("=");let i=t[0];let a=t[1];n[i]=a}),n}return null}},{key:"hover",value:function(e){this.rating.change&&(this.rating.index=e)}},{key:"selectStar",value:function(e){this.rating.change=!1,this.rating.index=e}},{key:"activeRating",value:function(){return-1!==this.rating.index?this.ratings[this.rating.index]:null}},{key:"disabled",value:function(){return this.commiting||-1===this.rating.index}},{key:"commitState",value:function(){return this.commiting?"提交中":"提交"}},{key:"selectReason",value:function(e){this.reasons.forEach(t=>{t.active=t===e})}},{key:"loadHistory",value:function(){let e=window.localStorage,t=e.getItem("bd-visitIds");return t?JSON.parse(t):[]}},{key:"save",value:function(e){if(window.localStorage){let t=this.loadHistory();t.push(e),window.localStorage.setItem("bd-visitIds",a()(t))}}},{key:"submitFeedback",value:function(){if(!this.disabled()){let e=null;this.rating.index>=0&&this.rating.index<2&&(e=this.reasons.filter(e=>e.active).map(e=>e.value).join(","));let t={visitRecordId:this.visitRecordId,commentLevel:this.ratings[this.rating.index].code,reason:e,remark:this.comment,shopId:this.rid};this.commiting=!0,this.db.submitBDComment(t).then(e=>{this.commiting=!1;e.success?(this.show=!1,this.showSuccess=!0,this.save(this.visitRecordId)):this.error=e.message}).catch(e=>{this.commiting=!1;this.error=e.message})}}}]),t}(f.a);t.a={template:n("hzFn"),controller:g}},Th1O:function(e,t){e.exports='<div class=order-cards> <order-card ng-repeat="https://shadow.elemecdn.com/faas/melody/order in unprocessedOrders track by order.id" order=order is-multi=true restaurant=getRestaurant(order.restaurantId) deliverable=true on-confirm-print=confirmPrintOrder on-invalidate-order=invalidateOrder on-copy=copyOrder></order-card> <div class=no-order ng-show="unprocessedOrders.length === 0 &&\n             autoConfirm"> <p>连接电脑电源，保证电脑处于充电状态</p> <p>不要退出饿了么商家版客户端</p> </div> <p ng-show="unprocessedOrders.length === 0 &&\n             !autoConfirm" class=no-order> 暂时没有新订单 </p> </div> '},TkI2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("f4CT");let y=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this));return n.appInvoke=e.arena.app.invoke,n}return t.$inject=["beat"],d()(t,e),c()(t,[{key:"startReset",value:function(e){return this.appInvoke("ResetPasswordService.startReset",{token:e}).then(e=>{this.dispatch({actionType:v.a.PASSWORD_START_RESET,resetToken:e})})}},{key:"refreshCaptcha",value:function(e){return this.appInvoke("ResetPasswordService.refreshCaptchaCode",{token:e})}},{key:"getKeeperByUsername",value:function(e,t,n){return this.appInvoke("ResetPasswordService.getKeeperByUsername",{token:e,username:t,captchaCode:n}).then(e=>{this.dispatch({actionType:v.a.PASSWORD_GET_KEEPR,resetKeeper:e})})}},{key:"sendVerifyCode",value:function(e,t){return this.appInvoke("ResetPasswordService.sendVerifyCode",{token:e,isByVoice:t})}},{key:"checkVerifyCode",value:function(e,t,n){return this.appInvoke("ResetPasswordService.checkVerifyCode",{token:e,verifyCode:t,captchaCode:n})}},{key:"checkIdentityInfo",value:function(e,t,n,i){return this.appInvoke("ResetPasswordService.checkIdentityInfo",{token:e,idCardNumber:t,bankCardHolderName:n,bandCardNumber:i})}},{key:"setNewPassword",value:function(e,t){return this.appInvoke("ResetPasswordService.setNewPassword",{token:e,newPassword:t})}},{key:"sendVerifyCodeNoToken",value:function(e=!1){return this.appInvoke("ChangePasswordService.sendVerifyCode",{isByVoice:e})}},{key:"changePasswordByOldPassword",value:function(e,t){return this.appInvoke("ChangePasswordService.changePasswordByOldPassword",{oldPassword:e,newPassword:t})}},{key:"changePasswordByVerifyCode",value:function(e,t){return this.appInvoke("ChangePasswordService.changePasswordByVerifyCode",{verifyCode:e,newPassword:t})}},{key:"getUserInfo",value:function(){return this.appInvoke("KeeperService.getKeeper")}},{key:"setFirstPasswd",value:function(e){return this.appInvoke("ResetPasswordService.setFirstPasswd",{newPassword:e})}}]),t}(g.a.ActionCreator);m.a.module("app").service("ResetPasswordAction",y)},Tmiv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(t,i,a,o){t.isOverV505Client=window.isOverV505Client,t.profiles=c.a.getProfiles(),t.getShopNames=function(e){return e=e||[],e.length>1?`${e.length}家门店`:e.map(e=>e.name).join("/")},t.radio={selected:null},t.login=function(){let n=s()(t.profiles,e=>t.radio.selected===e.id);return e.localStorage.setItem("ksid",r()(n,"ksid")),o.launchProfile(t.radio.selected)},t.placeholder=n("cphT")}t.default=i;var a=n("o5Mu"),s=n.n(a),o=n("A7Dr"),r=n.n(o),c=n("/wOq");i.$inject=["$scope","beat","Alert","LoginProfileAction"]}.call(t,n("DuR2"))},Tu4W:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},U1Wr:function(e,t,n){"use strict";const i=function(){try{return localStorage.setItem("canUseStorage","true"),localStorage.removeItem("canUseStorage"),!0}catch(e){return!1}}();t.a=i},UB8f:function(e,t,n){+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),s="object"==typeof t&&t;(a||"destroy"!=t)&&(a||i.data("bs.tooltip",a=new n(this,s)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.2.0",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var o=a[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focusin",c="hover"==o?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var a=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(r);l&&(r=r.replace(c,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var p=this.getPosition(),u=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var h=r,m=this.$element.parent(),f=this.getPosition(m);r="bottom"==r&&p.top+p.height+d-f.scroll>f.height?"top":"top"==r&&p.top-f.scroll-d<0?"bottom":"right"==r&&p.right+u>f.width?"left":"left"==r&&p.left-u<f.left?"right":r,s.removeClass(h).addClass(r)}var g=this.getCalculatedOffset(r,p,u,d);this.applyPlacement(g,r);var v=function(){a.$element.trigger("shown.bs."+a.type),a.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),a=i[0].offsetWidth,s=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),r=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(r)&&(r=0),t.top=t.top+o,t.left=t.left+r,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var c=i[0].offsetWidth,l=i[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var p=this.getViewportAdjustedDelta(n,t,c,l);p.left?t.left+=p.left:t.top+=p.top;var u=p.left?2*p.left-a+c:2*p.top-s+l,d=p.left?"left":"top"https://shadow.elemecdn.com/faas/melody/,h=p.left?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(u,i[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner"https://shadow.elemecdn.com/faas/melody/)[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function t(){"in"!=i.hoverState&&a.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,a=this.tip(),s=e.Event("hide.bs."+this.type);if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),!s.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",t).emulateTransitionEnd(n.TRANSITION_DURATION):t(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,a=window.SVGElement&&n instanceof window.SVGElement,s=n.getBoundingClientRect?n.getBoundingClientRect():null,o=i?{top:0,left:0}:t.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},c=a?{}:{width:i?e(window).width():t.outerWidth(),height:i?e(window).height():t.outerHeight()};return e.extend({},s,r,c,o)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-s-o.scroll,c=t.top+s-o.scroll+i;r<o.top?a.top=o.top-r:c>o.top+o.height&&(a.top=o.top+o.height-c)}else{var l=t.left-s,p=t.left+s+n;l<o.left?a.left=o.left-l:p>o.width&&(a.left=o.left+o.width-p)}return a},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(n(1))},UBDp:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/stats/food`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},Uj5z:function(e,t,n){"use strict";n("qNqt")},UovG:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("RG6k"),c=n("huSK"),l=n("NGSm");n.n(l);let p=function(){function e(t,n,i,s,o,r,c,l,p){a()(this,e),this.scope=t,this.timeout=n,this.alert=i,this.action=s,this.shopApi=o.shop.app.invoke,this.OrderAction=r,this.beat=o,this.config=p,this.$state=c,this.rid=c.params.restaurantId,this.clientVersion=l||"5.0.4",this.reasonType=1,this.api=o.browser.invoke,o.browser.on("pc.print.printersHasChanged",()=>{this.printStateInit()}),t.$on("$stateChangeSuccess",()=>{this.shopStateInit()})}return o()(e,[{key:"$onInit",value:function(){this.shopStateInit(),this.printStateInit(),this.getCloseReasons()}},{key:"$onDestroy",value:function(){this.timeoutId&&this.timeout.cancel(this.timeoutId),l.container.off("shop.closed")}},{key:"chooseTab",value:function(e){this.reasonType=e.index,this.closeReasonIndex=null}},{key:"getCloseReasons",value:function(){this.isNeedDialogItem=[],this.isNeedDescItem=[],fetch(this.config.crayfishCloseReasonListUrl).then(e=>e.json()).then(e=>{this.closeReasonList=e.reasonList.list;this.needOpenModalText=e.reasonList.needOpenModalText;this.needDescText=e.reasonList.needDescText})}},{key:"shopStateInit",value:function(){if(this.rid=this.$state.params.restaurantId,this.rid){let e=r.a.getCurrentRestaurant(),t=e.closeCountDown,n=e.busyLevel;t&&"open"===n&&(n="delay",this.delayFn(t)),this.state=n,this.businessHours=e.detail.is24HoursOpen?[{startTime:"00:00",endTime:"24:00"}]:e.detail.businessHours,this.nowIsInBusinessHour=e.detail.nowIsInBusinessHour,this.scope.$watch(()=>this.state,(e,t)=>{e&&e!==t&&this.notify(e)}),this.scope.$watch("$ctrl.closeReportModal",e=>{e||(this.reasonType=1,this.closeReasonIndex=null)}),l.container.on("shop.closed",()=>{this.timeoutId&&this.timeout.cancel(this.timeoutId);this.timeout(()=>{this.state="closed"})})}}},{key:"printStateInit",value:function(){this.api("pc.print.getPrinters").then(e=>{this.connected=e.filter(e=>e.isEnabled).length;this.text=this.connected?"打印机已连接":"打印机未连接"})}},{key:"open",value:function(){"open"!==this.state&&this.action.openShop(this.rid).then(()=>{this.state="open"}).catch(this.errorHandle.bind(this))}},{key:"confirmReportClose",value:function(e){this.state!==e&&(this.closeShopType=e,this.closeReportModal=!0)}},{key:"reportCloseReason",value:function(){this.closeReason=this.closeReasonIndex,this.confirmClose()}},{key:"confirmClose",value:function(){this.beat.newOrder.app.invoke("OrderService.countOrder",{shopId:this.rid,orderFilter:"BOOKING_ORDER",condition:{bookingOrderType:"ALL"}}).then(e=>{0!==e?(this.bookingOrderCount=e,this.delayConfirmModal=!0,this.closeReportModal=!1):this.closeShop()}).catch(()=>{this.closeShop()})}},{key:"closeShop",value:function(){"delay"===this.closeShopType&&this.delay().then(()=>{this.delayConfirmModal=!1;this.closeReportModal=!1}),"immediacy"===this.closeShopType&&this.closed().then(()=>{this.delayConfirmModal=!1;this.closeReportModal=!1})}},{key:"delay",value:function(){return this.action.closeShop(this.rid,this.closeReason,this.reasonType).then(e=>{this.state="delay";this.delayFn(e);this.closeReason===this.needOpenModalText&&(this.stationComplaintModal=!0)}).catch(this.errorHandle.bind(this))}},{key:"delayFn",value:function(e){this.timeoutId=this.timeout(()=>{this.timeoutId=0;this.shopApi("queryShop.getAllShops").then(e=>{let t=e[0];let n=t.busyLevel;let i=t.closeCountDown;i&&"open"===n?this.delayFn(i):(this.state="closed",this.alert.show("延时关店生效，店铺已关闭",!0))})},1e3*e)}},{key:"closed",value:function(){return this.action.updateRestaurantBusyLevel(this.rid,"closed",this.closeReason,this.reasonType).then(()=>{this.state="closed";this.closeReason===this.needOpenModalText&&(this.stationComplaintModal=!0)}).catch(this.errorHandle.bind(this))}},{key:"errorHandle",value:function(e){this.alert.show(e.message,!0)}},{key:"notify",value:function(e){let t=r.a.getCurrentRestaurant();t.busyLevel=e,l.container.broadcast("shop.state_change",t)}},{key:"printsetting",value:function(e){!this.rid||c.a.versionCompare(this.clientVersion,"5.0.4")<=0||e.tip||this.$state.go("app.shop.setting",{path:"print"})}},{key:"gotoTip",value:function(e){e.tip=!0,this.$state.go("app.shop.setting",{path:"print",category:"help"}),l.container.broadcast("https://shadow.elemecdn.com/faas/melody/state.sync","https://shadow.elemecdn.com/faas/melody/app.settings.print.help")}},{key:"goFeedback",value:function(){this.$state.go("app.shop.feedback",{path:"complain",categoryIndex:1,issueIndex:14})}}]),e}();p.$inject=["$scope","$timeout","Alert","RestaurantAction","beat","OrderAction","$state","clientVersion","config"],t.a={controller:p,template:n("9LeT")}},Uq5T:function(e,t,n){"use strict";function i(e){return e.toString()}function a(e,t={}){let n=C.a.copy(e),i=t.isPrintGoodBarcodeEnabled,a=t.isPrintGoodIdEnabled,s=t.isPrintSkuIdEnabled;return n.showOrderId=t.isPrintOrderIdBarcodeEnabled,n.payment=n.payment.toLowerCase(),n.paymentStatus=n.paymentStatus.toLowerCase(),n.status=n.status.toLowerCase(),n.feedbackStatus=n.feedbackStatus.toLowerCase(),n.callDeliveryType=n.callDeliveryType.toLowerCase(),n.groups.forEach(e=>{e.type=e.type.toLowerCase();e.items.forEach(e=>{e.extendCode&&s&&(e.showExtendCode=!0);e.barCode&&e.barCode.length>0&&(i&&(e.showBarCode=!0),a&&(e.showBarCodeId=!0))})}),n.activeTime=L()(n.activeTime).unix(),n.bookedTime=n.bookedTime&&L()(n.bookedTime).unix(),n.hasOwnProperty("consigneeSecretPhones")&&(n.consigneePhones=n.consigneeSecretPhones),n}Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),o=n.n(s),r=n("exGp"),c=n.n(r),l=n("//Fk"),p=n.n(l),u=n("Zx67"),d=n.n(u),h=n("Zrlr"),m=n.n(h),f=n("wxAW"),g=n.n(f),v=n("zwoO"),y=n.n(v),w=n("Pf15"),I=n.n(w),A=n("u7jP"),b=n.n(A),S=n(0),C=n.n(S),k=n("QAIe"),O=n.n(k),T=n("Dovi"),D=n("uoCA"),N=n("zALs"),E=n("KcnZ"),R=n("QD+Y"),M=n("vI2K"),P=n("PJh5"),L=n.n(P),U=n("NGSm"),x=(n.n(U),n("4fS4")),_=n("huSK");let j=function(e){function t(e,n,i,a,s,o,r){m()(this,t);var c=y()(this,(t.__proto__||d()(t)).call(this));return c.beat=e,c.clientVersion=i||"5.0.4",c.analytics=a,c.Handle=n,c.$state=s,c.arena=e.arena.app,c.nevermore=e.newOrder.app,c.Alert=o,c.ClientService=r,c}return t.$inject=["beat","Handle","clientVersion","analytics","$state","Alert","ClientService"],I()(t,e),g()(t,[{key:"fetchPolling",value:function(e){return this.arena.invoke("PushService.polling",{shopId:e}).then(e=>{this.dispatch({actionType:T.a.POLLING,pollingResult:e})}).catch(this.Handle.handleError)}},{key:"getShopAgreements",value:function(e){return this.arena.invoke("ShopAgreementService.getNeedAgreements",{limit:e}).then(e=>{this.dispatch({actionType:T.a.GET_SHOP_AGREEMENTS,shopAgreements:e})})}},{key:"signAgreement",value:function(e,t){return this.arena.invoke("ShopAgreementService.signAgreement",{agreementId:e,signResult:t,fingerPrint:null})}},{key:"getBaseKeeper",value:function(){return this.arena.invoke("KeeperService.getKeeper").then(e=>{this.dispatch({actionType:T.a.GET_BASE_KEEPER,keeper:e})})}},{key:"setPermissionEnabled",value:function(){this.dispatch({actionType:T.a.SET_PERMISSION_ENABLED,enabled:!1})}},{key:"getPermissionGray",value:function(e){return p.a.all([this.getShopPermissionGray(e),this.getFoodPermissionGray(e)])}},{key:"getShopPermissionGray",value:function(e){return this.beat.shop.app.invoke("gray.getIsGray",{grayId:e,feature:"SHOP_PERMISSION"}).then(e=>{this.dispatch({actionType:T.a.SET_SHOP_GRAY,result:e.inWhiteList});this.dispatch({actionType:T.a.GET_PERMISSION_GRAY,result:e.inWhiteList});return e})}},{key:"getFoodPermissionGray",value:function(e){return this.beat.goods.app.invoke("gray.getIsGray",{feature:"FOOD_PERMISSION"}).then(e=>{this.dispatch({actionType:T.a.SET_FOOD_GRAY,result:e.inWhiteList});return e})}},{key:"setAllPermissions",value:function(){this.dispatch({actionType:T.a.SET_ALL_PERMISSIONS})}},{key:"clearReceiptCount",value:function(){this.dispatch({actionType:T.a.CLEAR_RECEIPT_COUNT})}},{key:"getMarketManagerQuestions",value:function(e){var t=this;return this.arena.invoke("MarketManagerScoreService.getMarketManagerQuestions",{shopId:e}).then(e=>{t.dispatch({actionType:T.a.MARKET_MANAGER_QUESTIONS,questions:e})})}},{key:"setMarketManagerAnswer",value:function(e,t){return this.arena.invoke("MarketManagerScoreService.setMarketManagerAnswer",{shopId:e,marketManagerAnswers:t}).then(()=>{this.dispatch({actionType:T.a.MARK_VOTED,vote:!0})}).catch(this.Handle.handleError)}},{key:"printOrder",value:(()=>{function e(e){return t.apply(this,arguments)}var t=c()(function*(e,t=!1,n=!1){var i=this,s=E.a.isClientEnv(),o=[e.id],r=t?"PRINT_ORDER_AUTO":"PRINT_ORDER_MANUAL",c=t?"自动打印":"手动打印",l=s?"":"非饿了么客户端",p="准备",u=`${l} ${c}, ${p}`;const d=parseInt(e.activeTime.split("T")[0].split("-")[2],10);var h={orderId:e.id,daySn:e.daySn,consigneeName:e.consigneeName,consigneeAddress:e.consigneeAddress,payAmount:e.payAmount.toFixed(2),printTime:Date.now(),day:d};try{var m=yield this.haveEnabledPrinter2(),f=m?"已连接打印机":"未连接打印机";if(u=`${l} ${c}, ${p}, ${f}`,this.traceOrderLog(o,r,{message:u}),!m)return t&&this.addFailOrder(h),void this.Alert.show(`打印失败: ${f}`,!0);var g=yield this.ClientService.getGlobalPrintSettings(),v=a(e,g),y=null,w=`设置打印联数: ${g.copiesCountOfOrder}`;y=D.a.isChain()?D.a.getChildRestaurantById(e.shopId):D.a.getCurrentRestaurant();var I=yield i.printOrderBySetting(g,v,y);console.log(`printResult: ${I}`),I?(p="成功",this.Alert.show(`${c}${p}`),t&&this.addSucOrder(h),n&&this.delFailOrder(h)):(p="失败",t&&this.addFailOrder(h),this.Alert.show(`${c}${p}`),this.analytics.throw("printError",e)),u=`${c}, ${p}, ${w}`,this.traceOrderLog(o,r,{message:u})}catch(e){t&&(x.a.activate("printError"),this.addFailOrder(h)),this.Alert.show(`打印失败: ${e.message}`,!0),this.traceOrderLog(o,r,{message:`打印失败: ${e.message}`})}});return e})()},{key:"printOrderBySetting",value:function(e,t,n){return e&&e.countSettings?this.pinrtOrderNewStyle(e,t):(window.perf&&window.perf.sendEvent({name:"使用旧版设置打印",id:"ByNxE6SSW"}),this.ClientService.printOrderByTpl({normalTpl:R.a.getNormalTpl(),smallTpl:R.a.getSmallTpl(),data:R.a.getPrintData(t,n)}))}},{key:"pinrtOrderNewStyle",value:(()=>{function e(e,n){return t.apply(this,arguments)}var t=c()(function*(e,t){var n=this;try{var a=yield this.ClientService.getAvailablePrinters(),s=e.countSettings,o=[];return a.forEach(function(e){let t=e.id,n=i(t),a=s[n]||{customer:1,ktichen:0,shop:0};["customer","kitchen","shop"].forEach(function(e){let n=a[e];for(var i=0;i<n;i++)o.push({type:e,id:t})})}),o.reduce(function(e,i){return e.then(function(){return n.printOrderSequence(i,t)})},p.a.resolve())}catch(e){throw console.error(e),e}});return e})()},{key:"printOrderSequence",value:function(e,t){const n=e.type,i=e.id;return this.pinrtOrderByType(n,i,t)}},{key:"pinrtOrderByType",value:function(e,t,n){return this.ClientService.printOrderByTpl({normalTpl:M.a.getNormalTpl(e),smallTpl:M.a.getSmallTpl(e),data:M.a.getPrintData(n,e),printerId:t})}},{key:"setAutoProcess",value:function(e,t){const n=D.a.getCurrentRestaurant().id;t=t||!1,this.dispatch({actionType:T.a.UPDATE_AUTO_CONFIRM,shopId:n,autoConfirm:e,autoDelivery:t})}},{key:"delFailOrder",value:function(e,t=!0){_.a.delFailOrder(e).then(e=>{e.printTime=Date.now();t&&this.addSucOrder(e)}).then(()=>{b()(()=>{_.a.getProcessOrder().then(e=>{U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})})}},{key:"trackEvent",value:function(e){this.analytics.trackEvent(e)}},{key:"clearFailOrders",value:function(){_.a.clearFailOrders().then(()=>{b()(()=>{_.a.getProcessOrder().then(e=>{U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})})}},{key:"clearSuccessOrders",value:function(){_.a.clearSuccessOrders().then(()=>{b()(()=>{_.a.getProcessOrder().then(e=>{U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})})}},{key:"clearExpiredSuccessOrders",value:(()=>{function e(){return t.apply(this,arguments)}var t=c()(function*(){try{const e=(new Date).getDate(),t=yield _.a.getSucOrders(),n=t.filter(function(t){return e===t.day});yield _.a.clearSuccessOrders(),yield _.a.addSucOrders(n)}catch(e){}});return e})()},{key:"clearStore",value:function(){return _.a.clearStore()}},{key:"getOrderCount",value:function(){return _.a.getOrderCount()}},{key:"melodyRoute",value:function(e,t){this.$state.go(e,t)}},{key:"getReminderOrderCountObj",value:function(){return N.a.getReminderOrderCountObj()}},{key:"getNewOrderCount",value:function(){return N.a.getNewOrderCount()}},{key:"broadcastOrderEvent",value:function(){var e=E.a.isClientEnv(),t=_.a.canUseIDB(this.clientVersion),n=N.a.getNewOrderIds(),i=N.a.getNewOrderCount();U.container.broadcast("order.isClientEnv",e),U.container.broadcast("order.canUseIDB",t),i&&U.container.broadcast("order.queryNewOrder",JSON.parse(o()(n))),_.a.getProcessOrder().then(e=>{U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})}},{key:"traceOrderLog",value:function(e,t,n={}){return this.nevermore.invoke("TraceService.trace",{orderIds:e,action:t,extra:n})}},{key:"addFailOrder",value:function(e){_.a.addFailOrder(e).then(()=>{b()(()=>{_.a.getProcessOrder().then(e=>{if(e.fail.length>50){const t=e.fail.pop();this.delFailOrder(t,!1)}U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})})}},{key:"addSucOrder",value:function(e){_.a.addSucOrder(e).then(()=>{b()(()=>{_.a.getProcessOrder().then(e=>{U.container.broadcast("order.autoProcessOrders",JSON.parse(o()(e)))})})})}},{key:"getClientVersion",value:function(){return p.a.resolve(this.clientVersion)}},{key:"getOthersConfig",value:function(){return this.ClientService.invoke("pc.config.getConfig")}},{key:"setOthersConfig",value:function(e){return this.ClientService.invoke("pc.config.setConfig",e)}},{key:"haveEnabledPrinter2",value:(()=>{function e(){return t.apply(this,arguments)}var t=c()(function*(){return yield this.ClientService.haneAvailablePrinter()});return e})()},{key:"reload",value:function(){window.location.reload()}}]),t}(O.a.ActionCreator);C.a.module("app").service("ArenaAction",j)},V18I:function(e,t,n){function i(e){e.state("app.multishop.processcenter.returning",{url:"/returning",resolve:{refundingOrders:["$q","OrderAction",function(e,t){"ngInject";return e.all([t.loadUnprocessedRefundingOrders(),t.loadProcessingRefundingOrders()])}]},views:{"tab-content@app.multishop":s},data:{pageId:"363"}})}i.$inject=["$stateProvider"];var a=n(0),s=n("xXwT");a.module("app").config(i)},VBPs:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI2cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI2IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IHNrZXRjaHRvb2wgMzkuMSAoMzE3MjApIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkZDQUNDMUQxLUFEQjAtNERCMC05QUM2LTNDNzk1RjhFMjdGODwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggc2tldGNodG9vbC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iUEPlnKjnur/lrqLmnI3mta7liqjlhaXlj6MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NjYuMDAwMDAwLCAtMTA4My4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IuWIh+WbviIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzQ4LjAwMDAwMCwgMTAzNC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uX3NoYWRvdzQw77yFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5Ni4wMDAwMDAsIDM1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJoZWFkc2V0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMi4wMDAwMDAsIDE0LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNS4xNTE0MTc4OSw0LjgwMDc5NzQ0ZS0xMyBMMy4xMzkzMTg5OCw0LjgwMDc5NzQ0ZS0xMyBDMy4xMjY1MDM4MiwwLjIwNTk5ODIwMiAzLjEyLDAuNDEzNzIwMTg5IDMuMTIsMC42MjI5NzIwOTYgQzMuMTIsNi4wNDE4ODU0MSA3LjQ4MTY4MzM2LDEwLjQzNDc4MjYgMTIuODYyMDkyNSwxMC40MzQ3ODI2IEMxOC4yNDI1MDE2LDEwLjQzNDc4MjYgMjIuNjA0MTg0OSw2LjA0MTg4NTQxIDIyLjYwNDE4NDksMC42MjI5NzIwOTYgQzIyLjYwNDE4NDksMC40MTM3MjAxODkgMjIuNTk3NjgxMSwwLjIwNTk5ODIwMiAyMi41ODQ4NjU5LDMuNzQ4OTQ1NmUtMTMgTDIwLjU3Mjc2Nyw0LjgwMDc5NzQ0ZS0xMyBDMjAuNTg4OTEyMSwwLjIwNTUxNTk2OCAyMC41OTcxMzgzLDAuNDEzMjc2NDk1IDIwLjU5NzEzODMsMC42MjI5NzIwOTYgQzIwLjU5NzEzODMsNC45MjU0OTE1OSAxNy4xMzQwNDAzLDguNDEzMzcyNzcgMTIuODYyMDkyNSw4LjQxMzM3Mjc3IEM4LjU5MDE0NDYyLDguNDEzMzcyNzcgNS4xMjcwNDY2Niw0LjkyNTQ5MTU5IDUuMTI3MDQ2NjYsMC42MjI5NzIwOTYgQzUuMTI3MDQ2NjYsMC40MTMyNzY0OTUgNS4xMzUyNzI4MywwLjIwNTUxNTk2OCA1LjE1MTQxNzg5LDQuNzk0MjIwNThlLTEzIFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iIzlEQ0JGNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuODYyMDkyLCA1LjIxNzM5MSkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyLjg2MjA5MiwgLTUuMjE3MzkxKSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLjkzNjAxMzcsMTcuODIzMTk2NiBMMjIuMTY1NDYwNywxNy43MzkxMzA0IEMyMi4xNjU0NjA3LDE3LjczOTEzMDQgMjIuMTY1NDYwNSwyMS4wNzQwNTYzIDIyLjE2NTQ2MDcsMjEuNzMwOTE5NyBDMjIuMTY1NDYwOCwyMi4zODc3ODMgMjEuMTc0ODgwOCwyMy43MDc0OTQ3IDIwLjU1MDU1NDksMjMuNzA3NDk0NyBDMTkuOTI2MjI5LDIzLjcwNzQ5NDcgMTQuNTYsMjMuNzA3NDk0NSAxNC41NiwyMy43MDc0OTQ1IEwxNC41NiwyMi41OTM2MzAzIEMxNC41NiwyMi41OTM2MzAzIDE5LjIwMDU1NTQsMjIuNTkzNjMwNiAxOS45NDY2Njg3LDIyLjU5MzYzMDYgQzIwLjY5Mjc4MTksMjIuNTkzNjMwNiAyMC45MzYwMTM5LDIxLjU5MjE5MTEgMjAuOTM2MDEzOSwyMC43MjMzMTI3IEMyMC45MzYwMTM5LDE5Ljg1NDQzNDMgMjAuOTM2MDEzNywxNy44MjMxOTY2IDIwLjkzNjAxMzcsMTcuODIzMTk2NiBaIiBpZD0iUGF0aC04IiBmaWxsPSIjOURDQkY2Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTciIGZpbGw9IiM1NEE3RjQiIHg9IjEyLjQ4IiB5PSIyMS45MTMwNDM1IiB3aWR0aD0iMy4yMzc2OTkzOCIgaGVpZ2h0PSIyLjA4Njk1NjUyIiByeD0iMS4wNDM0NzgyNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuMzk4OTM0NzExLDEuODcxNzkyMjkgQzAuMzk4OTM0NzExLDEuMjUwNDc5NDMgMC44OTg4NTAwNCwwLjc0NjgwNTgyNyAxLjUyNTIxMzA0LDAuNzQ2ODA1ODA0IEwyLjY1MTQ5MTM2LDAuNzQ2ODA1NzYyIEwyLjY1MTQ5MTM2LDcuNDY4MDU3NjIgTDEuNTI1MjEzMDQsNy40NjgwNTc2NiBDMC45MDMxODY2OTQsNy40NjgwNTc2OSAwLjM5ODkzNDcxMSw2Ljk2Mjg3MTQxIDAuMzk4OTM0NzExLDYuMzQzMDcxMjYgTDAuMzk4OTM0NzExLDEuODcxNzkyMjkgWiIgaWQ9IlJlY3RhbmdsZS0xNiIgZmlsbD0iIzU1OTVEMSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIzLjI3ODkzNDcsMS44NzE3OTIyOSBDMjMuMjc4OTM0NywxLjI1MDQ3OTQzIDIzLjc3ODg1LDAuNzQ2ODA1ODI3IDI0LjQwNTIxMywwLjc0NjgwNTgwNCBMMjUuNTMxNDkxNCwwLjc0NjgwNTc2MiBMMjUuNTMxNDkxNCw3LjQ2ODA1NzYyIEwyNC40MDUyMTMsNy40NjgwNTc2NiBDMjMuNzgzMTg2Nyw3LjQ2ODA1NzY5IDIzLjI3ODkzNDcsNi45NjI4NzE0MSAyMy4yNzg5MzQ3LDYuMzQzMDcxMjYgTDIzLjI3ODkzNDcsMS44NzE3OTIyOSBaIiBpZD0iUmVjdGFuZ2xlLTE2IiBmaWxsPSIjNTU5NUQxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC40MDUyMTMsIDQuMTA3NDMyKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yNC40MDUyMTMsIC00LjEwNzQzMikgIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTE2LUNvcHkiIGZpbGw9IiM1NEE3RjQiIHg9IjIuOTMzODU3OTgiIHk9IjAiIHdpZHRoPSIzLjQwOTA2MDMyIiBoZWlnaHQ9IjguMjE0ODYzMzkiIHJ4PSIxLjcwNDUzMDE2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxLjQyMDAwMCwgMTQuNTAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yMS40MjAwMDAsIC0xNC41MDAwMDApIHRyYW5zbGF0ZSgxOC45MjAwMDAsIDEwLjAwMDAwMCkiIGZpbGw9IiM1NEE3RjQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xNi1Db3B5IiB4PSIwLjg1Mzg1Nzk3NSIgeT0iMCIgd2lkdGg9IjMuNDA5MDYwMzIiIGhlaWdodD0iOC4yMTQ4NjMzOSIgcng9IjEuNzA0NTMwMTYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},VUfd:function(e,t,n){"use strict";var i=n("BO1k"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r);let l=function(){function e(){o()(this,e)}return c()(e,[{key:"$onChanges",value:function(){this.total=this.total||0,this.size=this.size||10,this.current=this.current||1,this.max=Math.ceil(this.total/this.size),this.update()}},{key:"update",value:function(){const e=this.current-2,t=this.current+2+1,n=[],i=[];for(let i=1;i<=this.max;i++)(1===i||i===this.max||i>=e&&i<t)&&n.push(i);var s,o=!0,r=!1,c=void 0;try{for(var l,p=a()(n);!(o=(l=p.next()).done);o=!0){let e=l.value;s&&(e-s==2?i.push(s+1):e-s!=1&&i.push("")),i.push(e),s=e}}catch(e){r=!0,c=e}finally{try{!o&&p.return&&p.return()}finally{if(r)throw c}}this.list=i}},{key:"prev",value:function(){this.change(this.current-1)}},{key:"next",value:function(){this.change(this.current+1)}},{key:"change",value:function(e){e<1||e>this.max||(this.current=e,this.update(),"function"==typeof this.onChange&&this.onChange({num:e}))}}]),e}();t.a={template:n("xPTZ"),controller:l,bindings:{current:"<",total:"<",size:"<",onChange:"&"}}},VUln:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.userinfo",{url:"/userinfo",reloadOnSearch:!1,views:{"wrapper@app":n("ot4V")}})}])},VfjA:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/food?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},VxYB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("uoCA"),o=n("pGKV"),r=n("KcnZ");let c=function e(t){a()(this,e),this.id=s.a.getChainRestaurantId(),this.restaurantUnitType=o.a.getUnitType();const n=r.a.getBaseKeeper(),i=n.roles.filter(e=>{if(e.enabled&&["超级管理员","区域管理员"].indexOf(e.name)>-1)return e});this.show=Boolean(i.length)};c.$inject=["RoleAction"],t.default=c},"W+Wk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("CfXW");a.a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.activity",{url:"/activity",redirect:".plantform",resolve:{osInit:["$state","$stateParams",function(e,t){window.localStorage.restaurantId=t.restaurantId}]}}).state("app.shop.activity.plantform",{url:"/plantform?to",resolve:{},views:{"wrapper@app":{template:`
              <os-container os-src="{{$vm.src}}"></os-container>
            `,controller:["$stateParams","config"https://shadow.elemecdn.com/faas/melody/,function(e,t){this.src=`${t.melodyActivityUrl}/app/single/activity/plantform${e.to?"/"+e.to:""}?shopId=${e.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.activity.self",{url:"/self?to",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["$stateParams","config"https://shadow.elemecdn.com/faas/melody/,function(e,t){this.src=`${t.melodyActivityUrl}/app/single/activity/self${e.to?"/"+e.to:""}?shopId=${e.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("https://shadow.elemecdn.com/faas/melody/app.shop.activity.crm",{url:"/crm",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["$stateParams","config",function(e,t){this.src=`${t.crmUrl}?shopId=${e.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("app.shop.activity.self.superintrol",{url:"/self?to",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["$stateParams","config"https://shadow.elemecdn.com/faas/melody/,function(e,t){this.src=`${t.melodyActivityUrl}/app/single/activity/self${e.to?"/"+e.to:""}/superintrol?shopId=${e.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("app.chainshop.activity",{url:"/activity"}).state("app.chainshop.activity.setting",{url:"/setting",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["config",function(e){this.src=`${e.melodyActivityUrl}/app/chain/activity/setting`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.activity.self",{url:"/self",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["config",function(e){this.src=`${e.melodyActivityUrl}/app/chain/activity/lists`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}}).state("app.chainshop.activity.plantform",{url:"/plantform",views:{"wrapper@app":{template:`<os-container os-src="{{$vm.src}}"></os-container>`,controller:["config",function(e){this.src=`${e.melodyActivityUrl}/app/chain/activity/plantform`,s.a.schedule(this.src),s.a.hideAppWrapper()}],controllerAs:"$vm"}}})}])},"W+cB":function(e,t,n){t.template=n("k/Ug"),t.controller=n("jNz5").default,t.controllerAs="$ctrl"},"W/iF":function(e,t,n){"use strict";function i(e,t,n,i,a){function o(t){var n=String(e.searchKeywords);return t=t.toString(),t=t.replace(new RegExp(n,"g"),'<span class="toolbar-search-result-mark">'+n+"</span>")}function l(){return new RegExp(/^\d{1,4}$/).test(e.searchKeywords)}function p(){return new RegExp(/^\d{5,}$/).test(e.searchKeywords)}let u=(()=>{var t=s()(function*(){const t=++m;if(yield a.singleSearchResultOrders(e.searchKeywords),t!==m)return!1;e.isSearching=!1,e.searchResultRecords=t===m?c.a.getSearchResult():e.searchResultRecords,e.$digest()});return function(){return t.apply(this,arguments)}})();const d=document.querySelector(".toolbar-search");e.isFocus=!1,e.placeholder="搜索订单",e.searchKeywords="",e.searchResultRecords=[],e.isSearchResultShow=!1,e.onSearchFocus=function(){e.placeholder="输入订单号、流水号、手机号",e.isFocus=!0,e.isSearchResultShow=!0,window.perf&&window.perf.sendEvent({name:"点击搜索订单",id:"SkdIbMLXb"})},e.$watch("searchKeywords",function(t,n){e.isSearching=!0,h()});const h=r()(u,300,{leading:!0});let m=0;e.selectOrder=function(n){e.isSearchResultShow=!1;t.go("app.multishop.processcenter.searching",{orderId:n})},e.searchOrders=function(){if(e.isSearchResultShow&&e.searchKeywords){e.isSearchResultShow=!1;t.go("app.multishop.processcenter.searchings",{fuzzyPhrase:e.searchKeywords})}},e.percolatorDaysn=function(e){return e=i("doubleDigit")(e),l()?o(e):e},e.percolatorPhone=function(e){return p()?o(e):e},e.percolatorId=function(e){return o(e)},e.getPaymentStatusText=function(e){return{unpaid:"尚未支付订单",failed:"支付失败订单",pending:"订单生成中"}[e]||"无效订单"},document.addEventListener("click",t=>{d.contains(t.target)||(e.placeholder="搜索订单",e.isFocus=!1,e.isSearchResultShow=!1,e.$digest())},!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("exGp"),s=n.n(a),o=n("V/bW"),r=n.n(o),c=n("9UnT");i.$inject=["$scope","$state","$timeout","$filter","OrderAction"]},W4z3:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("A7Dr"),c=n.n(r),l=n("NGSm"),p=(n.n(l),n("ilQr"));let u=function(){function e(t,n,i,s,o){a()(this,e),this.$scope=t,this.$state=n,this.$timeout=i,this.beat=s,this.NoticeAction=o,this.noticeList=[],this.notice=null,this.showMask=!1,this.showNotice=!1,this.showInnerPush=!1,this.showImageOnly=!1,this.timeout=null,this.initNoticeList()}return o()(e,[{key:"$onInit",value:function(){p.a.onChangeWithScope(()=>{this.noticeList.length||this.initNoticeList()},this.$scope),l.container.on("https://shadow.elemecdn.com/faas/melody/crystal.notice.url",this.handleLinkedClicked),this.NoticeAction.onLinkClicked(e=>this.handleLinkedClicked(e.pcUrl)),this.NoticeAction.onReaded(()=>this.NoticeAction.getNoticeNum())}},{key:"initNoticeList",value:function(){const e=p.a.getPollingNotices();this.noticeList=this.getNoticeList(e),this.noticeList.length&&this.handleNotice(),e.length&&this.broadcastNotice(e)}},{key:"getNoticeList",value:function(e){return e.filter(e=>{const t=c()(e,"remindForm.remindPCList[0].remindPositionPC");if(["PC_INNER_POPUP","PC_SYSTEM_PUSH","PC_INNER_PUSH"].includes(t))return e}).map(e=>{const t=c()(e,"remindForm.remindPCList[0].remindPositionPC");const n=c()(e,"actions.actionList[0].pcUrl");return{messageId:e.messageId,title:e.title,summary:e.summary,beginDate:e.beginDate,actionUrl:n,actionTitle:n?c()(e,"actions.actionList[0].description"):"查看详情",showAction:!!n||Boolean(e.content),image:c()(e,"remindForm.remindPCList[0].remindContentPC.imageUrl"),remindFormType:t,remindContentType:c()(e,"remindForm.remindPCList[0].remindContentPC.remindContentType")}})}},{key:"broadcastNotice",value:function(e){const t=e.filter(e=>{const t=c()(e,"remindForm.remindPCList[0].remindPositionPC");if("NOTICE_BAR"===t)return e});t.length&&l.container.broadcast("https://shadow.elemecdn.com/faas/melody/crystal.notice.bar",t)}},{key:"handleNotice",value:function(){if(!this.noticeList.length)return this.showMask=!1,!1;if(this.notice=this.noticeList.shift(),this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null),"PC_INNER_PUSH"===this.notice.remindFormType)this.showMask=!1,this.showNotice=!1,this.showInnerPush=!0,this.timeout=this.$timeout(()=>this.setNoticeSeen(),1e4);else{const e=c()(this,"https://shadow.elemecdn.com/faas/melody/$state.current.name"),t=e.split(".").slice(0,3).join(".");if("app.shop.order"===t)return!1;this.showMask||(this.showMask=!0),"PC_SYSTEM_PUSH"===this.notice.remindFormType&&this.beat.browser.invoke("pc.notify.startFlashWindow"),this.showInnerPush=!1,this.showImageOnly="PC_INNER_POPUP"===this.notice.remindFormType&&this.notice.image&&"IMAGE"===this.notice.remindContentType,this.$timeout(()=>{this.showNotice=!0},100)}}},{key:"setNoticeSeen",value:function(){this.NoticeAction.setNotified(this.notice.messageId),this.showMask=!1,this.showNotice=!1,this.showInnerPush=!1,this.showImageOnly=!1,this.notice=null,this.noticeList.length&&this.$timeout(()=>this.handleNotice(),400)}},{key:"clickedDetail",value:function(){const e=this.notice.actionUrl;if(e)this.NoticeAction.setReaded(this.notice.messageId),e.startsWith("https://melody")?window.location=e:this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:e});else if(this.notice.showAction){const e=[...this.$state.current.name.split(".").slice(0,2),"notice"].join(".");this.NoticeAction.removeNoticeItem(this.notice.messageId),this.$state.go(e,{detail:this.notice.messageId})}else this.NoticeAction.removeNoticeItem(this.notice.messageId);this.showMask=!1,this.showNotice=!1,this.showInnerPush=!1,this.showImageOnly=!1,this.notice=null,this.noticeList.length&&this.$timeout(()=>this.handleNotice(),400)}},{key:"handleLinkedClicked",value:function(e){if(!e)return!1;e.startsWith("https://melody")?window.location=e:this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:e})}}]),e}();u.$inject=["$scope","$state","$timeout","beat","NoticeAction"],t.a={controller:u,template:n("g/Xz")}},WcfV:function(e,t,n){t.template=n("yEGd"),t.controller=n("jFgx").default,t.controllerAs="$ctrl"},Wctc:function(e,t,n){"use strict";e.exports.controller=n("QYHD"),e.exports.template=n("m95f")},WeoZ:function(e,t,n){"use strict";n("nGX6")},X2SC:function(e,t,n){e.exports.controller=n("kTeq").default,e.exports.template=n("NNRy")},X7Vg:function(e,t,n){"use strict";function i(e,t,n){e.billDetailUrlForAfp=n.billDetailUrlForAfp+(t.order_id||""),a.a.schedule(e.billDetailUrlForAfp),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$stateParams","config"]},XJQq:function(e,t,n){"use strict";var i=n("mvHQ"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("A7Dr"),p=n.n(l),u=n("ilQr");let d=function(){function e(t,n,i,a,s,r){o()(this,e),this.$scope=t,this.$timeout=n,this.$interval=i,this.$state=a,this.beat=s,this.NoticeAction=r,this.rolling=null,this.animation=!0,this.translate=0,this.noticeList=this.getNoticeBarNotice(u.a.getPollingNotices()),this.noticeQueue=this.getNoticeQueue(this.noticeList),this.noticeQueue.length>1&&this.startRolling()}return c()(e,[{key:"$onInit",value:function(){u.a.onChangeWithScope(()=>{this.noticeList=this.getNoticeBarNotice(u.a.getPollingNotices());this.noticeList.length&&!this.noticeQueue.length&&(this.noticeQueue=this.getNoticeQueue(this.noticeList),this.noticeQueue.length>1&&(this.translate=0,this.startRolling()))},this.$scope)}},{key:"getNoticeBarNotice",value:function(e){return e.filter(e=>{const t=p()(e,"remindForm.remindPCList[0].remindPositionPC");if("NOTICE_BAR"===t)return e})}},{key:"getNoticeQueue",value:function(e){const t=JSON.parse(a()(e));return t.length>1&&t.push(t[0]),t.map(e=>({messageId:e.messageId,title:e.title,clickable:Boolean(e.content),action:p()(e,"actions.actionList[0].pcUrl")}))}},{key:"startRolling",value:function(){const e=this.noticeQueue.length;this.rolling=this.$interval(()=>{this.animation||(this.animation=!0);this.translate=this.translate-20;this.translate<=20*-(e-1)&&this.$timeout(()=>{this.animation=!1;this.translate=0},400)},3e3)}},{key:"goDetail",value:function(e,t){if(!e.clickable)return!1;this.NoticeAction.removeNoticeItem(e.messageId),this.handleList(t),this.$state.go("app.shop.notice",{detail:e.messageId})}},{key:"actionClick",value:function(e,t){if(!e.action)return!1;this.NoticeAction.setReaded(e.messageId),this.handleList(t),e.action.startsWith("https://melody")?window.location=e.action:this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:e.action})}},{key:"closeClick",value:function(e,t){this.NoticeAction.setNotified(e.messageId),this.handleList(t)}},{key:"handleList",value:function(e){this.$interval.cancel(this.rolling),this.rolling=null;const t=e===this.noticeQueue.length-1?0:e;this.noticeList.splice(t,1),this.noticeQueue=this.getNoticeQueue(this.noticeList),this.noticeQueue.length>1?this.startRolling():this.translate=0}}]),e}();d.$inject=["$scope","$timeout","$interval","$state","beat","NoticeAction"],t.a={template:n("iNg4"),controller:d}},XYl1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api-shop.beta.elenet.me/"},payment:"http://vpcb-base-payment-01.vm.elenet.me:9070/payment_webApi/payment/placeOrder/#",beat:{default:{uri:"https://app-api-shop.beta.elenet.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},activity:{uri:"https://app-api-shop.beta.elenet.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},shop:{uri:"https://app-api-shop.beta.elenet.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},rank:{uri:"https://app-api-shop.beta.elenet.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},goods:{uri:"https://app-api-shop.beta.elenet.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},order:{uri:"https://app-api-shop.beta.elenet.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},newOrder:{uri:"https://app-api-shop.beta.elenet.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},diagnosis:{uri:"https://app-api-shop.beta.elenet.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},delivery:{uri:"https://app-api-shop.beta.elenet.me/delivery/invoke",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/delivery/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},packs:{uri:"https://app-api-shop.beta.elenet.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},ugc:{uri:"https://app-api-shop.beta.elenet.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},arena:{uri:"https://app-api-shop.beta.elenet.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},shopGrowth:{url:"https://app-api-shop.beta.elenet.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},shopDeco:{uri:"https://app-api-shop.beta.elenet.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}},crm:{uri:"https://app-api-shop.beta.elenet.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.beta.elenet.me"}}},billUrl:"https://balance-desktop-test-beta.faas.elenet.me/#/",billDetailUrl:"https://hydrosweb-test.faas.elenet.me/bill",billDetailUrlForAfp:"https://hydrosweb-test.faas.elenet.me/order/query?order_id=",chainShopBillUrl:"https://hydroschainstore.beta.elenet.me/app/balance",chainShopBillDetailUrl:"https://hydroshead.faas.beta.elenet.me/bill",ubtUrl:"http://ubt.shop.beta.elenet.me/eventlog",ubtFrom:"melody-development",goodsUrl:"https://melody-goods-test.faas.elenet.me",melodyStatsUrl:"https://melody-stats-test-beta.faas.elenet.me/#",graceUrl:"http://em.beta.elenet.me/",melodyPayUrl:"https://melody-pay-test.faas.elenet.me/#",melodyPackUrl:"https://melody-pack-test-beta.faas.elenet.me/#",melodyActivityUrl:"https://melody-activity-test.faas.elenet.me",melodyOrderUrl:"https://melody-order.faas.alta.elenet.me",melodyShopUrl:"https://melody-shop-test.faas.elenet.me",receiptUrl:"https://eo.beta.elenet.me/napos_web",websocketUrl:"https://client-api.beta.elenet.me/api/line/access",appstoreUrl:"https://nest-market-test-beta.faas.elenet.me",domUrl:"https://xy.beta.elenet.me/feedback/homepage/index",poscodeUrl:"https://h5.beta.elenet.me/poscode",speUrl:"https://spe-test-beta.faas.elenet.me",creditScoreUrl:"https://melody-credit-score-test.faas.elenet.me",melodyChainShopDashboardUrl:"https://melody-base-test.faas.elenet.me/dashboard",melodyBaseUrl:"https://melody-base-test.faas.elenet.me",melodySettingsUrl:"https://melody-settings-test.faas.elenet.me",melodyPayBidUrl:"https://bs-river-bid.faas.beta.elenet.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.beta.elenet.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.beta.elenet.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.beta.elenet.me/#/app/shop/vas/search",melodyPayChainBidUrl:"https://bs-river-bid.faas.beta.elenet.me/#/app/chainshop/vas/bid",melodyPayChainAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/chainshop/vas/account",melodyVasDasUrl:"https://das-napos.faas.alpha.elenet.me",chainPermission:"https://chain-permission-test.faas.elenet.me",melodyGuaranteeUrl:"https://melody-guarantee-test.faas.elenet.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.beta.elenet.me/speaker",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons-test",fbsUrl:"https://melody-fbs.faas.beta.elenet.me/",crmUrl:"https://throne.faas.beta.elenet.me"}},"XbK+":function(e,t,n){"use strict";n("tYnN")},XlDX:function(e,t,n){t.template=n("54q8"),t.controller=n("4SiO").default,t.controllerAs="$ctrl"},Y4K6:function(e,t,n){"use strict";n("DV8u")},YHsY:function(e,t){e.exports='<ul class=pagination ng-show="total > 1"> <li class=prev ng-click=prev()> <a class=pagination-item> <span class="icon icon-arrow-left"></span> </a> </li> <li ng-click=pageClick(1)> <a class=pagination-item ng-class="{active: 1 == index}">1</a> </li> <li ng-show="turn > 1" ng-click=prevTurn()> <a class=pagination-item>···</a> </li> <li ng-repeat="i in pages.slice((turn-1)*offset,(turn)*offset)" ng-click=pageClick()> <a class=pagination-item ng-class="{active: i == index}">{{i}}</a> </li> <li ng-show="total-2-turn*offset >= 1" ng-click=nextTurn()> <a class=pagination-item>···</a> </li> <li ng-click=pageClick(total)> <a class=pagination-item ng-class="{active: total == index}">{{total}}</a> </li> <li class=next ng-click=next()> <a class=pagination-item> <span class="icon icon-arrow-right"></span> </a> </li> </ul> '},YUrt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("roBa"),y=n("4fS4");let w=function(e){function t(e,n,i,s){o()(this,t);var r=p()(this,(t.__proto__||a()(t)).call(this));return r.beat=e,r.clientVersion=i,r.Handle=n,r.arena=e.arena.app,r.Alert=s,r}return t.$inject=["beat","Handle","clientVersion","Alert"],d()(t,e),c()(t,[{key:"updateSettings",value:function(e){return v.a.updateSettings(e)}},{key:"testPlay",value:function(e,t){y.a.testPlay(e,t)}},{key:"getSettings",value:function(){return v.a.getSettings()}},{key:"updateOption",value:function(e){return v.a.updateOption(e)}},{key:"getOption",value:function(){return v.a.getOption()}},{key:"activate",value:function(e){return y.a.activate(e)}},{key:"remove",value:function(e){return y.a.remove(e)}},{key:"deleteDatabase",value:function(){return v.a.deleteDatabase()}}]),t}(g.a.ActionCreator);m.a.module("app").service("SoundAction",w)},YXWy:function(e,t,n){function i(e){e.state("app.multishop.processcenter.processing",{url:"/processing",resolve:{unProcessedOrders:["OrderAction",function(e){"ngInject";return e.loadUnprocessedOrders()}]},views:{"tab-content@app.multishop":s},data:{pageId:"361"}})}i.$inject=["$stateProvider"];var a=n(0),s=n("0AI2");a.module("app").config(i)},Ydex:function(e,t,n){t.template=n("MwrZ"),t.controller=n("PEHf").default,t.controllerAs="$ctrl"},Ye5a:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},YiPN:function(e,t,n){"use strict";n("/iXI")},YlKv:function(e,t,n){e.exports.controller=n("Fdnq").default,e.exports.template=n("C/ss")},YmXs:function(e,t,n){"use strict";n("hMZt")},Z0iy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("f4CT"),y=n("+asM");let w=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this));return n.beat=e,n.api=n.beat.delivery.app.invoke,n}return t.$inject=["beat"],d()(t,e),c()(t,[{key:"getIsControlledByEleme",value:function(e){return this.api("shopDelivery.isControlledByEleme",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_IS_CONTROLLED_BY_ELEME,isControlledByEleme:e});return e})}},{key:"cancelPurchase",value:function(e){return this.api("shopDelivery.cancelPurchase",{shopId:e})}},{key:"queryDeliveryFeeConfigs",value:function(e){return this.api("deliveryFee.queryDeliveryFeeConfigs",{shopId:e})}},{key:"queryDeliveryFeeConfig",value:function(e){return this.api("deliveryFee.queryDeliveryFeeConfig",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.QUERY_DELIVERY_FEE_CONFIG,result:e})})}},{key:"setDeliveryFeeConfig",value:function(e,t){return this.api("deliveryFee.setDeliveryFeeConfig",{shopId:e,configId:t})}},{key:"getControlledShopProductStatus",value:function(e){var t=parseInt(e);return this.api("shopDelivery.getControlledShopProductStatus",{shopId:t}).then(e=>{this.dispatch({actionType:v.a.GET_CONTROLLED_STATUS,shopId:t,controlledStatus:e})})}},{key:"getRestaurantDeliveryTime",value:function(e){return this.api("shopDelivery.getDeliveryTimePairs",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_RESTAURANT_DELIVERY_TIME,result:e})})}},{key:"shouldFillMealTakenAddress",value:function(e){return this.api("shopDelivery.shouldFillMealTakenAddress",{shopId:e})}},{key:"getPromisedCookingTime",value:function(e){return this.api("shopDelivery.getPromisedCookingTime",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_MEAL_COOKING_TIME,result:e});return e})}},{key:"getIsOnlinePayStatus",value:function(e){return this.api("shopDelivery.getIsOnlinePayStatus",{shopId:e})}},{key:"getIsDeliveryCover",value:function(e){return this.api("shopDelivery.getIsDeliveryCover",{shopId:e})}},{key:"getIsJoinSpark",value:function(e){return this.api("shopDelivery.getIsJoinSpark",{shopId:e})}},{key:"confirmPurchase",value:function(e){return this.api("shopDelivery.confirmPurchase",{shopId:e})}},{key:"updateShopCrowdState",value:function(e,t){return this.api("shopDelivery.updateShopCrowdState",{shopId:e,ifEnabled:t}).then(()=>{let n="UNAVAILABLE";t||(n="CANCELING");this.dispatch({actionType:v.a.GET_CROWD_STATUS,shopId:e,result:n})})}},{key:"getMealTakenAddress",value:function(e){return this.api("shopDelivery.getMealTakenAddress",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_MEAL_TOKEN_ADDRESS,mealTakenAddress:e})})}},{key:"updateMealTakenAddress",value:function(e,t,n,i,a){return this.api("shopDelivery.updateMealTakenAddress",{shopId:e,mealTakenAddress:t,promisedCookingTime:n,longitude:i,latitude:a,collectVersion:"MAP"})}},{key:"getDeliveryFeeThreshold",value:function(e){return this.api("shopDelivery.getDeliveryFeeThreshold",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_DELIVERY_FEE_THRESHOLD,deliveryFeeThreshold:e})})}},{key:"canPurchase",value:function(e){return this.api("shopDelivery.canPurchase",{shopId:e})}},{key:"updateDelivery",value:function(e,t){return this.api("shopDelivery.updateDeliveryAreas",{shopId:e,update:t})}},{key:"canModifyRestaurantAddressManually",value:function(e){return this.api("shopDelivery.canModifyRestaurantAddressManually",{shopId:e})}},{key:"getIsOnlineSettlement",value:function(e){return this.api("shopDelivery.getIsOnlineSettlement",{shopId:e})}},{key:"getCrowdShopProductStatus",value:function(e){return e=parseInt(e),this.api("shopDelivery.getCrowdShopProductStatus",{shopId:e}).then(t=>{this.dispatch({actionType:v.a.GET_CROWD_STATUS,shopId:e,crowdShopStatus:t})})}},{key:"getIsCrowdShopProductVisible",value:function(e){return e=parseInt(e),this.api("shopDelivery.getIsCrowdShopProductVisible",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.GET_IS_CROWD_VISIBLE,result:e})}).catch(e=>{this.dispatch({actionType:v.a.GET_IS_CROWD_VISIBLE,result:!1})})}},{key:"getRestaurantFeeRule",value:function(e){return this.api("deliveryFeeRule.getRestaurantFeeRule",{restaurantId:e}).then(e=>{this.dispatch({actionType:v.a.SET_RESTAURANT_FEE_RULE,result:e})})}},{key:"updateRestaurantFeeRule",value:function(e,t){let n=y.a.getRestaurantFeeRule();return this.api("deliveryFeeRule.updateRestaurantFeeRule",{restaurantId:e,merchantCost:t}).then(()=>{n.merchantSubsidy=t;this.dispatch({actionType:v.a.SET_RESTAURANT_FEE_RULE,result:n})})}},{key:"enquiryCallDelivery",value:function(e,t){var n=t||!1;return this.api("dist.callDelivery",{orderId:e,isAuto:n},{header:{"X-Shard":"eosid="+e}})}},{key:"enquiryCancelDelivery",value:function(e){return this.api("dist.cancelDelivery",{orderId:e},{header:{"X-Shard":"eosid="+e}})}},{key:"isPromisedCookingTimeUpdated",value:function(e){return this.api("shopDelivery.isPromisedCookingTimeUpdated",{shopId:e}).then(e=>e.promisedCookingTimeUpdated)}},{key:"getDeliveryServiceEvaluation",value:function(e){return this.api("shopDelivery.getDeliveryServiceEvaluation",{orderId:e})}},{key:"getDeliveryServiceEvaluationTags",value:function(){return this.api("shopDelivery.getDeliveryServiceEvaluationTags").then(e=>{this.dispatch({actionType:v.a.GET_DELIVERY_EVALUATION_TAGS,result:e})})}},{key:"evaluateDeliveryService",value:function(e,t,n,i){return this.api("shopDelivery.evaluateDeliveryService",{orderId:e,level:t,tagIds:n,description:i})}},{key:"updateMealTakenTime",value:function(e,t){return this.api("shopDelivery.updateMealTakenTime",{shopId:e,timeInMinutes:t}).then(()=>{this.dispatch({actionType:v.a.GET_MEAL_COOKING_TIME,result:t})})}},{key:"getZeroDeliverySwitch",value:function(e){return this.api("deliveryFeeRule.getZeroDeliverySwitch",{restaurantId:e}).then(e=>{this.dispatch({actionType:v.a.SET_ZERO_DELIVERY_GRAY,result:e});return e}).catch(e=>!1)}},{key:"getDeliveryGray",value:function(e){return this.beat.packs.app.invoke("servingPack.isInGrayList",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.SET_DELIVERY_GRAY,result:e});return e}).catch(e=>{this.dispatch({actionType:v.a.SET_DELIVERY_GRAY,result:!1});return!1})}},{key:"getAllPackStatus",value:function(e){return this.beat.delivery.app.invoke("servingPack.getMelodyAllPackStatus",{shopId:e}).then(e=>{this.dispatch({actionType:v.a.UPDATE_PACK_STATUS,melodyAllPackStatus:e});return e})}},{key:"shouldRemindUpdateDeliveryArea",value:function(e){return this.api("shopDelivery.shouldRemindUpdateDeliveryArea",{shopId:e})}},{key:"enlargeDeliveryArea",value:function(e){return this.api("shopDelivery.enlargeDeliveryArea",{shopId:e})}},{key:"getShopDeliveryProfile",value:function(e){return this.api("shopDelivery.getShopDeliveryProfile",{shopId:e})}},{key:"getPromiseCookingTimeMax",value:function(e){return this.beat.shop.app.invoke("shop.getPromiseCookingTime",{restaurantId:e}).then(e=>{this.dispatch({actionType:v.a.GET_MEAL_COOKING_TIME_MAX,result:e});return e})}},{key:"getDelayCallTime",value:function(e){return this.api("shopDelivery.getDelayOrderCallTime",{shopId:e})}},{key:"updateDelayCallTime",value:function(e,t){return this.api("shopDelivery.updateDelayOrderCallTime",{shopId:e,delayOrderCall:t})}},{key:"getDelayCallTimeGraySwitch",value:function(e){return this.api("shopDelivery.getDelayOrderCallTimeGraySwitch",{shopId:e})}}]),t}(g.a.ActionCreator);m.a.module("app").service("ShopDeliveryAction",w)},ZEp4:function(e,t,n){"use strict";t.a=(()=>e=>{const t=Number(e);return isNaN(t)?e:t<=99?t:"99"})},ZMVT:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container> '},ZRaY:function(e,t,n){t.template=n("PdWR"),t.controller=n("goEG").default,t.controllerAs="$ctrl"},Za0U:function(e,t,n){"use strict";n("TJSo")},ZaDG:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container>'},Zarw:function(e,t,n){"use strict";`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text>发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }} {% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <font align="center">{{ barCode }}</font>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text>应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text>{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text>{{ consigneeName }}</text>
    </line>
    <line>
      <text>{{ userTipshandled }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text>{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text>发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }} {% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <font align="center">{{ barCode }}</font>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>已付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text>应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <separator char="-" />
    <line>
      <text>{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text>{{ consigneeName }}</text>
    </line>
    <line>
      <text>{{ userTipshandled }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text>{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},Zr5S:function(e,t,n){"use strict";t.a={"https://shadow.elemecdn.com/faas/melody/app.shop.vas.bid":"melodyPayBidUrl","https://shadow.elemecdn.com/faas/melody/app.shop.vas.afp":"AlipayFlowPipeUrl","https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.afp":"AlipayFlowPipeUrl","app.shop.vas.account":"melodyPayAccountUrl","https://shadow.elemecdn.com/faas/melody/app.shop.vas.adv":"naposBrandUrl","app.shop.vas.search":"melodyPaySearchUrl","https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.bid":"melodyPayChainBidUrl","https://shadow.elemecdn.com/faas/melody/app.chainshop.vas.adv":"naposBrandUrl","app.chainshop.vas.account":"melodyPayChainAccountUrl","https://shadow.elemecdn.com/faas/melody/app.shop.vas.das":"melodyVasDasUrl","app.shop.vas.speaker":"melodyVasBroadcastUrl"}},ZtPF:function(e,t,n){"use strict";function i(e,t,n){t.otherwise("/app"),n.html5Mode({enabled:!0,requireBase:!1})}function a(e,t,n,i,a){c.attach("start"),o.assign(t,{_:o,$:r,$location:e,$state:n,$stateParams:i,moment:p,Math:a.Math,String:a.String}),c.attach("finsh")}function s(e,t,n,i,a){e.$on("$stateChangeStart",function(){u.start(),c.route("from state: %s",t.current.name||"root")}),e.$on("$stateChangeSuccess",function(e,n,i,a,s){if(c.route("to state: %s",t.current.name),t.current.redirect){if(o.isFunction(t.current.redirect)){var r=t.current.redirect(n,i);return void t.go(r.state,r.params)}t.go(t.current.redirect)}u.done()}),e.$on("$stateChangeError",(e,...t)=>{console.error(o.last(t),!0);a.throw("stateChangeError",o.last(t));u.done()})}s.$inject=["$rootScope","$state","$stateParams","Alert","analytics"],a.$inject=["$location","$rootScope","$state","$stateParams","$window"],i.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"];var o=n("lTzO"),r=n(1),c={route:n("Fy0/")("app:route"),attach:n("Fy0/")("app:attach")},l=n(0),p=n("PJh5"),u=n("Y81h");l.module("app").config(i).run(a).run(s)},Zu7e:function(e,t,n){"use strict";n("dR3v")},"a+F3":function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s);let r=function(){function e(t,n,i,s,o){a()(this,e),this.element=n,this.rid=i.restaurantId,this.db=s,this.t=t,this.state=o}return o()(e,[{key:"$onInit",value:function(){this.element.addClass("on-init"),this._$onInit().then(()=>{this.t(()=>{this.element.removeClass("on-init")},0)})}}]),e}();r.$inject=["$timeout","$element","$stateParams","Dashboard","$state"],t.a=r},aOo4:function(e,t,n){"use strict";function i(e,t){return{scope:{imgUrl:"="},link:function(n,i,a){s(i).after('<input class="inputFileImitate" type="file">');var o=s(i).next(".inputFileImitate");o.hide(),s(i).on("click",function(){o.trigger("click")}),o.on("change",function(i){var a=new FileReader;a.onload=function(i){n.$apply(function(){n.fileread=o[0].files[0],e.uploadImage(n.fileread,"napos.order.disagreeRefundImage").then(function(e){n.imgUrl=e},function(e){t.show(e,"true")})})},a.readAsArrayBuffer(i.target.files[0])})}}}i.$inject=["UploadImage","Alert"];var a=n(0),s=n(1);a.module("app").directive("inputFileImitate",i)},aOpx:function(e,t,n){"use strict";e.exports.controller=n("aVlU"),e.exports.template=n("+BYc")},aPFe:function(e,t,n){t.template=n("+ANz"),t.controller=n("b8fF").default,t.controllerAs="$ctrl"},aUFX:function(e,t,n){"use strict";function i(e,t,n,i,a){function o(t){var n=String(e.searchKeywords);return t=t.toString(),t=t.replace(new RegExp(n,"g"),'<span class="toolbar-search-result-mark">'+n+"</span>")}function c(){return new RegExp(/^\d{1,4}$/).test(e.searchKeywords)}function u(){return new RegExp(/^\d{5,}$/).test(e.searchKeywords)}let d=(()=>{var t=s()(function*(){const t=++f;if(yield a.singleSearchResultOrders(e.searchKeywords),t!==f)return!1;e.isSearching=!1,e.searchResultRecords=t===f?p.a.getSearchResult():e.searchResultRecords,e.$digest()});return function(){return t.apply(this,arguments)}})();const h=document.querySelector(".toolbar-search");e.isFocus=!1,e.placeholder="搜索订单",e.searchKeywords="",e.searchResultRecords=[],e.isSearchResultShow=!1,e.searchTags=[],e.getTags=(()=>{a.getSearchTags().then(t=>{e.searchTags=t})}),e.tagSearch=(n=>{e.isSearchResultShow=!1;let i={name:n.name,type:n.type};t.go("app.shop.order.tag-searching",{info:r()(i)})}),e.onSearchFocus=function(){e.placeholder="输入订单号、流水号、手机号",e.isFocus=!0,e.isSearchResultShow=!0,e.getTags(),window.perf&&window.perf.sendEvent({name:"点击搜索订单",id:"SkdIbMLXb"})},e.$watch("searchKeywords",function(t,n){e.isSearching=!0,m()});const m=l()(d,300,{leading:!0});let f=0;e.selectOrder=function(n){e.isSearchResultShow=!1;t.go("app.shop.order.searching",{orderId:n})},e.searchOrders=function(){if(e.isSearchResultShow&&e.searchKeywords){e.isSearchResultShow=!1;t.go("app.shop.order.searchings",{fuzzyPhrase:e.searchKeywords})}},e.percolatorDaysn=function(e){return e=i("doubleDigit")(e),c()?o(e):e},e.percolatorPhone=function(e){return u()?o(e):e},e.percolatorId=function(e){return o(e)},e.getPaymentStatusText=function(e){return{unpaid:"尚未支付订单",failed:"支付失败订单",pending:"订单生成中"}[e]||"无效订单"},document.addEventListener("click",t=>{h.contains(t.target)||(e.placeholder="搜索订单",e.isFocus=!1,e.isSearchResultShow=!1,e.$digest())},!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("exGp"),s=n.n(a),o=n("mvHQ"),r=n.n(o),c=n("V/bW"),l=n.n(c),p=n("9UnT");i.$inject=["$scope","$state","$timeout","$filter","OrderAction"]},aVlU:function(e,t,n){"use strict";e.exports=function(){}},ab8W:function(e,t,n){t.template=n("C9Iq"),t.controller=n("nWez").default,t.controllerAs="$ctrl"},ar2r:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.decorate",{url:"/decorate",views:{"wrapper@app":n("Aub6")}}).state("app.chainshop.decorate",{url:"/decorate",views:{"wrapper@app":n("s0on")}})}])},auG8:function(e,t){e.exports="<div class=notice-bell> <div class=notice-bell-icon ng-click=$ctrl.clickedBell()> <i class=icon-notice-bell></i> <i class=notice-bell-dot ng-show=$ctrl.redCount></i> </div> </div>"},b3f5:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/diagnosis?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},b7Uk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("Warf"),c=n.n(r),l=n("uoCA"),p=n("boPf"),u=n("CfXW");let d=function(){function e(t,n,i,s){a()(this,e),u.a.hideScheduleContainer(),this.step="begin",this.isSearch=!1,this.action=n,this.resetToken=p.a.getResetToken(),this.captchCode="",this.id=l.a.getChainRestaurantId(),this.Alert=i,this.timeout=s,this.shopRoot=[],this.shopTrees=[],this.selected="",this.isSelected=!1,this.init(),this.bindModal={isShow:!1,current:{},id:""},this.reset={username:"",usernameCaptcha:"",count:60,isCountShow:!1,verifyCode:"",phoneVerifyCode:"",identity:"",name:"",bankId:""},this.nameModal={name:"",isShow:!1,current:{}},this.groupModal={name:"",isShow:!1,current:{}},this.moveModal={confirm:"",isShow:!1,current:{},search:""},this.removeModal={isShow:!1,moveModal:!1,current:{}},this.info={},p.a.onChangeWithScope(this.init.bind(this),t)}return e.$inject=["$scope","OrgmanageAction","Alert","$timeout"],o()(e,[{key:"init",value:function(){this.shopRoot=p.a.getShopRoot(),this.shopRoot[0]&&this.shopRoot[0].childList&&(this.shopTrees=this.shopRoot,this.shopTrees[0].visible=!0),this.resetToken=p.a.getResetToken()}},{key:"openGroup",value:function(e){e.visible?e.visible=!1:e.childList&&e.childList.length>0?e.visible=!0:e.chainShop.hasChild&&this.action.getChildChainshops(e.chainShop.id,"CHAIN")}},{key:"searchShop",value:function(){this.search?this.action.queryChildChainShops(this.id,this.search,"CHAIN").then(e=>{e.length>0?(this.searchResult=e,this.isSearch=!0):this.Alert.show("查询结果不存在")}).catch(e=>{this.Alert.show(e.message,!0)}):this.isSearch=!1}},{key:"openModal",value:function(e,t){this[e].isShow=!0,this[e].current=t,"moveModal"===e&&this.action.getChainShopTree(this.id,t.chainShop.restaurantUnitType,t.chainShop.id,"SPECIAL").then(e=>{this.moveTree=e})}},{key:"resetModal",value:function(e){this[e].ids&&(this[e].ids=""),this[e].name="",this[e].current={},this[e].isShow=!1,this[e].id="",this[e].search="",this[e].confirm="",this.moveTree=[]}},{key:"cancelVerify",value:function(){this.resetModal("bindModal"),this.step="begin",this.reset.username="",this.reset.usernameCaptcha="",this.reset.verifyCode="",this.reset.phoneVerifyCode="",this.reset.identity="",this.reset.name="",this.reset.bankId=""}},{key:"editName",value:function(){let e={id:this.nameModal.current.chainShop.id,name:this.nameModal.name};this.action.updateGroupShop(e,"CHAIN").then(()=>{this.nameModal.current.chainShop.name=this.nameModal.name;this.resetModal("nameModal");this.action.getShopRoot(this.id,"CHAIN")}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"addGroup",value:function(e,t){this.action.createGroupShop(e.chainShop.id,t,"CHAIN").then(()=>{this.resetModal("groupModal");this.action.getShopRoot(this.id,"CHAIN");this.Alert.show("添加成功",!1);this.isSearch=!1}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"removeGroup",value:function(e){this.action.deleteGroupShop(e.chainShop.id,"CHAIN").then(()=>{this.resetModal("removeModal");this.action.getShopRoot(this.id,"CHAIN");this.Alert.show("删除成功",!1);this.isSearch&&c()(this.searchResult,e)}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"moveGroup",value:function(e){this.action.moveGroupShop(e.chainShop.id,this.selected.id).then(()=>{this.resetModal("moveModal");this.action.getShopRoot(this.id,"CHAIN");this.Alert.show("修改成功",!1);this.isSearch=!1}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"onChange",value:function(e){this.isSelected?this.selected===e?(e.checked=!1,this.selected="",this.isSelected=!1):(this.selected.checked=!1,this.selected=e):(this.isSelected=!0,this.selected=e)}},{key:"bindShop",value:function(e){this.action.startBindShopProcess(e.chainShop.id,"CHAIN").then(()=>{this.resetToken=p.a.getResetToken();this.openModal("bindModal",e)}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"confirmShop",value:function(e){this.action.getKeeperByShopId(this.resetToken,e).then(()=>{this.info=p.a.getInfo();this.step="second"}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"verifyPhone",value:function(e,t){this.action.checkBindShopVerifyCode(this.resetToken,e,t).then(e=>{!1===e.success?(e.base64Code&&(this.captchCode=e.base64Code),this.Alert.show(e.errorMessage,!0)):this.step="success"})}},{key:"verifyAccount",value:function(e,t,n){this.action.checkBindShopIdentityInfo(this.resetToken,e,t,n).then(()=>{this.step="success"}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"sendBindShopVerifyCode",value:function(){this.action.sendBindShopVerifyCode(this.resetToken,!0).then(()=>{this.countDown()}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"updateCaptcha",value:function(){this.action.getBindShopCaptcha(this.resetToken).then(e=>{this.captchCode=e}).catch(e=>{this.Alert.show(e.message,!0)})}},{key:"countDown",value:function(){60===this.reset.count&&(this.reset.isCountShow=!0),0!==this.reset.count?(this.reset.count--,this.timeout(()=>{this.countDown()},1e3)):(this.reset.isCountShow=!1,this.reset.count=60)}}]),e}();t.default=d},b8fF:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/traffic?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},bIYs:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${i.melodyDecorateUrl}`;var s=a.a.schedule(this.src);a.a.watchSrc(e,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},bW9i:function(e,t,n){"use strict";function i(){return function(e){s.locale("zh-cn");try{if("number"!=typeof e)throw"time input for countdown must be Number"}catch(e){console.error(e)}e*=1e3;var t=s().get("millisecond"),n=s.duration(e-t,"milliseconds");return n.days()+"天"+n.hours()+"小时"+n.minutes()+"分钟"}}var a=n(0),s=n("PJh5");a.module("app").filter("countdown",i)},bWXe:function(e,t,n){t.template=n("KAZN"),t.controller=n("7usz").default,t.controllerAs="vm"},bgQL:function(e,t,n){"use strict";function i(e,t){function n(e){var t={consignee:{},delivery:null,detail:{},general:{},id:e.id,misc:null,refund:{},restaurantId:e.restaurantId,state:{},trace:{},traceView:null,user:{}};if(t.consignee={name:e.consigneeName,address:e.consigneeAddress,distance:e.distance,geoLocation:e.consigneeGeoLocation,phones:e.consigneePhones,times:e.times},t.detail={total:e.goodsTotal,accounting:{discount:e.discount,hongbao:e.hongbao,receipt:e.payAmount,receivable:e.receivable,total:e.goodsTotal},groups:r.copy(e.groups),preferential:{dataCorrect:e.dataCorrect,elemePart:e.elemePart,restaurantPart:e.restaurantPart}},t.general={bookedTime:e.bookedTime,createdTime:e.activeTime,daySn:e.daySn,invoiceTitle:e.invoiceTitle,isBooked:e.booked||!!e.bookedTime,isInvoiced:e.invoiced,payment:e.payment,remark:e.remark},t.refund={records:e.refundRecords,remainingProcessTime:e.remainingProcessTime,status:e.refundStatus},t.state={invalidRemark:e.invalidRemark,invalidType:e.invalidType,paymentStatus:e.paymentStatus,status:e.status,tips:e.tips},e.hongbao||e.activities&&e.activities.length||e.deliveryFee||e.deliveryFeeTotal){let e=l(t.detail.groups,e=>"EXTRA"===e.type);e||t.detail.groups.push({type:"EXTRA",name:"其他费用",items:[]})}var n=t.detail.groups.filter(e=>"EXTRA"===e.type),i=n[0];if(e.hongbao&&i.items.push({name:"使用红包",quantity:1,price:-1*Math.abs(e.hongbao)}),e.activities&&e.activities.length&&void 0===e.booked){let t=e.activities.map(e=>{e.quantity=1;e.price=e.amount;return e});i.items=i.items.concat(t)}return(e.deliveryFee||e.deliveryFeeTotal)&&i.items.push({name:"配送费",quantity:1,price:e.deliveryFee||e.deliveryFeeTotal}),t}return{getOrderSummary:a,orderStatusSet:o,getOldOrder:n}}function a(e){var t=[];return e.forEach(function(e){s(e)&&e.items.forEach(function(e){t.push(e),e.additions.length&&e.additions.forEach(function(e){var n=e;n.extra=!0,t.push(n)})})}),t}function s(e){return"NORMAL"===e.type||("DISCOUNT"https://shadow.elemecdn.com/faas/melody/===e.type?e.items.filter(e=>0===e.price).length>0:void 0)}function o(e,t,n,i){if("NO_REFUND"!==n)switch(n){case"APPLIED":i.stateUI.toRefund=!0;break;case"REJECTED":case"ARBITRATING":i.stateUI.refunding=!0;break;case"SUCCESSFUL":case"FAILED":i.stateUI.refunded=!0}else{switch(t){case"UNPAID":case"FAILED":case"PENDING":i.stateUI.paymentInvalid=!0;break;case"SUCCESS":i.stateUI.paymentInvalid=!1}switch(e){case"UNPROCESSED":i.stateUI.processing=!0;break;case"VALID":i.stateUI.processed=!0;break;case"INVALID":i.stateUI.invalid=!0}}}i.$inject=["$state","clientVersion"];var r=n(0),c=n("lTzO"),l=c.find;r.module("app").factory("orderCardService",i)},bmUn:function(e,t,n){"use strict";n("NIhd")},boPf:function(e,t,n){"use strict";function i(e){return e.childList.reduce((e,t)=>[...e,...i(t)],[e])}function a(e){e.map(e=>{e.childList?a(e.childList):e.childList=[]})}var s=n("Zx67"),o=n.n(s),r=n("Zrlr"),c=n.n(r),l=n("wxAW"),p=n.n(l),u=n("zwoO"),d=n.n(u),h=n("Pf15"),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("SLs8");let y=function(e){function t(e){c()(this,t);var n=d()(this,(t.__proto__||o()(t)).call(this,e));return n.shopRoot=[],n.shopTrees=[],n.queryShop=[],n.resetToken={},n.info={},n}return m()(t,e),p()(t,[{key:"getShopRoot",value:function(){return this.shopRoot}},{key:"getChildChainshops",value:function(){return this.shopTrees}},{key:"queryChildChanshops",value:function(){return this.queryShop}},{key:"getResetToken",value:function(){return this.resetToken}},{key:"getInfo",value:function(){return this.info}},{key:"getHandlers",value:function(){return{[v.a.FETCH_SHOP_ROOT]:e=>{this.shopRoot[0]=e.shopRoot;a(this.shopRoot)},[v.a.GET_CHILD_CHAINSHOPS]:e=>{i(this.shopRoot[0]).forEach(t=>{t.chainShop.id===e.childList[0].chainShop.parentId&&(t.childList=e.childList,a(t.childList),t.visible=e.visible)})},[v.a.QUERY_CHILD_CHAINSHOPS]:e=>{this.queryShop=e.queryShop},[v.a.GET_TOKEN]:e=>{this.resetToken=e.token},[v.a.GET_INFO]:e=>{this.info=e.info}}}}]),t}(g.a.Store);t.a=new y},br82:function(e,t,n){e.exports.controller=n("aUFX").default,e.exports.template=n("kBmj")},c6lB:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE1cHgiIGhlaWdodD0iMTBweCIgdmlld0JveD0iMCAwIDE1IDEwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMiAoMjk3NTMpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmRvd25faXRlbTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLnq57ku7fmjpLlkI0xLjVf5oiR5pyJ55aR6Zeu5LyY5YyWIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzIzLjAwMDAwMCwgLTMwNi4wMDAwMDApIiBmaWxsPSIjRUVFRUVFIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MC4wMDAwMDAsIDEzMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgMTU2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjcuNDIxMjI1LDIyLjAyNTk3OTcgTDE2Ny40MjEyMjUsMTQuMjk2NDg1NSBMMTY1LjE0OTcyLDE0LjI5NjQ4NTUgTDE2NS4xNDk3MiwyNC4xMzk2NzA4IEwxNjUuMzA2NTM1LDI0LjEzOTY3MDggTDE2NS4zMDY1MzUsMjQuMjk3NDg0IEwxNzUuMTQ5NzIsMjQuMjk3NDg0IEwxNzUuMTQ5NzIsMjIuMDI1OTc5NyBMMTY3LjQyMTIyNSwyMi4wMjU5Nzk3IFoiIGlkPSJkb3duX2l0ZW0iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3MC4xNDk3MjAsIDE5LjI5Njk4NSkgcm90YXRlKC00NS4wMDAwMDApIHRyYW5zbGF0ZSgtMTcwLjE0OTcyMCwgLTE5LjI5Njk4NSkgIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"c9d/":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},cRQw:function(e,t,n){"use strict";function i(e,t){function n(){let t=o.a.getAutoConfirm(s.a.getCurrentProfile().username);e.autoConfirm=t[0]}function i(){e.unprocessedOrders=a.a.getUnprocessedOrders()}n(),o.a.onChangeWithScope(n),i(),a.a.onChangeWithScope(i),e.getRestaurant=o.a.findById.bind(o.a),e.printOrder=(e=>t.printOrder(e,o.a.getRestaurantById(e.restaurantId))),e.confirmPrintOrder=(e=>t.confirmPrintOrder(e,o.a.getRestaurantById(e.restaurantId))),e.invalidateOrder=((e,n,i)=>t.invalidateOrder(e,n,i)),e.copyOrder=(e=>{t.copyOrder(e,o.a.getRestaurantById(e.restaurantId))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("9UnT"),s=n("t4A1"),o=n("RG6k");i.$inject=["$scope","OrderAction"]},cZ1l:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},cdRO:function(e,t,n){"use strict";n("FPbx"),n("PKdr"),n("kGRD"),n("Kvte"),n("CHlu"),n("Ipc/"),n("LOPs"),n("0h+w"),n("dvNW"),n("Llrn"),n("zwM3"),n("Qlrj"),n("ued3"),n("AIFM"),n("N/tJ"),n("7Vjl"),n("WeoZ"),n("LA4R"),n("3TYZ"),n("g8vz")},cddr:function(e,t,n){t.template=n("NPQV"),t.controller=n("eQum").default,t.controllerAs="$ctrl"},cjux:function(e,t,n){"use strict";function i(e,t,n,i){return{uploadImage:function(a,o){var r=i.defer();if(!(a.size>5e6)){var c=new FormData;c.append("ncp","1.0.0"),c.append("id",s.v4()),c.append("type",o),c.append("file",a);var l=new XMLHttpRequest;return l.open("POST",t.app.server+"upload?appName="+t.app.name+"&appVersion="+t.app.version+"&ksid="+e.get("query").ksid,!0),l.onload=function(){var e=JSON.parse(this.responseText).result.imageUrl;r.resolve(e)},l.onerror=function(){var e=JSON.parse(this.responseText).error;r.reject(e)},l.send(c),r.promise}n.show("请上传小于5M的图片！",!0)}}}i.$inject=["beat","config","Alert","$q"];var a=n(0),s=n("RJtx");a.module("app").factory("UploadImage",i)},ckcS:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("ilQr");let c=function(){function e(t,n,i){a()(this,e),this.$scope=t,this.$state=n,this.NoticeAction=i,this.noticeList=r.a.getNoticeList()}return o()(e,[{key:"$onInit",value:function(){r.a.onChangeWithScope(()=>{this.noticeList=r.a.getNoticeList()},this.$scope)}},{key:"clickTitle",value:function(e){this.$state.go("app.shop.notice",{detail:e})}}]),e}();c.$inject=["$scope","$state","NoticeAction"],t.a={template:n("9jWW"),controller:c}},cnCt:function(e,t,n){e.exports="<div class=toolbar-notice-container> <div class=toolbar-notice ng-click=$ctrl.clickedBell()> <img src="+n("QRsZ")+" ng-if=!$ctrl.redCount> <img src="+n("65PF")+" ng-if=$ctrl.redCount> 通知 </div> </div> <div class=seperate></div> "},cnR4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n("f4CT");let y=function(e){function t(e,n){o()(this,t);var i=p()(this,(t.__proto__||a()(t)).call(this));return i.browserInvoke=e.browser.invoke,i.$state=n,i}return t.$inject=["beat","$state"],d()(t,e),c()(t,[{key:"getCurrentProfile",value:function(){return this.browserInvoke("pc.profile.getCurrentProfile").then(e=>{this.dispatch({actionType:v.a.LOAD_CURRENT_PROFILE,currentProfile:e});return e}).catch(()=>{var e={username:"not_real_exist",mobile:"138812341234",imageUrl:"../../../stimg0.tuicool.com/BFFR7v.png"/*tpa=http://stimg0.tuicool.com/BFFR7v.png*/};this.dispatch({actionType:v.a.LOAD_CURRENT_PROFILE,currentProfile:e});return e})}},{key:"getProfiles",value:function(){return this.browserInvoke("pc.profile.getProfiles").then(e=>{this.dispatch({actionType:v.a.LOGIN_GET_PROFILES,profiles:e});return e})}},{key:"addProfile",value:function(e){return this.browserInvoke("pc.profile.addProfile",{addInfo:e})}},{key:"removeProfile",value:function(e){return this.browserInvoke("pc.profile.removeProfile",{id:e})}},{key:"removeCurrentProfile",value:function(){return this.browserInvoke("pc.profile.removeCurrentProfile")}},{key:"updateCurrentProfile",value:function(e){return this.browserInvoke("pc.profile.updateCurrentProfile",{updateInfo:e})}},{key:"launchProfile",value:function(e){return this.browserInvoke("pc.profile.launchProfile",{id:e})}}]),t}(g.a.ActionCreator);m.a.module("app").service("LoginProfileAction",y)},cphT:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAAjhJREFUaAXtWkmOgzAQNGTPIcshh/wg//9RzrlEiZR9GRWSRwhh4ylITwxtCUFs91JVbWSsJLvd7m061PrAOp1OOwH5dDqZtBNIcyAVcI6MVj6qwq2UNQdKFc6R0cpHVbiVsuZAqcI5Mlr52DmFs48HRsrtdus1w0bd16o+WKrsN5uNSZLEF6J0jFL49XqVOpPsZHOgAL/f//8JzeZAAWbZbbICns8n5Y4CzLJLZegwYnOgAH+DwmwO0QIWLWlHlYl2a0kH0k2VNMtuYE5B0zq3hkUBf4PCbA5USbPsBtVq4CTRtzTLbiCWoGlsDtEqzFYZBThIgg9PEgXMBmuSAzYHSmE2WLSA2RdGtICbTFzaF1XSg8HAm2eapgaXq9Udh9/xeOxy7+13Z+UxWywWptfrOWeAkNFo5BzHWL/vPj/EmO+QD+Or1crp3zfgjuqxAqD1em2Ox6O5XC7mdrsZu66Hw6GZTCYG9+v1aoovOKg7m82yE8f7/f5rZ8PhJBLq4Y7d1Pl8zobwG3Fhu1wuvYRZX2X3BH9q8bFZZlTs2+/3WeJICpdtSPhwOGTA0QdlkbCtDpABwh6PR2YC5QA2vxwwBxds4Hs+n1v3f77j6JdSuBipCNSOI0mo4WoAVkV21Xp3+Xb1U2vY5SyGfgUcg0p1clSF67AXg60qHINKdXJUheuwF4NtIzutOts9aZK0pKUZl46nCkszLh1PFZZmXDqeKizNuHQ8VViacel42day6o+c0kl9Mt4Pwda9zu9HiUQAAAAASUVORK5CYII="},cqo2:function(e,t){e.exports='<login-topbar ng-if=!isOverV505Client></login-topbar> <div class=login> <div class=login-box> <div class=select-profile>选择账号</div> <div class=login-box-shops> <label for="{{profile.id}}" class=login-box-shop ng-repeat="profile in profiles"> <img ng-src="{{profile.imageUrl || placeholder}}" alt=""> <div class=login-box-shop-text> <div class=shop-text-left> <span>{{getShopNames(profile.shops)}}</span> <span>{{profile.username}}</span> </div> <input type=radio id="{{profile.id}}" name=multishop ng-model=radio.selected ng-value=profile.id ng-if=!profile.isUsing> <span ng-if=profile.isUsing>已登录</span> </div> </label> </div> <button class=login-box-form-button ng-disabled=!radio.selected ng-click=login()>确认登录</button> </div> <div class=login-footer> <span ui-sref=login>其它账号登录</span> </div> </div> '},crbQ:function(e,t,n){"use strict";function i(e,t,n,i){function a(e,n){return n?(r=n.basis,c=n.detail,p=n.feature,s.a.resolve()):t.shop.app.invoke("queryShop.getShopView",{shopId:e}).then(function(e){r=e.basis,c=e.detail,p=e.feature})}function o(e){return t.shop.app.invoke("queryShop.getShopDelivery",{restaurantId:e}).then(function(t){return l=t,e})}var r,c,l,p;return{initRestaurantDelivery:o,init:function(e,t){return a(e,t).then(()=>o(e))},getCurrent:function(){return r},getCurrentDetail:function(){return c},getCurrentDelivery:function(){return l},getCurrentFeature:function(){return p},updateCurrentDetail:function(e){return t.shop.app.invoke("setShop.updateShopDetail",{shopId:r.id,update:e}).then(function(){return c=e,a(r.id)})},syncCurrentDelivery:function(e){l=l||{},e.hasOwnProperty("areas")&&(l.areas=e.areas),e.hasOwnProperty("location")&&(l.location=e.location)},updateCurrentDelivery:function(e){return t.shop.app.invoke("setShop.updateShopDelivery",{shopId:r.id,update:e}).then(function(){return l=e,a(r.id)})},updateCurrentFeature:function(e){return t.shop.app.invoke("setShop.updateShopFeature",{shopId:r.id,update:e}).then(function(){return p=e,a(r.id)}).catch(function(e){i.handleError(e),a(r.id)})},updateCurrentRestaurantBusyLevel:function(e){return r.busyLevel=e,t.shop.app.invoke("setShop.updateShopBusyLevel",{restaurantId:r.id,busyLevel:e}).then(function(e){r.totalStatus=e})}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("//Fk"),s=n.n(a);i.$inject=["$rootScope","beat","Alert","Handle"],n(0).module("app").factory("Restaurant",i)},dR3v:function(e,t,n){"use strict";function i(e){e.state("https://shadow.elemecdn.com/faas/melody/app.shop.bill",{url:"/bill",views:{"wrapper@app":s},data:{pageId:"365"}})}i.$inject=["$stateProvider"];var a=n(0),s=n("vboK");a.module("app").config(i)},dUCe:function(e,t,n){"use strict";function i(e,t,n,i,r){"ngInject";var c=decodeURIComponent(t.path),l="undefined"!==c&&c?c:"unprocessed";this.src=`${n.melodyOrderUrl}/app/processing/${l}?shopId=${t.restaurantId}`;var p=o.a.schedule(this.src);o.a.watchSrc(r,p.iframe),o.a.hideAppWrapper(),a.container.broadcast("order.switchToProcessing",{}),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{var n=s.a.isChain();var i=t.split("/")[3];if(n)if("app.shop.order.processing"===e.current.name)e.go("app.shop.order.processing",{path:i});else{if(!s.a.getChainShopGray())return void e.go("app.chainshop.ordercarry");e.go("app.chainshop.order.processing",{path:i})}else e.go("app.shop.order.processing",{path:i})}),r.$on("$destroy",()=>{a.container.off("https://shadow.elemecdn.com/faas/melody/path.sync")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("RG6k")),o=n("CfXW");i.$inject=["$state","$stateParams","config","OrderAction","$scope"]},dZDq:function(e,t,n){e.exports="<div class=card-order ng-class=\"{\n    'card-payment-invalid': stateUI.paymentInvalid &&\n                            showPaymentState &&\n                            order.paymentStatus==='ONLINE',\n    'card-gray': (!stateUI.isRefund && stateUI.invalid) ||\n                  stateUI.refunded,\n    'card-multi': stateUI.isMulti,\n    'card-red': (!stateUI.isRefund && stateUI.processing) ||\n                 stateUI.toRefund,\n    'card-blue': (!stateUI.isRefund && stateUI.processed) ||\n                  stateUI.refunding\n  }\"> <div class=order-content> <div class=shop-name>{{::restaurant.name}}</div> <div class=\"payment-banner mb10\" ng-show=\"\n        order.payment !== 'CASH' &&\n        (order.paymentStatus==='UNPAID' ||\n        order.paymentStatus==='FAILED' ||\n        order.paymentStatus==='PENDING')\"> <span class=\"icon icon-error\"></span> <span ng-bind=getPaymentStatusText(order.paymentStatus)> </span> </div> <div class=order-summary> <div class=order-daysn ng-class=\"::{daysn: order.daySn > 99}\"> {{::order.daySn | doubleDigit}} </div> <div class=order-summary-middle> <div class=mb6> <div class=\"color-gray mb4 horizontal center\"> <span>下单时间{{::order.activeTime * 1000 | date: 'MM-dd HH:mm' }}</span> <span class=\"ml8 mr6 fs12\">|</span> <span>订单号: {{::order.id}}</span> </div> <div class=\"mt0 mb8 horizontal center\" ng-if=\"::order.tips.length || order.booked || order.isUnprocessedHosting || (order.delivery && order.delivery.cookingTime)\"> <span ng-show=order.booked class=\"tag tag-book\"> <img src="+n("B7P+")+' alt=钟表> 预订单，预计 {{::order.bookedTime * 1000 | date: \'HH:mm\'}} 送达 </span> <span ng-show="!order.booked && (order.delivery && order.delivery.cookingTime)" class="tag tag-book"> <img src='+n("B7P+")+' alt=钟表> 请务必于{{::order.delivery.cookingTime * 1000 | date: \'HH:mm\'}} 前出餐 </span> <span ng-if="::order.booked && (order.tips.length || order.followed)" class="ml8 mr8">|</span> <span class="tag tag-primary" ng-show=order.followed m-tip=true m-dir=bottom words=该用户为收藏用户> 收藏用户 </span> <span class="tag tag-primary" ng-repeat="https://shadow.elemecdn.com/faas/melody/tip in order.tips" m-tip=true m-dir=bottom words="{{::tip.description}}"> {{::tip.name}} </span> <span ng-if="order.isUnprocessedHosting && !stateUI.invalid" class="color-red ml5"> 订单无法配送，请关注！ </span> </div> </div> <h1 class=order-user-address> {{::order.consigneeAddress}} <span>( {{::order.distance}} )</span> </h1> <p class=phone> <span class=mr8>{{::order.consigneeName}}</span> <span ng-repeat="phone in order.consigneePhones track by $index" class=mr8> {{::phone}} </span> <span class=count ng-if="::order.times > 0"> ( 第{{::order.times}}次下单 ) </span> </p> <div class=order-summary-food ng-show=!isDetailShow> <span class=mr10 ng-repeat="summary in orderSummary"> <span ng-show=summary.extra>+(配) </span> {{::summary.name}} × {{::summary.quantity}} </span> </div> <img class=order-state-img ng-src="{{getOrderStatus().src}}" ng-show=getOrderStatus().src alt="{{getOrderStatus().status}}"> </div> <div class=price>{{::order.income<0?\'-\':\'\'}}{{::Math.abs(order.income) | currency: \'￥\'}}</div> </div> <div class=order-detail ng-show=isDetailShow> <ul class=order-detail-groups ng-repeat="group in order.groups" ng-class="::{\n          \'hide\': !showDiscountGroup(group)\n        }"> <li class=order-detail-des>【{{::group.name}}】</li> <li ng-repeat="item in group.items" ng-hide="group.type === \'discount\' && item.price !== 0"> <div class=order-detail-list> <span>{{::item.name}}</span> <span>× {{::item.quantity}}</span> <span>{{::(item.price * item.quantity) | currency: \'￥\'}}</span> </div> <ul class=order-detail-addition ng-show=item.additions.length> <li class=order-detail-list ng-repeat="addition in item.additions"> <span>+(配) {{::addition.name}}</span> <span>× {{::addition.quantity}}</span> <span>{{(addition.price * addition.quantity) | currency: \'￥\'}}</span> </li> </ul> </li> </ul> <ul class="order-detail-groups last" ng-if="::order.packageFee > 0"> <li class=order-detail-des>【其他】</li> <li> <div class=order-detail-list> <span>餐盒费</span> <span></span> <span>￥{{::order.packageFee | number: 2}}</span> </div> </li> </ul> <ul class=order-detail-groups> <li> <div class=order-detail-list> <span>订单总额</span> <span></span> <span class="fs16 fwb"> {{::order.goodsTotal | currency: \'￥\'}} </span> </div> </li> <li ng-show="order.deliveryCost > 0"> <div class=order-detail-list> <span>配送费</span> <span></span> <span>{{::order.deliveryCost | currency: \'￥\'}}</span> </div> </li> <li ng-show="order.deliveryCost === 0 &&  order.merchantDeliverySubsidy"> <div class=order-detail-list> <span> 分担用户配送费 <div class=order-detail-icon>? <div class=order-activity-detail> <span class=pop-arrow></span> <div class=order-activity-container> <ul class=content-lists> <li class="flex justify-space-between"> <span>饿了么配送服务共收取</span> <span>{{::order.customerActualFee+order.merchantDeliverySubsidy  | currency: \'￥\'}}</span> </li> </ul> <div class=detail> <ul class=order-activity-explicit> <li class=gray>其中</li> <li> <div>顾客承担</div> <div>{{::order.customerActualFee | currency: \'￥\'}}</div> </li> <li> <div>餐厅承担</div> <div>{{::order.merchantDeliverySubsidy | currency: \'￥\'}}</div> </li> </ul> </div> </div> </div> </div> </span> <span></span> <span>{{::order.merchantDeliverySubsidy | currency: \'-￥\'}}</span> </div> </li> </ul> <ul class=order-detail-groups ng-if="::order.serviceRate > 0 || order.activities.length > 0"> <li ng-if="::order.activities.length > 0"> <div class=order-detail-list> <span> 餐厅承担活动成本 <div class=order-detail-icon>? <div class=order-activity-detail> <span class=pop-arrow></span> <div class=order-activity-container> <ul class=content-lists> <li ng-repeat="activity in order.activities"> <div class=fwb>{{::activity.name}}</div> <div>{{::Math.abs(activity.price) | currency: \'-￥\'}}</div> </li> </ul> <div class=detail> <div class="row justify-space-between color-blue"> <div>共计</div> <div> {{::Math.abs(order.activityTotal) | currency: \'-￥\'}} </div> </div> <ul class=order-activity-explicit> <li class=gray>其中</li> <li> <div>饿了么承担</div> <div>{{::order.elemePart | currency: \'-￥\'}}</div> </li> <li> <div>餐厅承担</div> <div>{{::order.restaurantPart | currency: \'-￥\'}}</div> </li> </ul> </div> </div> </div> </div> </span> <span></span> <span>{{::order.restaurantPart | currency: \'-￥\'}}</span> </div> </li> <li ng-if="::order.serviceRate > 0"> <div class=order-detail-list> <span>服务费（{{::order.serviceRate | number: 2}}%）</span> <span></span> <span>{{::Math.abs(order.serviceFee) | currency: \'-￥\'}}</span> </div> </li> </ul> <ul class=order-detail-groups> <li> <div class=order-detail-list> <span>本单收入</span> <span></span> <span>{{::order.income<0?\'-\':\'\'}}{{::Math.abs(order.income) | currency: \'￥\'}}</span> </div> </li> </ul> <div class="order-detail-groups blue-bg" ng-show="::order.remark || order.invoiced"> <div class=indent ng-if=::order.remark> <span class=mr15>备注留言</span> <span class=order-list-des>{{::order.remark}}</span> </div> <div class=indent ng-if=::order.invoiced> <span class=mr15>发票抬头</span> <span class=order-list-des>{{::order.invoiceTitle}}</span> </div> </div> <div class=order-delivery-status> <div class=border-left></div> <ul class=order-delivery-status-lists> <li ng-repeat="traceView in order.orderTraceView" ng-class="{\'active\': $index == 0}"> <div class=delivery-icon> <span></span> </div> <div> {{traceView.time.message}} {{traceView.status.message}} {{traceView.description.message}} {{traceView.description.phone}} </div> </li> </ul> </div> </div> <div class=order-delivery ng-show="order.orderTraceTime && !isDetailShow"> <span class=mr5 ng-bind=order.orderTraceTime.message ng-style="{\'color\': order.orderTraceTime.color}"> </span> <span ng-style="{\'color\': order.orderTraceStatus.color}" class=order-delivery-status ng-show=order.orderTraceStatus.message> {{::order.orderTraceStatus.message}} </span> <span ng-style="{\n          \'color\': order.orderTraceDescription.color\n        }"> <span class=mr5> {{::order.orderTraceDescription.message}} </span> <span class=mr5 ng-show=order.orderTraceDescription.phone> {{::order.orderTraceDescription.phone}} </span> </span> <span> <a class="span-link ml10" ng-show="order.delivery && order.delivery.feedbackStatus === \'UNCOMMENT\'" ng-click="isEvaluateRiderShow = true"> 评价骑手 </a> <a class="span-link ml10" ng-show="order.delivery && order.delivery.feedbackStatus === \'COMMENTED\'" ng-click=getDeliveryServiceEvaluation(order.id)> {{isGettingDeliveryServiceEvaluation?\'加载中\':\'查看您的评价\'}} </a> </span> </div> <div class=order-list ng-class="{\'show-detail\': isDetailShow}" ng-show="::!stateUI.isRefund && (stateUI.processing || stateUI.processed)"> <div class=mb15 ng-show="::!stateUI.isRefund &&\n                 stateUI.processing &&\n                 canEnquiry &&\n                 (isShowCallDelivery || isShowCallDeliveryPrint) &&\n                 statusCanEnquiry(order)"> <span class=color-aaa> 使用饿了么配送 (您需要支付 <span class=color-blue>{{order.delivery.deliveryFee.toFixed(2)}} 元</span> ) </span> </div> <div class=mb15 ng-show="isShowCallDelivery &&\n                 stateUI.processed &&\n                 canEnquiry &&\n                 isShowCallDelivery &&\n                 statusCanEnquiry(order)"> <span class=color-aaa> 您可以使用饿了么配送 (您需要支付 <span class=color-blue>{{order.delivery.deliveryFee.toFixed(2)}} 元</span> ) </span> </div> <a class="btn btn-primary mr5" ng-click=callDelivery(order) ng-show="isShowCallDelivery && statusCanEnquiry(order)" ng-track="{{getPageName()}}-delivery" ng-autodisable ng-autodisable-class=deliver-btn-loading> 呼叫配送 </a> <a class="btn btn-default mr5" ng-click=cancelDelivery(order) ng-show="(order.orderTraceButton === \'CANCEL\' || deliverySent) &&\n               order.status !== \'INVALID\' &&\n               order.status !== \'REFUNDING\'" ng-track="{{getPageName()}}-delivery-cancel" ng-autodisable ng-autodisable-class=deliver-btn-loading>取消配送</a> <button class="btn btn-primary mr5" ng-click=confirmPrintDelivery(order) ng-show="isShowCallDeliveryPrint && statusCanEnquiry(order)" ng-track="{{getPageName()}}-confirm-printDelivery" ng-autodisable ng-autodisable-class=disabled> 接单打印并呼叫配送 </button> <button class="btn btn-primary mr5" ng-click=confirmPrint(order) ng-show="::!stateUI.isRefund && stateUI.processing" ng-track="{{getPageName()}}-confirm-print" ng-autodisable ng-autodisable-class=disabled> 接单并打印 </button> <a class="btn btn-primary mr5" ng-click=setHostingOrderSelfProcess(order) ng-show="!order.delivery.deliveryBySelfOnCancelled &&\n                 order.isUnprocessedHosting &&\n                 !stateUI.invalid"> 自行配送 </a> <a class="btn btn-primary mr5" ng-click=setDeliveryBySelf(order) ng-show="!order.delivery.deliveryBySelfOnCancelled &&\n                 order.delivery.canDeliveryBySelf &&\n                 !(order.isUnprocessedHosting && !stateUI.invalid)"> 自行配送 </a> <a class="btn btn-primary mr5" ng-click=deliveryBySelfOnCancelled(order) ng-show="order.delivery.deliveryBySelfOnCancelled &&\n                 !order.delivery.canDeliveryBySelf &&\n                 !stateUI.invalid"> 自行配送 </a> <a class="btn btn-primary mr5" ng-click=print(order) ng-show="::!stateUI.isRefund && stateUI.processed" ng-track="{{getPageName()}}-print" ng-autodisable ng-autodisable-class=disabled>打印</a> <a class="btn btn-default mr5" ng-show="!stateUI.isRefund &&\n                (stateUI.processing || stateUI.processed) &&\n                !order.delivery.noMoreDeliveryOnCancelled" ng-click="modals.invalid.isShow = true" ng-track="{{getPageName()}}-openInvalid">设为无效</a> <a class="btn btn-default mr5" ng-click=noMoreDeliveryOnCancelled(order) ng-show="!stateUI.isRefund &&\n                (stateUI.processing || stateUI.processed) &&\n                order.delivery.noMoreDeliveryOnCancelled"> 不再配送 </a> <a class="btn btn-default mr5" ng-show="::(!stateUI.isRefund && stateUI.processing) ||\n                 (!stateUI.isRefund && stateUI.processed)" ng-click="copy(order, restaurant)" ng-track="{{getPageName()}}-copy">复制</a> </div> </div> <div class=order-switch ng-click=toggleDetail(order) ng-track="{{getPageName()}}-toggle-{{isDetailShow?\'close\':\'open\'}}"> <span>{{order.activeTime | getTimeAgo}}</span> <span ng-class="{\n      \'icon-arrow-up\': isDetailShow,\n      \'icon-arrow-down\': !isDetailShow\n      }"></span> </div> <div class=order-refund ng-show="order.refundStatus !== \'NO_REFUND\'"> <p class=title> <span>{{refundingState[order.refundStatus]}}</span> <span ng-show="\n          order.refundStatus !== \'SUCCESSFUL\' &&\n          order.refundStatus !== \'FAILED\'"> 剩余处理天数：{{order.remainingProcessTime | countdown}} </span> </p> <div ng-repeat="record in order.refundRecords"> <p class=order-refund-des ng-class="{blue: stateUI.refunding, red: stateUI.toRefund}"> <span>● {{refundingState[record.toStatus]}} </span> <span> {{::record.createdTime * 1000 | date: \'y-MM-dd HH:mm:ss\'}} </span> </p> <div class=order-refund-static> <p>原因详述： {{record.reason}}</p> <img class=img-des src=# ng-show=record.imageUrl.length ng-class="{\n            \'gray\': (!stateUI.isRefund && stateUI.invalid) ||\n            stateUI.refunded\n          }" ng-src="{{record.imageUrl}}" alt=原因图片> </div> </div> <div class=order-refund-buttons> <a class="btn btn-success mr4" href=# ng-click="modals.agreeReturn.isShow = true" ng-show="stateUI.toRefund || stateUI.refunding" ng-track="{{getPageName()}}-refund">同意退款</a> <a class="btn btn-default" ng-click="modals.refuseReturn.isShow = true" ng-show=stateUI.toRefund ng-track="{{getPageName()}}-reject">拒绝退款</a> </div> </div> <div class=order-modal-container> <m-modal m-title=设置为无效订单 is-show=modals.invalid.isShow size=middle> <p class=order-modal-des>请选择一个无效原因</p> <div class=order-modal-tags> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.DUPLICATE_ORDER}" ng-click="modals.invalid.changeReason(\'DUPLICATE_ORDER\')"> 重复订单 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.CONTACT_USER_FAILED}" ng-click="modals.invalid.changeReason(\'CONTACT_USER_FAILED\')"> 联系不上用户 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.FOOD_SOLD_OUT}" ng-click="modals.invalid.changeReason(\'FOOD_SOLD_OUT\')"> 美食已售完 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.RESTAURANT_TOO_BUSY}" ng-click="modals.invalid.changeReason(\'RESTAURANT_TOO_BUSY\')"> 餐厅太忙 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.RESTAURANT_CLOSED}" ng-click="modals.invalid.changeReason(\'RESTAURANT_CLOSED\')"> 餐厅已打烊 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.DISTANCE_TOO_FAR}" ng-click="modals.invalid.changeReason(\'DISTANCE_TOO_FAR\')"> 不在配送范围 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.FAKE_ORDER}" ng-click="modals.invalid.changeReason(\'FAKE_ORDER\')"> 恶意订单，拒绝配送 </span> <span class="tag tag-filter-empty" ng-class="{\'tag-filter-empty-select\': modals.invalid.reason.OTHERS}" ng-click="modals.invalid.changeReason(\'OTHERS\')"> 其他 </span> <div class=flex ng-show=modals.invalid.isRemarkShow> <textarea class=order-modal-area placeholder=填写您的无效理由 ng-model=modals.invalid.remarkContent>\n          </textarea> </div> </div> <a class="btn btn-primary" href=# ng-click=modals.invalid.setInvalid() ng-track="{{getPageName()}}-invalidate">设为无效</a> <p class=color-red>*订单设为无效后，如需将无效订单重新设置为有效，请您联系客服。</p> </m-modal> <m-modal m-title=同意退款 class=order-modal-item is-show=modals.agreeReturn.isShow size=middle> <p class=order-modal-agree>同意退款后此笔金额会返还给用户。为了安全起见，请您输入饿了么账户密码。</p> <div class=modal-input> <input class=mr10 ng-model=modals.agreeReturn.password type=password placeholder=请输入饿了么账户密码> <a class="btn btn-success" ng-click="modals.agreeReturn.agree(order, password)" ng-track="{{getPageName()}}-confirmRefund">同意退款</a> </div> </m-modal> <m-modal m-title=拒绝退款 is-show=modals.refuseReturn.isShow size=middle> <div class=order-modal-refuse> <div class="modal-pic mr15" input-file-imitate img-url=modals.refuseReturn.imageUrl ng-show=!modals.refuseReturn.imageUrl.length ng-track="{{getPageName()}}-uploadReject"> <span class=icon-plus>+</span> <span>添加图片</span> </div> <img class="modal-pic mr15" src=# ng-src="{{modals.refuseReturn.imageUrl + \'?w=74&h=74\'}}" ng-show=modals.refuseReturn.imageUrl.length alt=图片> <textarea class=flex-1 ng-model=modals.refuseReturn.reason placeholder=填写您的拒绝理由>\n        </textarea> </div> <a class="btn btn-primary mb10" ng-class="{\n          disabled: !modals.refuseReturn.reason.length\n        }" ng-click=modals.refuseReturn.refuse(order) ng-track="{{getPageName()}}-confirmReject"> 提交 </a> </m-modal> <m-modal m-title=匿名评价骑手 is-show=isEvaluateRiderShow size=large is-light=true class=mmodal-evaluate-rider> <div class=order-modal-evaluate> <div class="color-gray mb10">请评价骑手的服务等级</div> <div class="evaluate-stars mb10"> <input type=radio ng-model=star ng-value=1> <input type=radio ng-model=star ng-value=2> <input type=radio ng-model=star ng-value=3> <input type=radio ng-model=star ng-value=4> <input type=radio ng-model=star ng-value=5> <span class=bg_bar></span> </div> <div class=evaluate-list-wrap ng-show=star> <div> <p class="color-gray mt0">请选择标签</p> <ul class="evaluate-list ul-reset" ng-class="{true:\'evaluate-high\', false: \'evaluate-low\'}[star>3]"> <li class="evaluate-list-item mb10" ng-repeat="evaluation in evaluations" ng-class="{\'active\': evaluation.checked}" ng-click=selectLabel(evaluation)> {{evaluation.tagName}} </li> </ul> <textarea class="mt20 evaluate-content" rows=3 ng-model=evaluationText placeholder=其他意见和建议（内容匿名，可放心填写) max-length=5></textarea> <span class=tip-evaluationText-length> <span ng-class="{\'color-red\': evaluationText.length>60}">{{evaluationText.length || 0}}</span>/60 </span> </div> </div> <button class="btn btn-primary mt20 pull-right" ng-click=evaluateDeliveryService(order) ng-disabled="!star || evaluationText.length>60" ng-autodisable ng-track="{{getPageName()}}-confirmReject"> 提交 </button> </div> </m-modal> <m-modal m-title=您对骑手的匿名评价 is-show=isRiderEvaluationShow size=large is-light=true class=mmodal-evaluate-rider> <div class=order-modal-evaluate> <div class="evaluate-stars mb10"> <input type=radio ng-model=star ng-value=1> <input type=radio ng-model=star ng-value=2> <input type=radio ng-model=star ng-value=3> <input type=radio ng-model=star ng-value=4> <input type=radio ng-model=star ng-value=5> <span class=bg_bar style="left:auto;right: {{200-orderEvaluation.level*40}}px"></span> </div> <div class=evaluate-list-wrap> <ul class="evaluate-list ul-reset mt20" ng-class="{true:\'evaluate-high\', false: \'evaluate-low\'}[orderEvaluation.level>3]"> <li class="evaluate-list-item mb10" ng-repeat="https://shadow.elemecdn.com/faas/melody/evaluation in orderEvaluation.tags"> {{evaluation}} </li> </ul> <textarea class="mt20 evaluate-content" rows=3 disabled=disabled ng-show=orderEvaluation.description>{{orderEvaluation.description}}</textarea> </div> <button class="btn btn-primary mt20 pull-right" ng-click="isRiderEvaluationShow = false"> 关闭 </button> </div> </m-modal> <m-modal m-title=配送价格调整 is-light=true is-show=isDeliveryFeeChangeShow size=middle unclose=true> <p>本单配送价格已经实时调节为 <span class=color-blue>{{order.delivery.deliveryFee.toFixed(2)}}元</span> . 是否继续呼叫配送?</p> <div class="flex align-center end-justify mt10 mb15"> <span class=span-link ng-click=removeUnprocessedOrder(order.id)> 放弃 </span> <span class="btn btn-primary ml30" ng-click=callDelivery(order)> 确认呼叫 </span> </div> </m-modal> </div> </div> '},deJu:function(e,t){e.exports="<div class=modal-new ng-class=\"{'modal-new-open': isShow}\"> <div class=modal-new-container> <div class=modal-new-header> <span>{{ title }}</span> <span class=modal-new-close ng-click=hideModal()>×</span> </div> <div class=modal-new-content></div> </div> </div> "},dfs2:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${i.melodyDeliveryUrl}?shopId=${n.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(e,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},djD6:function(e,t){e.exports='<os-container os-src="{{billDetailUrlForAfp}}"></os-container> '},dvNW:function(e,t,n){"use strict";n("YiPN")},dx4E:function(e,t,n){t.controllerAs="$ctrl",t.controller=n("uBy7").default,t.template=n("jjlB")},dxc6:function(e,t){e.exports='<login-topbar ng-if=!isOverV505Client></login-topbar> <div class=login> <div class=login-box> <div ng-if=isOverV505Client class=login-box-header> <p class=login-box-header-title>商家登录</p> <p class=login-box-header-subtitle>为您量身定制的餐饮管理左右手</p> </div> <div class=login-box-tabs> <span ng-class="{\'active\': loginMode === \'username\'}" ng-click="loginMode = \'username\'">账号密码登录</span> <span ng-class="{\'active\': loginMode === \'mobile\'}" ng-click="loginMode = \'mobile\'">手机验证登录</span> </div> <username-login-form ng-if="loginMode === \'username\'"></username-login-form> <mobile-login-form ng-if="loginMode === \'mobile\'"></mobile-login-form> <div class=login-box-footer> <span ui-sref=loginProblem>登录遇到问题？</span> <span ng-if="profiles.length > 1" ui-sref=logined>多账号登录</span> </div> </div> <div class=login-footer>没有账号？<a ng-href="{{kaidian}}" target=_blank ng-click=goKaidian($event)>去开店</a></div> <div ng-if=isOverV505Client class=mobile-download> <span ng-click=mobileDownload($event)> <i class="icon-phone ml8"></i> <span>手机版下载</span> </span> </div> </div> <m-modal m-title=账号密码过于简单 size=small is-show=weakPassword is-light=true on-close=vm.stateHide()> <div> <p>您的账号密码过于简单，容易被盗，请及时修改。</p> </div> <div class="row justify-center mt20 mb10"> <a class="btn btn-primary mr10" ui-sref=passwordReset>去修改</a> <a class="btn btn-default" ng-click="weakPassword = false;">取消登录</a> </div> </m-modal> <m-modal m-title=账号存在安全隐患 size=small is-show=riskLogin is-light=true on-close=vm.stateHide()> <div> <p>由于您的账号可能存在安全隐患，请用手机号验证登录。</p> </div> <div class="row justify-center mt20 mb10"> <span class="btn btn-primary mr10" ng-click=riskLoginAction()>手机号登录</span> <span class="btn btn-default" ng-click="riskLogin = false">取消登录</span> </div> </m-modal> '},dz2d:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/stats/business`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},eEJx:function(e,t,n){"use strict";function i(e){e.state("app.shop.college",{url:"/college",views:{"wrapper@app":s}})}i.$inject=["$stateProvider"];let a=n(0),s=n("CZSq");a.module("app").config(i)},eF6W:function(e,t){e.exports='<os-container os-src="{{vm.managerUrl}}"></os-container> '},eNfG:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIzcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIzIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IHNrZXRjaHRvb2wgMy44LjMgKDI5ODAyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5FQ0UwRDk4NS02OEJBLTQxODEtODJBMC1GMDNDQkYxOEM1RDc8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIHNrZXRjaHRvb2wuPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Iui/numUgeW6l+acuuaehOeuoeeQhiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWIh+WbviIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExOC4wMDAwMDAsIC02MS4wMDAwMDApIiBmaWxsPSIjNEM1MTY1Ij4KICAgICAgICAgICAgPHBhdGggZD0iTTEzMy4zNDc2NDUsNjkuNDM3NDkzMyBMMTMxLjQyOTE4OSw2OS40Mzc0OTMzIEMxMzEuNDI5MTg5LDcwLjc5NzM4NiAxMzAuMzU1NTM3LDcxLjg5OTc5NjggMTI5LjAzMTEyLDcxLjg5OTc5NjggQzEyNy43MDY3MDIsNzEuODk5Nzk2OCAxMjYuNjMzMDUsNzAuNzk3Mzg2IDEyNi42MzMwNSw2OS40Mzc0OTMzIEwxMjQuNzE0NTk1LDY5LjQzNzQ5MzMgQzEyNC43MTQ1OTUsNzAuNzk3Mzg2IDEyMy42NDA5NDIsNzEuODk5Nzk2OCAxMjIuMzE2NTI1LDcxLjg5OTc5NjggQzEyMC45OTIxMDgsNzEuODk5Nzk2OCAxMTkuOTE4NDU2LDcwLjc5NzM4NiAxMTkuOTE4NDU2LDY5LjQzNzQ5MzMgQzExOS45MTg0NTYsNjguNDgyMDE0NyAxMjAuNDQ4NDgxLDY3LjY1MzY0NiAxMjEuMjIzMTA3LDY3LjI0NTQ1NTcgTDEyMS44OTY4NjMsNjIuOTY5ODQyOCBMMTM2LjE2NTM3Niw2Mi45Njk4NDI4IEwxMzYuODM5MTMyLDY3LjI0NTQ1NTcgQzEzNy42MTM3NTksNjcuNjUzNjQ2IDEzOC4xNDM3ODQsNjguNDgyMDE0NyAxMzguMTQzNzg0LDY5LjQzNzQ5MzMgQzEzOC4xNDM3ODQsNzAuNzk3Mzg2IDEzNy4wNzAxMzEsNzEuODk5Nzk2OCAxMzUuNzQ1NzE0LDcxLjg5OTc5NjggQzEzNC40MjEyOTcsNzEuODk5Nzk2OCAxMzMuMzQ3NjQ1LDcwLjc5NzM4NiAxMzMuMzQ3NjQ1LDY5LjQzNzQ5MzMgWiBNMTM4LjY2NjI1LDY2LjE3MzgyMjEgTDEzOC4wNTQ0NDIsNjIuNjI2MzYwNCBMMTM3Ljc3Mzk1Myw2MSBMMTM2LjE2NTM3Niw2MSBMMTIxLjg5Njg2Myw2MSBMMTIwLjI4ODI4Niw2MSBMMTIwLjAwNzc5OCw2Mi42MjYzNjA0IEwxMTkuMzk1OTg5LDY2LjE3MzgyMjEgQzExOC41Mzc4MTIsNjYuOTgzODg2OSAxMTgsNjguMTQ2MjAxNCAxMTgsNjkuNDM3NDkzMyBDMTE4LDcxLjg4NTMwMDEgMTE5LjkzMjU3NCw3My44Njk2Mzk2IDEyMi4zMTY1MjUsNzMuODY5NjM5NiBDMTIzLjY3MjUyMSw3My44Njk2Mzk2IDEyNC44ODI0ODEsNzMuMjI3NjM0OSAxMjUuNjczODIyLDcyLjIyMzUwODEgQzEyNi40NjUxNjQsNzMuMjI3NjM0OSAxMjcuNjc1MTI0LDczLjg2OTYzOTYgMTI5LjAzMTEyLDczLjg2OTYzOTYgQzEzMC4zODcxMTYsNzMuODY5NjM5NiAxMzEuNTk3MDc1LDczLjIyNzYzNDkgMTMyLjM4ODQxNyw3Mi4yMjM1MDgxIEMxMzMuMTc5NzU5LDczLjIyNzYzNDkgMTM0LjM4OTcxOCw3My44Njk2Mzk2IDEzNS43NDU3MTQsNzMuODY5NjM5NiBDMTM4LjEyOTY2NSw3My44Njk2Mzk2IDE0MC4wNjIyMzksNzEuODg1MzAwMSAxNDAuMDYyMjM5LDY5LjQzNzQ5MzMgQzE0MC4wNjIyMzksNjguMTQ2MjAxNCAxMzkuNTI0NDI3LDY2Ljk4Mzg4NjkgMTM4LjY2NjI1LDY2LjE3MzgyMjEgWiBNMTIwLjY1Njk2Myw3OS44MTM5MzczIEwxMjAuNjU2OTYzLDgwLjczMzE5NzMgTDEyMS41NzYyMjMsODAuNzMzMTk3MyBMMTM2LjYwNTUzMSw4MC43MzMxOTczIEwxMzcuNTI0NzkxLDgwLjczMzE5NzMgTDEzNy41MjQ3OTEsNzkuODEzOTM3MyBMMTM3LjUyNDc5MSw3NS4zMzU0MjUyIEwxMzUuNjg2MjcxLDc1LjMzNTQyNTIgTDEzNS42ODYyNzEsNzguODk0Njc3NCBMMTIyLjQ5NTQ4Myw3OC44OTQ2NzczIEwxMjIuNDk1NDgzLDc1LjMzNTQyNTIgTDEyMC42NTY5NjMsNzUuMzM1NDI1MiBMMTIwLjY1Njk2Myw3OS44MTM5MzczIFoiIGlkPSJzaG9wIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},eQum:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/bizznst?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},eRFU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(){g.a.get("//shadow.elemecdn.com/faas/melody/version.js?_dc="+(new Date).valueOf(),function(e){(T=T||e)!==e&&window.location.reload(!0)})}function i(e,t,n){function i(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var a=n&&n.lexicographical,s=n&&n.zeroExtend,o=e.split("."),r=t.split(".");if(!o.every(i)||!r.every(i))return NaN;if(s){for(;o.length<r.length;)o.push("0");for(;r.length<o.length;)r.push("0")}a||(o=o.map(Number),r=r.map(Number));for(var c=0;c<o.length;++c){if(r.length===c)return 1;if(o[c]!==r[c])return o[c]>r[c]?1:-1}return o.length!==r.length?-1:0}function a(e=!0){var t=window.TITLE_BAR.querySelector("#icon-max"),n=window.TITLE_BAR.querySelector("#icon-unmax");e?(n.style.display="none",t.style.display="inline-flex"):(n.style.display="inline-flex",t.style.display="none")}var s=n("//Fk"),o=n.n(s),r=n("d7EF"),c=n.n(r),l=n("exGp"),p=n.n(l),u=n("A7Dr"),d=n.n(u),h=n(0),m=n.n(h),f=n(1),g=n.n(f),v=n("fDMr"),y=n.n(v),w=n("MMVl"),I=n("4fS4"),A=n("Fy0/"),b=n.n(A),S=n("DMNe"),C=n.n(S),k=n("RG6k");let O=(()=>{var n=p()(function*(){const n=new y.a({});var s=yield o.a.all([n.browser.invoke("pc.config.getEnv",{name:"env"}),n.browser.invoke("pc.profile.getCurrentProfile"),n.browser.invoke("pc.config.getClientVersion"),n.browser.invoke("pc.system.getHostName").catch(function(){return null})]),r=c()(s,4);const l=r[0],p=r[1],u=r[2],h=r[3];m.a.module("app").constant("config",w.a),m.a.module("app").constant("env",l),m.a.module("app").constant("ksid",d()(p,"ksid")),m.a.module("app").constant("clientVersion",u),m.a.module("app").constant("hostName",h),t(),e.setInterval(t,18e5);try{m.a.bootstrap(e.document,["app"])}catch(e){console.error(e)}window.isOverV505Client=i(u,"5.0.5")>=0,window.isOverV505Client?(n.browser.invoke("pc.window.isMaxWindow").then(function(e){e?a(!1):a()}),n.browser.on("pc.window.isMaximize",function(){setTimeout(function(){a(!1)},10)}),n.browser.on("pc.window.resize",function(){setTimeout(function(){a()},10)})):document.body.removeChild(window.TITLE_BAR)});return function(){return n.apply(this,arguments)}})();"faas_production"!==window.$ENV&&n.e(2).then((()=>{var e=n("Hhag");e&&new e({target:document.body})}).bind(null,n)).catch(n.oe),"function"==typeof C.a&&(e.GLOBAL_OPENAPI_SERVER=C()(k.a)),n.e(1).then((()=>{try{n("9X4E")}catch(e){I.a.error(e)}window.GLOBAL_ORDER_SOUND&&I.a.init()}).bind(null,n)).catch(n.oe),void 0===e.__napos__sendToBrowser__?function(){const t=localStorage.env||"development",n=localStorage.ksid;b.a.enable(localStorage.debug||""),m.a.module("app").constant("env",t),m.a.module("app").constant("config",w.a),m.a.module("app").constant("clientVersion",null),m.a.module("app").constant("ksid",n),m.a.module("app").constant("hostName",null),m.a.bootstrap(e.document,["app"],{strictDi:!0}),window.isOverV505Client=!0,document.body.removeChild(window.TITLE_BAR)}():O();var T}.call(t,n("DuR2"))},ecI0:function(e,t,n){t.template=n("pQox"),t.controller=n("/RAc").default,t.controllerAs="$ctrl"},ehhc:function(e,t,n){"use strict";e.exports.controller=n("KJr0"),e.exports.template=n("mw+V")},emBO:function(e,t,n){e.exports.controller=n("sO4Y").default,e.exports.template=n("DiGi")},eukm:function(e,t){e.exports='<div class=account-container> <div ml-dropdown new-style=new-style> <div ml-dropdown-toggle> <span class="iconfont icon-account"></span> </div> <div ml-dropdown-menu> <span class=ml-dropdown-menu-arrow></span> <div class=ml-dropdown-menu-content> <div class=ml-dropdown-menu-wrapper> <div class=ml-dropdown-menu-item ng-click=$ctrl.changeUserInfo()> <span class=account-name>{{$ctrl.username}}</span> </div> </div> <div class=ml-dropdown-menu-wrapper> <div class=ml-dropdown-menu-item ng-click=$ctrl.changeUserInfo()> 我的账号 </div> <div class=ml-dropdown-menu-item ng-click=$ctrl.toSurvey()> 帮助与反馈 </div> </div> <div class=ml-dropdown-menu-wrapper> <div class=ml-dropdown-menu-item ng-click=$ctrl.logout()> 退出登录 </div> </div> </div> </div> </div> </div> '},ex5W:function(e,t,n){"use strict";function i(e,t){function i(e){e.callBack=null,this.addCallBack=function(t){e.callBack="function"==typeof t?t:function(){}}}return i.$inject=["$scope"],{restrict:"E",transclude:!0,scope:{title:"@mTitle",bindTitle:"=bindTitle",size:"@",isShow:"=isShow",isLight:"=isLight",closeModal:"&onClose",unclose:"=unclose"},controller:i,link:(e,n,i,a,s)=>{e.hideModal=function(){e.callBack&&e.callBack(),!1!==t(i.onClose)(e.$parent)&&(e.isShow=!1)};s(e.$parent,e=>{n.find(".modal-content").append(e)})},template:n("7acj")}}i.$inject=["$state","$parse"],n(0).module("app").directive("mModal",i)},f4CT:function(e,t,n){"use strict";var i=n("vMAF"),a=n.n(i),s=a()({LOGIN_BY_USERNAME:null,LOGIN_BY_MOBILE:null,LOGIN_GET_PROFILES:null,LOGIN_GET_CURRENT_PROFILE:null,PASSWORD_START_RESET:null,PASSWORD_GET_KEEPR:null,LOAD_UNPROCESSED_ORDERS:null,AUTO_CONFIRM:null,LOAD_UNPROCESSED_REFUNDING_ORDERS:null,REMOVE_UNPROCESSED_ORDER:null,LOAD_PROCESSING_REFUNDING_ORDERS:null,GET_UNREPLIED_CHAT_LIST_VIEW:null,UPDATE_ORDERIDS:null,LOAD_PROCESSED_ORDERS:null,LOAD_ORDER_PROCESS_RECORDS_VIEW:null,UPDATE_ORDER:null,LOAD_SEARCH_RESULT_ORDER:null,LOAD_HISTORY_ORDERS:null,UPDATE_HISTORY_ORDER:null,UPDATE_HISTORY_ORDER_QUERY:null,UPDATE_HISTORY_ORDER_PAGE_INDEX:null,LOAD_PROCESSED_ORDER_STATS:null,LOAD_SEARCH_ORDERS:null,LOAD_NEW_EXCEPTION_ORDER_NUM:null,LOAD_EXCEPTION_ORDERS:null,CLEAR_NEW_EXCEPTION_ORDER_NUM:null,CLEAR_POLLING_NOTICE_RESULT:null,REMOVE_EXCEPTION_ORDER:null,UPDATE_EXCEPTION_ORDER:null,LOAD_CURRENT_PROFILE:null,CHANGE_CURRENT_PROFILE_NAME:null,FETCH_CURRENT_KEEPER:null,FETCH_IS_CHAIN_RESTAURANT:null,FETCH_RESTAURANT_TREE:null,UPDATE_PHOTO_COUNT:null,GET_FOOD_SAFETY_LEVEL:null,LOAD_RESTAURANTS:null,SET_CURRENT_RESTAURANT:null,FETCH_RESTAURANT_VIEW:null,UPDATE_RESTAURANT_STATUS:null,GET_AVAILABLE_ACTIVITY:null,CONFIRM_ORDER:null,INVALIDATE_ORDER:null,AGREE_REFUND:null,DISAGREE_REFUND:null,LOAD_CATEGORIES:null,CREATE_CATEGORY:null,UPDATE_CATEGORY:null,REMOVE_CATEGORY:null,SORT_CATEGORY:null,RESTORE_CATEGORY:null,LOAD_FOODS:null,CREATE_FOOD:null,UPDATE_FOOD:null,REMOVE_FOOD:null,SORT_FOOD:null,LOAD_FOOD:null,FILL_FOOD_STOCK:null,CLEAR_FOOD_STOCK:null,UPDATE_FOOD_STOCK:null,UPDATE_FOOD_ON_SHELF:null,LOAD_RECYCLE_FOODS:null,RESTORE_FOOD:null,LOAD_SALE_TOTAL:null,LOAD_SALE_FOOD:null,SALE_DOWNLOAD:null,SET_FOOD_FOCUSED:null,SET_FOOD_UNFOCUSED:null,UPDATE_FOOD_PRICE:null,CAN_VIEW_DISCOUNT_ACTIVITY:null,CREATE_DISCOUNT_ACTIVITY:null,UPDATE_DISCOUNT_ACTIVITY:null,ABANDON_DISCOUNT_ACTIVITY:null,GET_DISCOUNT_ACTIVITY:null,GET_DISCOUNT_ACTIVITY_STATS_DETAIL:null,GET_DISCOUNT_ACTIVITIES:null,GET_GIFT_ACTIVITIES:null,GET_GIFT_ACTIVITY_STATS_DETAIL:null,CREATE_GIFT_ACTIVITY:null,ABANDON_GIFT_ACTIVITY:null,COUNT_SHOPS_HAD_PARTICIPATED_ACTIVITY:null,CAN_VIEW_GIFT_ACTIVITY:null,GET_ACTIVITY_SHOP_STATUS:null,GET_AVERAGE_PRICE:null,MARKETING_FOOD_CATEGORY:null,ACTIVITY_APPLIED_COUNT:null,FETCH_APPLIED_ACTIVITY_INFO:null,GET_PLATFORM:null,UPDATE_PLATFORM:null,LOAD_VISITOR_SUMMARY:null,LOAD_VISITOR_STATS:null,LOAD_RANK_INFO:null,RANK_GET_LIST:null,CHAIN_RANK_GET_LIST:null,RANK_GET_ORDER:null,CHAIN_RANK_GET_ORDER:null,RANK_SUBMIT_RESP:null,RANK_GET_SERVINGS:null,FETCH_GRAYLIST:null,FETCH_CHAIN_GRAYLIST:null,GET_MERCHANTACTIVITY:null,FETCH_CHAIN_RANK_USERINFORMATION:null,FETCH_RANK_USERINFORMATION:null,COPY_RANK_CHAINBUYINFO:null,RANK_GET_BYCONDITION_LIST:null,LOAD_DIAGNOSIS_RESULTS:null,LOAD_DIAGNOSIS_FOODRESULTS:null,LOAD_CREDIT_STATE:null,LOAD_CREDIT_RULE:null,CHECK_IS_TIME_ENSURE:null,GET_RATE_OF_ZERO_SALES:null,GET_ZERO_SALES_GOODS:null,FETCH_MENUS:null,CREATE_MENU:null,UPDATE_MENU:null,DELETE_MENU:null,SYNC_MENU:null,FETCH_REMOVED_MENUS:null,SET_CURRENT_MENU_ID:null,SET_MENU_ORDER:null,FETCH_GROUPS:null,CREATE_GROUP:null,UPDATE_GROUP:null,DELETE_GROUP:null,GET_GROUP_BY_MENU:null,SET_GROUP_ORDER:null,RESTORE_GROUP:null,CLEAR_REMOVED_GROUPS:null,FETCH_PRODUCTS:null,FETCH_PRODUCT:null,CREATE_PRODUCT:null,UPDATE_PRODUCT:null,BATCH_DELETE_PRODUCT:null,UPDATE_PRODUCT_STOCK:null,UPDATE_PRODUCT_SELL_STATUS:null,SET_PRODUCT_ORDER:null,RESTORE_PRODUCT:null,CLEAR_PRODUCT:null,FETCH_PROXYORDER_ORDERCOUNT:null,FETCH_PROXYORDER_ORDER:null,FETCH_PROXYORDER_START:null,FETCH_PROXYORDER_PROCESSEDORDER:null,FETCH_PROXYORDER_SEARCHORDER:null,FETCH_PROXYORDER_ERRORLIST:null,FETCH_ORDERCARRY_ROLE:null,REMOVE_PROXYORDER:null,FETCH_PROXYORDER_CURRENT:null,GET_COMMISSION:null,GET_SUNSECTIONS:null,SIGN_COMMISSION:null,FETCH_NOTICES:null,FETCH_NOTICES_NUM:null,POLLING_NOTICES:null,GET_NOTICE_NUM:null,REMOVE_NOTICE_ITEM:null,FETCH_CHAIN_SHOP:null,FETCH_CHAIN_SHOP_QUERY:null,FETCH_SALE_SUMMARY:null,FETCH_SALE_BOARD:null,FETCH_SALE_DETAIL:null,FETCH_SALE_DOWNLOAD:null,FETCH_CHAIN_SHOP_MULTI_RESULT:null,FETCH_CHAIN_SHOP_GRAY:null,FETCH_SHOP_CERTIFICATE:null,FETCH_ALL_SHOP_PHOTOS:null,FETCH_PHOTO_UPLOAD_RESULT:null,LOAD_SHOP_CLOSE_DEALY:null,FETCH_SHOP_LOGO_STATUS:null,FETCH_SHOP_LOGO_FROM_TEMPLATE:null,FETCH_LOCAL_LOGO_HASH:null,FETCH_SHOP_VIDEO_DEVICES:null,GET_ALL_ADMINISTRATIVE_REGIONS:null,GET_MEAL_TOKEN_ADDRESS:null,GET_RESTAURANT_DELIVERY_TIME:null,ADD_ORDER_RIDER_EVALUATION:null,GET_MEAL_COOKING_TIME:null,GET_MEAL_COOKING_TIME_MAX:null,SET_ZERO_DELIVERY_GRAY:null,SET_DELIVERY_GRAY:null,UPDATE_PACK_STATUS:null,FETCH_CHAIN_COMMENTS:null,FETCH_SINGLE_COMMENTS:null,FETCH_COMMENT_INFO:null,FETCH_CHAIN_COMMENT_INFO:null,FETCH_AB_TESTING_SWITCH_DIAGNOSIS:null,FETCH_AB_TESTING_SWITCH_INDUSTRY:null,FETCH_AB_TESTING_SWITCH_CHAIN:null,PAY_GET_NOTICE:null,APPLY_ACTIVITIES:null,VALID_ACTIVITIES:null,ACITVITY_DETAIL:null,GET_IS_CONTROLLED_BY_ELEME:null,GET_DELIVERY_FEE_THRESHOLD:null,GET_CONTROLLED_STATUS:null,GET_CROWD_STATUS:null,GET_IS_CROWD_VISIBLE:null,SET_RESTAURANT_FEE_RULE:null,QUERY_DELIVERY_FEE_CONFIG:null,GET_DELIVERY_EVALUATION_TAGS:null,GET_ALL_VALAIEDACTIVITY:null,LOAD_ALL_PROCESSED_ORDERS:null,GET_ALL_FEEDBACK_TYPE:null,YESTERDAY_VISITOR_SUMMARY:null,VISITOR_TREND_SUMMARY:null,VISITOR_DETAILINFO_SUMMARY:null,REMOVE_SELECTORORDER:null,COMMISSION_GET_SIGN_STATUS:null,SET_REMIND_COUNT:null,UPDATE_ORDERS:null,UPDATE_NEW_ORDER_COUNT:null,REMOVE_ORDER:null,SET_PRINT_GLOBAL_SETTINGS:null,GET_KFC_USER_TYPE:null,GRAY_LOADED:null,SHOP_DECO_GRAY_LOADED:null});t.a=s},"f8E/":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},fECv:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("YEW4"),c=n.n(r);let l=function(){function e(t,n){a()(this,e),this.beat=t,this.config=n,this._enabled=!1}return o()(e,[{key:"enable",value:function(e){this._enabled||(c()(this.config.beat,(t,n)=>{const i="default"===n?this.beat:this.beat[n];i.interceptors.push({request:t=>{t.header["X-Shard"]=`shopid=${e}`;return t}})}),this._enabled=!0)}},{key:"disable",value:function(){this._enabled&&(c()(this.config.beat,(e,t)=>{const n="default"===t?this.beat:this.beat[t];n.interceptors.splice(0,n.interceptors.length)}),this._enabled=!1)}}]),e}();l.$inject=["beat","config"],t.a=l},fOfp:function(e,t,n){"use strict";`<document>
    <line>
      <text align="center" font="big">给后厨</text>
    </line>
    <line />
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right">{% if quantity %} ×{{ quantity }} {% endif %}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    <separator char="-" />
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <line>
      <text align="center" font="big">给后厨</text>
    </line>
    <line />
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right">{% if quantity %} ×{{ quantity }} {% endif %}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <line>
            <text>条形码：{{ barCode }}</text>
          </line>
        {% endif %}
      {% endblock %}
    {% endblock %}
    <separator char="-" />
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},fk9O:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE0IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOS4xICgzMTcyMCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y2xvc2U8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS01IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9IjEiPgogICAgICAgIDxnIGlkPSLmnI3liqHlkIjlkIwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01NTAuMDAwMDAwLCAtNDQxLjAwMDAwMCkiIGZpbGw9IiNFRUVFRUUiPgogICAgICAgICAgICA8ZyBpZD0i5Li76aG1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MC4wMDAwMDAsIDQ1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9IuaIkeeahOacjeWKoeWMhSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLjAwMDAwMCwgMTM3LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSLlnKjnur/mlK/ku5giIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDM5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iY2xvc2UiIHBvaW50cz0iMTEzLjIxMDUyNiAyMjcgMTE4IDIyMi4yMTA1MjYgMTE1Ljc4OTQ3NCAyMjAgMTExIDIyNC43ODk0NzQgMTA2LjIxMDUyNiAyMjAgMTA0IDIyMi4yMTA1MjYgMTA4Ljc4OTQ3NCAyMjcgMTA0IDIzMS43ODk0NzQgMTA2LjIxMDUyNiAyMzQgMTExIDIyOS4yMTA1MjYgMTE1Ljc4OTQ3NCAyMzQgMTE4IDIzMS43ODk0NzQiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},fooD:function(e,t){e.exports="<div class=dashboard> <div class=dashboard-left> <dashboard-notice-bar></dashboard-notice-bar> <div class=flex> <dashboard-order></dashboard-order> <dashboard-feedback></dashboard-feedback> </div> <div class=flex> <dashboard-stats></dashboard-stats> <dashboard-activity></dashboard-activity> </div> <dashboard-task></dashboard-task> </div> <div class=dashboard-right> <dashboard-history></dashboard-history> <dashboard-notice></dashboard-notice> <iframe src=https://shop.ele.me style=height:0;width:0;opacity:0></iframe> </div> <dashboard-bd-dialog></dashboard-bd-dialog> </div> "},fvm2:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("ilQr");n("OGdB");let c=function(){function e(t,i,s){a()(this,e),this.$scope=t,this.$state=i,this.redCount=r.a.getNoticeNum(),t.noticeIcon=n("65PF"),t.noticeEmptyIcon=n("QRsZ")}return o()(e,[{key:"$onInit",value:function(){r.a.onChangeWithScope(()=>{this.redCount=r.a.getNoticeNum()},this.$scope)}},{key:"clickedBell",value:function(){const e=[...this.$state.current.name.split(".").slice(0,2),"notice"].join(".");this.$state.go(e)}}]),e}();c.$inject=["$scope","$state","NoticeAction"],t.a={controller:c,template:n("cnCt")}},"fw+l":function(e,t,n){t.template=n("ytIH"),t.controller=n("VfjA").default,t.controllerAs="$ctrl"},"g/Xz":function(e,t){e.exports='<div class=notice-modal ng-class="{\'show-modal\': $ctrl.showMask}"> <div class=notice-modal-container ng-class="{\'show\': $ctrl.showNotice}" ng-if=!$ctrl.showImageOnly> <div class=notice-modal-title ng-if="$ctrl.notice && $ctrl.notice.title">{{$ctrl.notice.title}}</div> <div class=notice-modal-content> <img ng-src="{{$ctrl.notice.image + \'?imageMogr2/thumbnail/320x240!/format/webp\'}}" alt="{{$ctrl.notice.title}}" ng-if=$ctrl.notice.image> <p>{{$ctrl.notice ? $ctrl.notice.summary : \'\'}}</p> <div class=notice-modal-content-buttons> <span class="btn btn-default" ng-click=$ctrl.setNoticeSeen()>我知道了</span> <span class="btn btn-primary" ng-click=$ctrl.clickedDetail() ng-if=$ctrl.notice.showAction>{{$ctrl.notice.actionTitle}}</span> </div> </div> </div> <div class=notice-modal-image ng-class="{\'show\': $ctrl.showNotice}" ng-if=$ctrl.showImageOnly> <span ng-click=$ctrl.clickedDetail()> <img ng-src="{{$ctrl.notice.image + \'?imageMogr2/thumbnail/280x350!/format/webp\'}}" alt="{{$ctrl.notice.title}}" ng-if=$ctrl.notice.image> <i ng-click=$ctrl.setNoticeSeen()>&times;</i> </span> </div> </div> <div class=notice-inner-push ng-class="{\'show\': $ctrl.showInnerPush}"> <div class=notice-inner-push-header> <img class=header-image ng-src="{{$ctrl.notice.image + \'?imageMogr2/thumbnail/36x36!/format/webp\'}}" alt="{{$ctrl.notice.title}}" ng-if=$ctrl.notice.image> <div class=header-text> <p>{{$ctrl.notice ? $ctrl.notice.title : \'\'}}</p> <span>{{$ctrl.notice ? $ctrl.notice.beginDate : \'\' | date: \'yyyy-MM-dd HH:mm\'}}</span> </div> </div> <p class=notice-inner-push-body>{{$ctrl.notice ? $ctrl.notice.summary : \'\'  | collegeWords: 60}}</p> <div class=notice-inner-push-footer> <span class="btn btn-default" ng-click=$ctrl.setNoticeSeen()>我知道了</span> <span class="btn btn-primary" ng-click=$ctrl.clickedDetail() ng-if=$ctrl.notice.showAction>{{$ctrl.notice.actionTitle}}</span> </div> </div> '},g53R:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("CfXW");let o=function e(t,n){a()(this,e);const i=n.getInboxUrl(),o=t.params.detail;if(o){const e=i.split("?");this.src=`${e[0]}/message/${o}?${e[1]}`}else this.src=i;s.a.schedule(this.src),s.a.hideAppWrapper()};o.$inject=["$state","NoticeAction"],t.default=o},g8vz:function(e,t,n){"use strict";n("Y4K6")},gAem:function(e,t,n){"use strict";function i(e){e.state("app.multishop.processcenter",{url:"/process-center",redirect:".processing",resolve:{ResourceInit:["$q","OrderAction",function(e,t){return e.all([t.loadUnprocessedOrders(),t.loadUnprocessedRefundingOrders()])}]},views:{"tabs@app":s}})}i.$inject=["$stateProvider"];var a=n(0),s=n("53t7");a.module("app").config(i)},gRVC:function(e,t,n){"use strict";n("Au62")},gedZ:function(e,t,n){"use strict";function i(e,t){function n(){e.processingRefundingOrders=a.a.getProcessingRefundingOrders(),e.unprocessedRefundingOrders=a.a.getUnprocessedRefundingOrders()}n(),a.a.onChange(n),e.getRestaurant=s.a.findById.bind(s.a),e.agreeRefund=((e,n)=>{t.agreeRefund(e,n)}),e.refuseRefund=((e,n,i)=>{t.refuseRefund(e,n,i)}),e.refundOrderStatus={oldSelect:"toRefund",toRefund:!0,refunding:!1},e.changeRefundStatus=function(t){e.refundOrderStatus[e.refundOrderStatus.oldSelect]=!1,e.refundOrderStatus[t]=!0,e.refundOrderStatus.oldSelect=t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("9UnT"),s=n("RG6k");i.$inject=["$scope","OrderAction"]},goEG:function(e,t,n){"use strict";function i(e,t,n){"ngInject";var i=t.info;this.src=`${n.melodyOrderUrl}/app/tag-searching/${i}?shopId=${t.restaurantId}`,s.a.schedule(this.src),s.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{"/app/processing"===t?e.go("app.shop.order.processing"):"/app/query"===t&&e.go("app.shop.order.querying")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config"]},gs9Y:function(e,t,n){"use strict";var i=n("u2MK");t.a={controller:i.a,template:n("dxc6")}},gvF1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n("Zx67"),i=n.n(t),a=n("Zrlr"),s=n.n(a),o=n("wxAW"),r=n.n(o),c=n("zwoO"),l=n.n(c),p=n("Pf15"),u=n.n(p),d=n(0),h=n.n(d),m=n("f4CT"),f=n("QAIe"),g=n.n(f);let v=function(t){function n(e,t,a){s()(this,n);var o=l()(this,(n.__proto__||i()(n)).call(this));return o.$q=e,o.beat=t,o.api=t.shop.app.invoke,o.newApi=t.newOrder.app,o.Handle=a,o.windowObjectReference=null,o}return n.$inject=["$q","beat","Handle"],u()(n,t),r()(n,[{key:"loadRestaurants",value:function(){var e=this;return this.api("queryShop.getAllShops").then(t=>{e.dispatch({actionType:m.a.LOAD_RESTAURANTS,restaurants:t});e.dispatch({actionType:m.a.SET_CURRENT_RESTAURANT,currentRestaurant:t[0]});return t}).then(e.getPlatform.bind(e))}},{key:"fetchRestaurantView",value:function(e){return this.api("queryShop.getShopView",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_RESTAURANT_VIEW,result:e});return e})}},{key:"fetchRestaurantTree",value:function(e){var t=this;return this.api("shop.getRestaurantTree",{restaurantIds:e}).then(e=>{t.dispatch({actionType:m.a.FETCH_RESTAURANT_TREE,restaurantTree:e});t.dispatch({actionType:m.a.CHANGE_CURRENT_PROFILE_NAME,name:e[0].name})})}},{key:"setCurrentRestaurant",value:function(e){this.dispatch({actionType:m.a.SET_CURRENT_RESTAURANT,currentRestaurant:e}),e&&this.getPlatform([e])}},{key:"updateRestaurantBusyLevel",value:function(e,t,n,i){return this.api("setShop.updateShopBusyLevel",{shopId:e,busyLevel:t,closeReason:n,reasonType:i}).then(e=>{this.dispatch({actionType:m.a.UPDATE_RESTAURANT_STATUS,totalStatus:e,busyLevel:e});return e})}},{key:"closeShop",value:function(e,t,n){return this.api("setShop.closeShop",{shopId:e,reason:"BUSY",remark:"",closeReason:t,reasonType:n}).then(e=>{this.dispatch({actionType:m.a.LOAD_SHOP_CLOSE_DEALY,result:e});return e})}},{key:"openShop",value:function(e){return this.api("setShop.openShop",{shopId:e})}},{key:"getPlatform",value:function(e){var t=this,n=[];return e.map(e=>{var i=t.newApi.invoke("DeliveryService.getSettings",{shopId:e.id}).then(function(n){t.dispatch({actionType:m.a.GET_PLATFORM,restaurantId:e.id,platform:n.platform})}).catch(t.Handle.handleError);n.push(i)}),t.$q.all(n)}},{key:"getRestaurantById",value:function(e){return this.api("queryShop.getShop",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.LOAD_RESTAURANTS,restaurants:[e]});this.dispatch({actionType:m.a.SET_CURRENT_RESTAURANT,currentRestaurant:e});return e})}},{key:"getShopOidById",value:function(e){return this.api("queryShop.getShopOidById",{shopId:e}).then(e=>e)}},{key:"fetchCertificationStatus",value:function(e){return this.api("certification.getCertificationStatus",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_SHOP_CERTIFICATE,result:e});return e})}},{key:"updateDelivery",value:function(e,t){return this.api("setShop.updateShopDelivery",{shopId:e,update:t})}},{key:"updateFeature",value:function(e,t){return this.api("setShop.updateShopFeature",{shopId:e,update:t})}},{key:"updateDetail",value:function(e,t){return this.api("setShop.updateShopDetail",{shopId:e,update:t})}},{key:"uploadImage",value:function(e){return this.api("common.uploadImage",{imageBase64:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_PHOTO_UPLOAD_RESULT,result:e});return e})}},{key:"fetchPhotoMainView",value:function(e){return this.api("photo.getPhotoMainView",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_ALL_SHOP_PHOTOS,result:e});return e})}},{key:"createPhoto",value:function(e,t){return this.api("photo.createPhoto",{shopId:e,creation:t})}},{key:"deletePhoto",value:function(e,t){return this.api("photo.removePhoto",{photoId:e,shopId:t})}},{key:"getRestaurantDelivery",value:function(e){return this.beat.shop.app.invoke("queryShop.getShopDelivery",{restaurantId:e})}},{key:"setAutoConfirm",value:function(e,t,n){n=n||!1,this.dispatch({actionType:m.a.AUTO_CONFIRM,shopId:e,autoConfirm:t,autoDelivery:n})}},{key:"fetchShopLogoStatus",value:function(e){return this.api("shopLogo.getShopLogoStatus",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_SHOP_LOGO_STATUS,result:e});return e})}},{key:"fetchShopLogoFromTemplate",value:function(e,t){return this.api("shopLogo.getShopLogoFromTemplate",{query:{shopId:e,keywords:t}}).then(e=>{this.dispatch({actionType:m.a.FETCH_SHOP_LOGO_FROM_TEMPLATE,result:e});return e})}},{key:"setShopLogoApply",value:function(e,t,n,i){return this.api("shopLogo.applyShopLogo",{create:{shopId:e,imgHash:t,applyType:n,platform:i}}).then(e=>e)}},{key:"uploadLocalLogo",value:function(e){return this.api("common.uploadImage",{imageBase64:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_LOCAL_LOGO_HASH,result:e});return e})}},{key:"getShopVideoDevices",value:function(e){return this.api("shopLiveVideo.getShopVideoDevices",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.FETCH_SHOP_VIDEO_DEVICES,result:e});return e})}},{key:"updateShopVideoDevice",value:function(e,t){return this.api("shopLiveVideo.updateShopVideoDeviceSn",{shopId:e,deviceSn:t}).then(e=>e)}},{key:"deleteShopVideoDevice",value:function(e,t){return this.api("shopLiveVideo.deleteShopVideoDevice",{shopId:e,deviceSn:t}).then(e=>e)}},{key:"getCertificationCenterStatus",value:function(e){return this.api("queryShop.getCertificationCenterStatus",{shopId:e})}},{key:"openService",value:function(t){void 0===e.__napos__sendToBrowser__?this.openBrowser(t):this.openClient(t)}},{key:"openBrowser",value:function(e){null==this.windowObjectReference||this.windowObjectReference.closed?this.windowObjectReference=window.open(e,"_blank","width=800,height=600","false"):this.windowObjectReference.focus()}},{key:"openClient",value:function(e){this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:e})}},{key:"openClientInCollege",value:function(e){this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:e})}},{key:"updatePhotoCount",value:function(e){this.dispatch({actionType:m.a.UPDATE_PHOTO_COUNT,count:e})}},{key:"uploadImageWithWater",value:function(e){return this.api("common.uploadImageWithWater",{imageBase64:e})}},{key:"getFoodSafetyLevel",value:function(e){return this.api("foodSafetyLevel.getFoodSafetyLevel",{shopId:e}).then(e=>{this.dispatch({actionType:m.a.GET_FOOD_SAFETY_LEVEL,result:e})})}},{key:"uploadFoodSafetyLevel",value:function(e,t,n){var i={imageHash:t,waterImageHash:n};return this.api("foodSafetyLevel.uploadFoodSafetyLevel",{shopId:e,upload:i})}},{key:"getKfcUserType",value:function(){return this.beat.arena.app.invoke("KeeperService.getKfcOperateType").then(e=>{this.dispatch({actionType:m.a.GET_KFC_USER_TYPE,result:e});return e})}},{key:"getBookingGrayInfo",value:function(e){return this.beat.newOrder.app.invoke("GrayService.getIsGray",{shopId:e,grayTpye:"BOOKING"})}},{key:"getChainShopGray",value:function(){return this.beat.newOrder.app.invoke("GrayService.getIsGrayChain").then(e=>{this.dispatch({actionType:m.a.FETCH_CHAIN_SHOP_GRAY,result:e});return e})}}]),n}(g.a.ActionCreator);h.a.module("app").service("RestaurantAction",v)}.call(t,n("DuR2"))},gzyZ:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},hDbe:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";e.Alert=n,e.password="",e.confirmPassword="",e.toMain=function(){t.go("app")},e.setFirstPasswd=function(){return e.password!==e.confirmPassword?n.show("两次密码输入不一致！",!0):i.setFirstPasswd(e.confirmPassword).then(()=>{e.toMain()}).catch(e=>{n.show(e.message,!0);throw e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.$inject=["$scope","$state","Alert","ResetPasswordAction"]},hMZt:function(e,t,n){"use strict";function i(e){e.state("app.multishop.searchresult",{url:"/search-result/:orderId",resolve:{order:["$stateParams","beat",function(e,t){"ngInject";var n=e.orderId;return t.order.app.invoke("order.getOrder",{orderId:n}).then(e=>{o.a.setOrder(e);return o.a.getOrderById(n)})}]},views:{"tab-content@app.multishop":r,"tabs@app":c},data:{pageId:"364"}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),o=n("9UnT");i.$inject=["$stateProvider"];var r=n("P74o"),c=n("aOpx");s.a.module("app").config(i)},hglM:function(e,t,n){e.exports.controller=n("BfIO").default,e.exports.template=n("sVXQ")},hhEb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{name:"melody",version:"4.4.0",server:"https://app-api-shop.ar.elenet.me/"},payment:"http://vpca-base-payment-01.vm.elenet.me:9070/payment_webApi/payment/placeOrder",beat:{default:{uri:"https://app-api-shop.ar.elenet.me/invoke",opts:{query:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/invoke",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},activity:{uri:"https://app-api-shop.ar.elenet.me/marketing/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/marketing/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},shop:{uri:"https://app-api-shop.ar.elenet.me/shop/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/shop/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},rank:{uri:"https://app-api-shop.ar.elenet.me/alchemy/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/alchemy/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},goods:{uri:"https://app-api-shop.ar.elenet.me/goods/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/goods/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},order:{uri:"https://app-api-shop.ar.elenet.me/order/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/order/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},newOrder:{uri:"https://app-api-shop.ar.elenet.me/nevermore/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.1"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/nevermore/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},diagnosis:{uri:"https://app-api-shop.ar.elenet.me/stats/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/stats/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},delivery:{uri:"https://app-api-shop.ar.elenet.me/delivery/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/delivery/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},packs:{uri:"https://app-api-shop.ar.elenet.me/packs/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/packs/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},ugc:{uri:"https://app-api-shop.ar.elenet.me/ugc/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/ugc/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},arena:{uri:"https://app-api-shop.ar.elenet.me/arena/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/arena/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},shopGrowth:{url:"https://app-api-shop.ar.elenet.me/shop_growth/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/shop_growth/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},shopDeco:{uri:"https://app-api-shop.ar.elenet.me/shop_deco/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/shop_deco/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}},crm:{uri:"https://app-api-shop.ar.elenet.me/crm/invoke/",opts:{metas:{appName:"melody",appVersion:"4.4.0"},debug:{mock:!1,disablePolling:!0},ncp:"2.0.0",secure:!0,host:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me",port:"",pathname:"/crm/invoke/",hostname:"https://shadow.elemecdn.com/faas/melody/app-api-shop.ar.elenet.me"}}},billUrl:"https://balance-desktop.faas.ar.elenet.me",billDetailUrl:"https://hydrosweb-test-ar.faas.elenet.me/bill",billDetailUrlForAfp:"https://hydrosweb.faas.ar.elenet.me/order/query?order_id=",chainShopBillUrl:"https://balance-headshop.faas.ar.elenet.me",chainShopBillDetailUrl:"https://hydroshead.faas.ar.elenet.me/bill",ubtUrl:"http://ubt.shop.alpha.elenet.me/eventlog",ubtFrom:"melody-development",goodsUrl:"https://melody-goods-test.faas.elenet.me",melodyStatsUrl:"https://melody-stats-test.faas.elenet.me/#",graceUrl:"http://em.alpha.elenet.me/",melodyPayUrl:"https://melody-pay-test.faas.elenet.me/#",melodyPackUrl:"http://melody-pack-test.faas.elenet.me/#",melodyActivityUrl:"https://melody-activity-test.faas.elenet.me",melodyOrderUrl:"https://melody-order.faas.alta.elenet.me",melodyShopUrl:"https://melody-shop-test.faas.elenet.me",receiptUrl:"http://eo.alpha.elenet.me/napos_web",websocketUrl:"https://client-api.alpha.elenet.me/api/line/access",appstoreUrl:"https://nest-market-test.faas.elenet.me",domUrl:"https://xy.alpha.elenet.me/feedback/homepage/index",poscodeUrl:"https://h5.ar.elenet.me/poscode",speUrl:"https://spe-test.faas.elenet.me",creditScoreUrl:"https://melody-credit-score-test.faas.elenet.me",melodyChainShopDashboardUrl:"https://melody-base-test.faas.elenet.me/dashboard",melodyBaseUrl:"https://melody-base-test.faas.elenet.me",melodySettingsUrl:"https://melody-settings-test.faas.elenet.me",melodyPayBidUrl:"https://bs-river-bid.faas.ar.elenet.me/#/app/shop/vas/bid",AlipayFlowPipeUrl:"https://vas-alipay-flow-pipe.faas.ar.elenet.me/#/app/shop/vas/alipayflowpipe",melodyPayAccountUrl:"https://melody-pay-test.faas.elenet.me/#/app/shop/vas/account",naposBrandUrl:"https://napos-brand.faas.beta.elenet.me/#/app/shop/vas/adv",melodyPaySearchUrl:"https://bs-river-edward.faas.ar.elenet.me/#/app/shop/vas/search",melodyPayChainBidUrl:"https://bs-river-bid.faas.ar.elenet.me/#/app/chainshop/vas/bid",melodyPayChainAccountUrl:"http://melody-vas-test.faas.elenet.me/chainaccount",melodyVasDasUrl:"https://das-napos.faas.alpha.elenet.me",chainPermission:"https://chain-permission-test.faas.elenet.me",melodyGuaranteeUrl:"https://melody-guarantee-test.faas.elenet.me",melodyVasBroadcastUrl:"https://vas-broadcast.faas.ar.elenet.me/speaker",melodyDeliveryUrl:"https://melody-delivery.faas.alpha.elenet.me",crayfishCloseReasonListUrl:"https://crayfish.elemecdn.com/melody.shop.ele.me@json/shop-close-reasons-test",crmUrl:"https://throne.faas.ar.elenet.me",fbsUrl:"https://melody-fbs.faas.ar.elenet.me/"}},huSK:function(e,t,n){"use strict";var i=n("//Fk"),a=n.n(i),s=n("v+2J"),o=n.n(s);var r=null;t.a={init(){if(r)return new a.a((e,t)=>{e(r)});var e=window.indexedDB.open("auto-process-database",9);return new a.a((t,n)=>{e.onsuccess=function(e){r=e.target.result,t(r)};e.onerror=function(e){window.perf&&window.perf.sendEvent({name:"indexedDB初始化失败",id:"S1cENX1Jf",data:{type:"autoProcessDB"}}),t(null)};e.onupgradeneeded=function(e){r=e.target.result,0!==r.objectStoreNames.length&&(r.objectStoreNames.contains("success")&&r.deleteObjectStore("success"),r.objectStoreNames.contains("fail")&&r.deleteObjectStore("fail"),r.objectStoreNames.contains("others")&&r.deleteObjectStore("others")),r.createObjectStore("success",{keyPath:"orderId"}),r.createObjectStore("fail",{keyPath:"orderId"}),r.createObjectStore("others",{keyPath:"type"}).createIndex("type","type",{unique:!0})}})},addSucOrder(e,t=!0){return this.init().then(n=>{if(!n)return;var i=n.transaction("success","readwrite");var s=i.objectStore("success");var o=this;return new a.a((n,i)=>{var a=s.add(e);a.onsuccess=function(){t&&o.addOrderCount(),n()}})}).catch(e=>{console.log("addSucOrder init 时发生错误");console.error(e)})},addSucOrders(e,t=!0){return this.init().then(t=>{if(!t)return;var n=t.transaction("success","readwrite");var i=n.objectStore("success");e.forEach(e=>{i.add(e)})}).catch(e=>{console.log("addSucOrder init 时发生错误");console.error(e)})},addFailOrder(e){return this.init().then(t=>{if(!t)return;var n=t.transaction("fail","readwrite");var i=n.objectStore("fail");var s=this;return new a.a((t,n)=>{var a=i.add(e);a.onsuccess=function(){s.addOrderCount(),t()}})}).catch(e=>{console.log("addFailOrder init 时发生错误");console.error(e)})},getSucOrders(){return this.init().then(e=>{var t=[];if(!e)return t;var n=e.transaction("success","readonly");var i=n.objectStore("success");return new a.a((e,n)=>{var a=i.openCursor();a.onsuccess=function(n){var i=n.target.result;i?(t.push(i.value),i.continue()):e(t)}}).then(e=>e)}).catch(e=>{console.log("getSucOrders init 时发生错误");console.error(e)})},getFailOrders(){return this.init().then(e=>{var t=[];if(!e)return t;var n=e.transaction("fail","readonly");var i=n.objectStore("fail");return new a.a((e,n)=>{var a=i.openCursor();a.onsuccess=function(n){var i=n.target.result;i?(t.push(i.value),i.continue()):e(t)}}).then(e=>e)}).catch(e=>{console.log("getFailOrders init 时发生错误");console.error(e)})},getProcessOrder(){var e=this.getSucOrders(),t=this.getFailOrders(),n={};return a.a.all([e,t]).then(e=>{n.success=e[0].sort((e,t)=>t.printTime-e.printTime);n.fail=e[1].sort((e,t)=>t.printTime-e.printTime);return n}).catch(e=>{console.log("getProcessOrder 时发生错误");console.error(e)})},delFailOrder(e){return this.init().then(t=>{if(!t)return;var n=t.transaction("fail","readwrite");var i=n.objectStore("fail");return new a.a((t,n)=>{var a=i.delete(e.orderId);a.onsuccess=function(){t(e)}})}).catch(e=>{console.log("delFailOrder init 时发生错误");console.error(e)})},clearFailOrders(){return this.init().then(e=>{if(!e)return;var t=e.transaction("fail","readwrite");var n=t.objectStore("fail");return new a.a((e,t)=>{var i=n.clear();i.onsuccess=function(){e()}})}).catch(e=>{console.log("clearFailOrders init 时发生错误");console.error(e)})},clearSuccessOrders(){return this.init().then(e=>{if(!e)return;var t=e.transaction("success","readwrite");var n=t.objectStore("success");n.clear()}).catch(e=>{console.log("clearSuccessOrders 时发生错误");console.error(e)})},clearStore(){return this.init().then(e=>{if(!e)return;var t=e.transaction("fail","readwrite");var n=t.objectStore("fail");n.clear();var i=e.transaction("success","readwrite");var a=i.objectStore("success");a.clear();var s=e.transaction("others","readwrite");var o=s.objectStore("others");o.clear()}).catch(e=>{console.log("clearStore init 时发生错误");console.error(e)})},close(){return this.init().then(e=>{e.close();e=null}).catch(e=>{console.log("close init 时发生错误");console.error(e)})},addOrderCount(){return this.init().then(e=>{if(!e)return;var t=e.transaction("others","readwrite");var n=t.objectStore("others");var i=n.get("autoProcessCount");i.onsuccess=function(e){var t=e.target.result,i=null;i=t?o()({},t,{count:++t.count}):{type:"autoProcessCount",count:1},n.put(i)}}).catch(e=>{console.log("addOrderCount init 时发生错误");console.error(e)})},getOrderCount(){return this.init().then(e=>{if(!e)return;var t=e.transaction("others","readonly");var n=t.objectStore("others");return new a.a((e,t)=>{var i=n.get("autoProcessCount");i.onsuccess=function(t){var n=t.target.result;e(n?n.count:0)}}).then(e=>e)}).catch(e=>{console.log("getOrderCount init 时发生错误");console.error(e)})},versionCompare(e,t,n){function i(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var a=n&&n.lexicographical,s=n&&n.zeroExtend,o=e.split("."),r=t.split(".");if(!o.every(i)||!r.every(i))return NaN;if(s){for(;o.length<r.length;)o.push("0");for(;r.length<o.length;)r.push("0")}a||(o=o.map(Number),r=r.map(Number));for(var c=0;c<o.length;++c){if(r.length===c)return 1;if(o[c]!==r[c])return o[c]>r[c]?1:-1}return o.length!==r.length?-1:0},canUseIDB(e){return e=e||"5.0.4",this.versionCompare(e,"5.0.4")<0?(setTimeout(()=>{throw new Error("Error: client lt 5.0.4, can't use indexedDB")},0),!1):!!window.indexedDB||(setTimeout(()=>{throw new Error("Error: can't use indexedDB exception!")},0),!1)}}},hwQq:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},hxgD:function(e,t,n){t.template=n("u9IB"),t.controller=n("wGlf").default,t.controllerAs="$ctrl"},hzFn:function(e,t,n){e.exports="<modal-new title=市场经理拜访满意度调研 is-show=$ctrl.show> <div class=bd-feedback> <p class=bd-manager>市场经理「{{ $ctrl.BDName }}」{{ $ctrl.visitTime | datetime: 'MM月DD日'}}拜访了您</p> <span class=bd-subtitle>请评价他的服务</span> <div class=bd-feedback-rating> <div class=rating-stars> <div class=rating-star ng-mouseover=$ctrl.hover($index) ng-click=$ctrl.selectStar($index) ng-repeat=\"rating in $ctrl.ratings\"> <img src="+n("GZDb")+' ng-if="$ctrl.rating.index < $index"/> <img src='+n("BNiw")+' ng-if="$ctrl.rating.index >= $index"/> </div> </div> <div class=rating-description ng-if="$ctrl.rating.index >= 0"> {{ $ctrl.activeRating().desc }} </div> </div> <div class=bd-feedback-categories ng-if="$ctrl.rating.index >= 0 && $ctrl.rating.index < 2"> <button class=bd-feedback-category ng-click=$ctrl.selectReason(reason) ng-class="{\'active\': reason.active}" ng-repeat="reason in $ctrl.reasons">{{ reason.value }}</button> </div> <textarea class=bd-feedback-textarea maxlength=200 placeholder="请输入评价内容, 最多200个字" ng-model=$ctrl.comment></textarea> <span class=bd-feedback-error ng-if=$ctrl.error>{{ $ctrl.error }}</span> <div ng-class="{\'disabled\': $ctrl.disabled()}" ng-click=$ctrl.submitFeedback() class=bd-button>{{ $ctrl.commitState() }}</div> </div> </modal-new> <modal-new title=市场经理拜访满意度调研 is-show=$ctrl.showSuccess> <div class=bd-success> <img src='+n("qy0C")+" /> <p class=bd-success-title>提交成功</p> <span class=bd-success-subtitle>感谢您对饿了么的支持和关注</span> </div> </modal-new> <modal-new title=市场经理拜访满意度调研 is-show=$ctrl.commented> <div class=bd-commented> <p>该次拜访已被评论过</p> </div> </modal-new> "},iNg4:function(e,t){e.exports='<div class=dashboard-notice-bar ng-if=$ctrl.noticeList.length> <div> <ul class=dashboard-notice-bar-list ng-class="{\'animation\': $ctrl.animation}" ng-style="{transform: \'translateY(\' + $ctrl.translate + \'px)\'}"> <li ng-repeat="notice in $ctrl.noticeQueue track by $index"> <p ng-class="{\'clickable\': notice.clickable}" ng-click="$ctrl.goDetail(notice, $index)">{{notice.title}}</p> <span ng-if=notice.action ng-click="$ctrl.actionClick(notice, $index)"> <i class=icon-keyboard-right></i> </span> <span ng-if=!notice.action ng-click="$ctrl.closeClick(notice, $index)">&times;</span> </li> </ul> </div> </div> '},iRoq:function(e,t,n){"use strict";t.a=["History",function(e){function t(t,n){n.find("navitem").each((t,n)=>{let i=n.getAttribute("ui-sref").replace(/\(.*\)/,"");/\.shop\./.test(i)&&!n.hasAttribute("no-track")&&(e.$tracking[i]=n.querySelector(".nav-text").textContent.replace(/{{.*}}/,"").trim())})}return{link:t}}]},ibYa:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container>'},ifVp:function(e,t){e.exports=' <div class="switch-shop multi-switch" ng-click="switchShopModal.isShopSelectorShow = true"> <span class="icon icon-shop"></span> <div> <p>切换店铺</p> <p class=tip>共有<em class=num>{{allRestaurants.length}}</em>家店铺</p> </div> </div> <m-modal m-title="账户 {{currentProfile.username}} 的店铺" size=large is-show=switchShopModal.isShopSelectorShow> <ul class=switch-shop-lists> <li class=switch-shop-list ng-repeat="restaurant in allRestaurants"> <span class=number>#{{$index + 1}}</span> <div class=info> <img ng-src="{{restaurant.imageUrl}}" alt=""> <div> <p class=name>{{restaurant.name}}</p> <p class=address>{{restaurant.address}}</p> </div> </div> <a class="btn btn-primary" ng-click=switchRestaurant(restaurant)>进入店铺</a> </li> </ul> </m-modal> '},ilQr:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h),f=n("f4CT");let g=function(e){function t(){o()(this,t);var e=p()(this,(t.__proto__||a()(t)).call(this));return e.noticeList=[],e.pollingNotices=[],e.noticeNum=0,e}return d()(t,e),c()(t,[{key:"getPollingNotices",value:function(){return this.pollingNotices}},{key:"getNoticeNum",value:function(){return this.noticeNum}},{key:"getNoticeList",value:function(){return this.noticeList}},{key:"getHandlers",value:function(){return{[f.a.FETCH_NOTICES]:e=>{this.noticeList=e.noticeList.messageDetails},[f.a.POLLING_NOTICES]:e=>{this.pollingNotices=e.noticeList},[f.a.GET_NOTICE_NUM]:e=>{this.noticeNum=e.noticeNum},[f.a.REMOVE_NOTICE_ITEM]:e=>{const t=this.pollingNotices.findIndex(t=>t.messageId===e.messageId);t>-1&&this.pollingNotices.splice(t,1)}}}}]),t}(m.a.Store);t.a=new g},imMA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f),v=n(2),y=n.n(v),w=n("f4CT");let I=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this));return n.api=e.arena.app.invoke,n.app={},n}return t.$inject=["beat"],d()(t,e),c()(t,[{key:"init",value:function(e,t){const n={app:"NAPOS",accountType:"SHOP",token:t,env:e,messageTypes:["ANNOUNCEMENT","ORDER","FINANCE","DISTRIBUTION","ACTIVITY","COMMODITY","OTHER"]};this.app=new y.a(n)}},{key:"getNewNoticeNum",value:function(e){return this.api("PushService.polling",{shopId:e}).then(e=>{this.dispatch({actionType:w.a.FETCH_NOTICES_NUM,pollingResult:e})})}},{key:"getNoticeList",value:function(e){this.app.getMessageList(e,(e,t)=>{e||this.dispatch({actionType:w.a.FETCH_NOTICES,noticeList:t})})}},{key:"pollingNotices",value:function(){this.app.on("https://shadow.elemecdn.com/faas/melody/message.new",e=>{this.dispatch({actionType:w.a.POLLING_NOTICES,noticeList:e})})}},{key:"getNoticeNum",value:function(){this.app.getUnreadCount((e,t)=>{if(e)return!1;const n=t.reduce((e,t)=>{e+=t.count;return e},0);this.dispatch({actionType:w.a.GET_NOTICE_NUM,noticeNum:n})})}},{key:"setNotified",value:function(e){this.app.setNotified(e,()=>{}),this.removeNoticeItem(e)}},{key:"setReaded",value:function(e){this.app.setReaded(e,()=>{}),this.removeNoticeItem(e)}},{key:"removeNoticeItem",value:function(e){this.dispatch({actionType:w.a.REMOVE_NOTICE_ITEM,messageId:e})}},{key:"getInboxUrl",value:function(){return this.app.getInboxUrl()}},{key:"onReaded",value:function(e){this.app.on("message.readed",t=>e(t))}},{key:"onLinkClicked",value:function(e){this.app.on("message.actionClicked",t=>e(t))}}]),t}(g.a.ActionCreator);m.a.module("app").service("NoticeAction",I)},"iqE+":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},ivkS:function(e,t,n){"use strict";n("eEJx")},j2tr:function(e,t,n){"use strict";function i(e,t){s.a.hideScheduleContainer(),a.a.getChainShopGray()&&(console.info("123"),t.go("app.chainshop.order.processing"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("RG6k"),s=n("CfXW");i.$inject=["$scope","$state"]},jEdY:function(e,t,n){"use strict";function i(e,t,n,i){e.billUrl=`${n.billUrl}?shopId=${i.restaurantId}`,a.a.schedule(e.billUrl),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","ksid","config","$stateParams"]},jFgx:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/customer/comment?state=${t.state}`;var o=s.a.schedule(this.src);s.a.watchSrc(i,o.iframe),s.a.hideAppWrapper(),a.container.on("ugcChainChange",t=>{const n=encodeURIComponent(t);e.go(".",{state:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config","$scope"]},jNz5:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats?shopId=${t.restaurantId}`;var o=s.a.schedule(this.src);s.a.watchSrc(i,o.iframe),s.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{const n=encodeURIComponent(t);e.go(".",{path:n})}),a.container.on("toBill",t=>{e.go("https://shadow.elemecdn.com/faas/melody/app.shop.bill")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config","$scope"]},ja69:function(e,t,n){t.template=n("AFXA"),t.controller=n("FvuL").default,t.controllerAs="vm"},jjlB:function(e,t){e.exports='<navitem ubt-click=100672 ui-sref=app.chainshop.dashboard> <span class="icon kwicon-s-home"></span> <span class=nav-text>首页</span> </navitem> <nav-list name=订单 icon=kwicon-s-order ng-show="kfcUserType === \'common\'"> <navitem ng-show=!$ctrl.grayEnable ubt-click=101257 ui-sref=app.chainshop.ordercarry> <span class=nav-text>订单处理</span> </navitem> <navitem ng-show=$ctrl.grayEnable ubt-click=101257 ui-sref=app.chainshop.order.processing> <span class=nav-text>订单处理</span> <span class=nav-notice-num ng-show=$ctrl.orderCount> <i>{{$ctrl.orderCount | noticeNum}}</i> </span> </navitem> <navitem ng-show=$ctrl.grayEnable ui-sref=app.chainshop.order.query> <span class=nav-text>订单查询</span> </navitem> </nav-list> <nav-list ubt-click=101259 name=商品 icon=kwicon-s-commodity ng-show="kfcUserType === \'common\'"> <navitem ui-sref="app.chainshop.food({path: \'management\'})" ui-sref-opts="{reload: false}" auth-check permission=goods_read_goods> <span>商品管理</span> </navitem> <navitem ui-sref=app.chainshop.syncgood ui-sref-opts="{reload: false}" auth-check permission=goods_chain_write_brush_goods> <span>商品同步</span> </navitem> </nav-list> <nav-list name=顾客 icon=kwicon-s-custom ng-show="kfcUserType === \'common\' || kfcUserType === \'comment\'"> <navitem ui-sref=app.chainshop.comments ng-click=$ctrl.clearComment()> <span class=nav-text>顾客评价</span> <span ng-class=$ctrl.chainCommentNotice.class>{{$ctrl.chainCommentNotice.text}}</span> </navitem> </nav-list> <nav-list name=财务 icon=kwicon-s-finance ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.chainshop.bill ubt-click=101262> <span class=nav-text>资金管理</span> </navitem> <navitem ui-sref=app.chainshop.billDetail> <span class=nav-text>账单记录</span> </navitem> </nav-list> <nav-list icon=kwicon-s-shop name=门店 ng-show="kfcUserType === \'common\' || kfcUserType === \'shop\'"> <navitem ng-if=$ctrl.shopDecoGray ui-sref=app.chainshop.decorate> <span class=nav-text>门店装修</span> <span class=nav-notice-text>新</span> </navitem> <navitem ui-sref=app.chainshop.shop ng-show="kfcUserType === \'common\' || kfcUserType === \'shop\'" auth-check permission=shop_read_shop_list> <span class=nav-text>店铺管理</span> </navitem> <navitem ui-sref=app.chainshop.orgmanage ng-show="kfcUserType === \'common\'"> <span class=nav-text>机构管理</span> </navitem> </nav-list> <nav-list icon=kwicon-s-data name=数据 auth-check permission=data_read_data_info ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.chainshop.stats.business ubt-click=2972> <span class=nav-text>营业统计</span> </navitem> <navitem ui-sref=app.chainshop.stats.traffic ubt-click=2974> <span class=nav-text>流量分析</span> </navitem> <navitem ui-sref=app.chainshop.stats.food ubt-click=2976> <span class=nav-text>商品分析</span> </navitem> </nav-list> <nav-list icon=kwicon-s-marketing name=营销> <navitem auth-check permission="activity_read_setting, activity_edit_setting" ui-sref=app.chainshop.activity.setting> <span class=nav-text>活动管理</span> </navitem> <navitem auth-check permission="activity_read_self, activity_edit_self" ui-sref=app.chainshop.activity.self> <span class=nav-text>自建活动</span> </navitem> <navitem auth-check permission="activity_read_apply, activity_edit_apply" ui-sref=app.chainshop.activity.plantform> <span class=nav-text>招商活动</span> <span class=nav-notice-num ng-show=$ctrl.activityCanApplyCount> <i>{{ $ctrl.activityCanApplyCount }}</i> </span> </navitem> </nav-list> <nav-list name=店铺推广 icon=kwicon-s-promotion ng-click=$ctrl.clickVas() ubt-click=100746 ng-class="{\'flag-point-vas\': $ctrl.flag.showVas}"> <navitem ubt-click=100747 ui-sref=app.chainshop.vas.bid> <span class=nav-text>竞价推广</span> </navitem> <navitem ui-sref=app.chainshop.vas.poscode> <span class=nav-text>二维码推广</span> </navitem> <navitem class=nav-navbar-item ui-sref=app.chainshop.vas.adv ng-click=$ctrl.clickAdv() ubt-click=101032 ng-class="{\'flag-point-vas\': $ctrl.flag.showAdv}"> <span class=nav-text>品牌展位</span> </navitem> <navitem class=nav-navbar-item ui-sref=app.chainshop.vas.afp> <span class=nav-text>支付宝推广</span> <span class="nav-notice-text poscode">限时</span> </navitem> <navitem ng-if=false ui-sref=app.chainshop.vas.das ng-class="{\'flag-point-vas\': $ctrl.flag.showAdv}"> <span class=nav-text>DAS在线制图</span> </navitem> <navitem ubt-click=101303 ui-sref=app.chainshop.vas.account> <span class=nav-text>推广资金</span> </navitem> </nav-list> <navitem ubt-click=101304 ui-sref=app.chainshop.pack ng-show="kfcUserType === \'common\'"> <span class="icon kwicon-s-cooperation"></span> <span class=nav-text>合作方案</span> </navitem> <nav-list name=服务市场 icon=kwicon-s-goods> <navitem ui-sref="app.chainshop.appstore({ path: \'/appstore\'})" ubt-click=100415> <span class=nav-text>全部服务</span> </navitem> <navitem ui-sref="app.chainshop.appstore-mine({ path: \'/appstore/mine\'})" ubt-click=100415> <span class=nav-text>我的服务</span> </navitem> </nav-list> <nav-list name=帮助 icon=kwicon-s-help ng-show="kfcUserType === \'common\'"> <navitem ui-sref="app.chainshop.notice({type: 3})" ubt-click=101308> <span class=nav-text>消息</span> <span class=nav-notice-num ng-show=$ctrl.notifyCount> <i>{{$ctrl.notifyCount | noticeNum}}</i> </span> </navitem> <navitem ui-sref=app.chainshop.ruleCenter> <span class=nav-text>规则中心</span> </navitem> </nav-list> <div class=stats-download-notify ng-if=showStatsDownloadInfo> <div class=stats-download-notify-header> <span ng-bind=statsDownloadTitle()></span> <span ng-click=flodDownloadWin()> <img ng-src="{{downloadSvgs[0]}}" ng-if=downloadWindowUnflod /> <img ng-src="{{downloadSvgs[1]}}" ng-if=!downloadWindowUnflod /> </span> <span ng-click=closeDownloadWin()> <img ng-src="{{downloadSvgs[2]}}" alt=""/> </span> </div> <div class=stats-download-notify-body ng-if=downloadWindowUnflod> <div class=stats-download-notify-body-title> <span ng-bind=downloadTitleWords()></span> </div> <div class=stats-download-notify-body-items> <div ng-repeat="https://shadow.elemecdn.com/faas/melody/downloadItem in downloadItems track by downloadItem.id" ng-class="{\'success\': downloadItem.status === \'SUCCESS\'}" ng-click=viewTaskDetail(downloadItem) class=stats-download-notify-body-item> <div ng-if="downloadItem.status === \'WAITING\' || downloadItem.status === \'RUNNING\'" class=stats-download-notify-item-img> <div class=stats-download-loading> <div></div> </div> </div> <div ng-if="downloadItem.status === \'FAILED\'" class=stats-download-notify-item-img> <div class=stats-download-error> <img ng-src="{{downloadSvgs[2]}}" alt=""/> </div> </div> <div ng-if="downloadItem.status === \'SUCCESS\'" class=stats-download-notify-item-img> <div class=stats-download-done> <img ng-src="{{downloadSvgs[3]}}" alt=""/> </div> </div> <div class=stats-download-notify-item-title>{{ downloadItem.taskName }}</div> </div> </div> </div> </div> <m-modal m-title=导出完毕 is-show=completeTask on-close=closeCompleteModal() is-light=true> <div> <a ng-href="{{ completeTask.link }}" class=span-link target=_blank> {{ completeTask.taskName }} </a> <span> 已经导出完毕</span> </div> <div> <span>该文件将在 {{ completeTask.expireTime | datetime }} 时过期, 请及时下载</span> </div> <div class=stats-download-modal-buttons> <div> <span class=btn-primary ng-click=downloadFile(completeTask.link)> 立即下载 </span> </div> </div> </m-modal> '},"k/Ug":function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},k1py:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("CfXW");let o=function e(t){a()(this,e),this.roleUrl=`${t.chainPermission}/role-permissions?from=melody`,s.a.schedule(this.roleUrl),s.a.hideAppWrapper()};o.$inject=["config"],t.default=o},kBmj:function(e,t){e.exports=' <div class=single-toolbar-search-input> <span class="iconfont icon-search pre-icon" ng-if=!isFocus></span> <input type=text placeholder="{{placeholder}}" maxlength=20 ng-focus=onSearchFocus() ng-model=searchKeywords /> <span class="iconfont icon-search btn-search" ng-if=isFocus ng-class="{ \'is-active\': isSearchResultShow && !!searchKeywords }" ng-click=searchOrders()></span> </div> <div class=single-toolbar-search-result ng-show=isSearchResultShow> <p class=des ng-show="!searchKeywords && !isSearching"> 点击标签搜索相关订单 </p> <div ng-show="!searchKeywords && !isSearching" class=search-tags> <span class=search-tag ng-repeat="tag in searchTags" ng-click=tagSearch(tag)> {{ tag.name }} </span> </div> <div class=no-result ng-show="searchResultRecords.length === 0 && searchKeywords && !isSearching"> <span>未找到与「{{ searchKeywords }}」有关的订单</span> </div> <div class=searching ng-show=isSearching> 搜索中... </div> <ul class=single-toolbar-search-result-lists ng-show="searchResultRecords.length > 0 && !isSearching && searchKeywords"> <li ng-repeat="searchResultRecord in searchResultRecords track by searchResultRecord.activeTime"> <p class=date style="">{{ searchResultRecord.activeTime.slice(5) }} 订单</p> <div ng-repeat="https://shadow.elemecdn.com/faas/melody/searchResultRecord2 in searchResultRecord.searchOrder track by searchResultRecord2.id" ng-click=selectOrder(searchResultRecord2.id)> <div class=payment-banner ng-show="\n            searchResultRecord2.payment !== \'CASH\' &&\n            searchResultRecord2.paymentStatus !== \'SUCCESS\'"> <span class="icon icon-error"></span> <span ng-bind=getPaymentStatusText(searchResultRecord2.paymentStatus)> </span> </div> <div class=single-toolbar-search-result-list> <h3 class="daysn color-blue" ng-class="{\n              \'large-number\': searchResultRecord2.daySn > 99,\n              \'color-red\': searchResultRecord2.status === \'UNPROCESSED\',\n              \'color-gray\': searchResultRecord2.status === \'INVALID\' || (\n                searchResultRecord2.paymentStatus !== \'SUCCESS\' &&\n                searchResultRecord2.payment !== \'CASH\'\n              )\n            }" ng-bind-html=percolatorDaysn(searchResultRecord2.daySn)> </h3> <div class=information> <p>{{searchResultRecord2.consigneeAddress}}</p> <p class=mb5> <span class=mr5 ng-repeat="phone in searchResultRecord2.consigneePhones"> {{::phone}} </span> </p> <p class=color-gray ng-bind-html=percolatorId(searchResultRecord2.id)> </p> </div> <span class=price>{{\'￥\' + searchResultRecord2.income}}</span> </div> </div> </li> </ul> </div> <div class=single-toolbar-search-result-dropback ng-show=isSearchResultShow ng-click="isSearchResultShow = false"> </div> '},kCCj:function(e,t,n){"use strict";function i(e){e.state("app.shop.settings",{url:"/settings",redirect:".restaurant"})}i.$inject=["$stateProvider"],n(0).module("app").config(i)},kGRD:function(e,t,n){"use strict";n("XbK+")},kICC:function(e,t,n){"use strict";(function(e){var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s);let r=function(){function t(e,n){a()(this,t),this.clientVersion=e,this.beat=n,this.mobile="https://shop.ele.me"}return o()(t,[{key:"mobileDownload",value:function(t){e.__napos__sendToBrowser__&&(t.preventDefault(),this.beat.browser.invoke("pc.system.launchDefaultBrowser",{url:this.mobile}))}}]),t}();r.$inject=["clientVersion","beat"],t.a={controller:r,template:n("/8Ty")}}).call(t,n("DuR2"))},kTeq:function(e,t,n){"use strict";function i(e,t,n,i){function o(){e.processedOrders=a.a.getProcessedOrders(),e.pageIndex=a.a.getPageIndex(),e.pageTotal=a.a.getPageTotal()}o(),a.a.onChangeWithScope(o),e.getRestaurant=s.a.findById.bind(s.a),e.printOrder=(e=>{i.printOrder(e,s.a.getRestaurantById(e.restaurantId))}),e.invalidateOrder=((e,t,n)=>i.invalidateOrder(e,t,n)),e.copyOrder=(e=>{i.copyOrder(e,s.a.getRestaurantById(e.restaurantId))}),e.$watch("pageIndex",function(e,t){e!==t&&n.go("^.processed",{pageIndex:e})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("9UnT"),s=n("RG6k");i.$inject=["$scope","$q","$state","OrderAction"]},kXlQ:function(e,t,n){"use strict";e.exports={template:n("mYUh"),controller:n("Py4N").default,controllerAs:"$ctrl"}},"kZ/N":function(e,t,n){"use strict";function i(){function e(e,t,n){const i=t.find("iframe");i.on("load",e=>{try{i[0].contentWindow.addEventListener("click",()=>{t.trigger("click")})}catch(e){}}),e.$watch("osSrc",e=>{if(e)try{a(e),i.attr("src",e)}catch(e){alert(e.message)}})}return{restrict:"E",scope:{osSrc:"@"},link:e,template:'<iframe sandbox="allow-forms allow-same-origin allow-scripts allow-popups" frameborder="0"></iframe>'}}function a(e){const t=document.createElement("a");if(t.href=e,-1===t.hostname.indexOf("https://shadow.elemecdn.com/faas/melody/ele.me")&&-1===t.hostname.indexOf("https://shadow.elemecdn.com/faas/melody/elenet.me")&&"localhost"!==t.hostname&&"127.0.0.1"!==t.hostname)throw new Error("您正在访问非饿了么域名，将不受饿了么保护")}t.a=i},m95f:function(e,t){e.exports="<tab ui-sref=app.chainshop.stats.info ubt-click=2272>营业统计</tab> <tab ui-sref=app.chainshop.stats.visitor ubt-click=2263>顾客统计</tab> "},mLeL:function(e,t,n){"use strict";function i(e){"ngInject";function t(e){return e&&angular.isFunction(e.then)&&angular.isFunction(e.finally)}function n(e,n,i,a){var s=a(n,{$event:i});t(s)&&e.handlePromise(s)}function i(e,t,i){var r;if(i.hasOwnProperty(l))r=o(t,c,s(i),a(i[l]));else{if(!i.hasOwnProperty(u))throw new Error("ngAutodisable requires ngClick or ngSubmit attribute in order to work");r=o(t.find("button[type=submit]"),p,s(i),a(i[u]))}t.unbind(r.eventName).bind(r.eventName,function(t){e.$apply(function(){r.callbacks.forEach(n.bind(null,r,e,t))})})}function a(t){return t.split(";").map(function(t){return e(t,null,!0)})}function s(e){return!!e.hasOwnProperty(d)&&e[d]}function o(e,t,n,i){function a(){0===--l&&o()}function s(){e.attr(r,!0),n&&e.addClass(n)}function o(){e.attr(r,!1),n&&e.removeClass(n)}var c={},l=0;return c.eventName=t,c.callbacks=i,c.handlePromise=function(e){0===l&&s(),l++,e.finally(function(){a()})},c}var r="disabled",c="click",l="ngClick",p="submit",u="ngSubmit",d="ngAutodisableClass";return{restrict:"A",link:i}}t.a=i,i.$inject=["$parse"]},mUJG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n(0),m=n.n(h),f=n("QAIe"),g=n.n(f);let v=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this));return n.beat=e.diagnosis,n}return t.$inject=["beat"],d()(t,e),c()(t,[{key:"queryDownloadTasks",value:function(){return this.beat.app.invoke("DownloadService.queryDownloadTasks")}},{key:"queryDownloadTaskDetail",value:function(e){return this.beat.app.invoke("DownloadService.getDownloadTaskDetail",{downloadTaskId:e})}}]),t}(g.a.ActionCreator);m.a.module("app").service("StatsAction",v)},mYUh:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},mrBA:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/stats/traffic`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},"mw+V":function(e,t){e.exports="<tab ui-sref=app.shop.stats.comment.info ubt-click=2983>评价分析</tab> <tab ui-sref=app.shop.stats.comment.complain ubt-click=2983>投诉总览</tab> "},nGX6:function(e,t,n){"use strict";n("og57")},nWez:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/stats/visitor`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},ngdq:function(e,t,n){"use strict";function i(e,t,n,i,s){e.order=i,e.getRestaurant=a.a.findById.bind(a.a),e.printOrder=(e=>{s.printOrder(e,a.a.getRestaurantById(e.restaurantId))}),e.confirmPrintOrder=(e=>{s.confirmPrintOrder(e,a.a.getRestaurantById(e.restaurantId))}),e.invalidateOrder=((e,i,a)=>{s.invalidateOrder(e,i,a).then(function(){t.transitionTo(t.current,n,{reload:!0,inherit:!1,notify:!0})})}),e.copyOrder=(e=>{s.copyOrder(e,a.a.getRestaurantById(e.restaurantId))}),e.agreeRefund=((e,i)=>{s.agreeRefund(e,i).then(function(){t.transitionTo(t.current,n,{reload:!0,inherit:!1,notify:!0})})}),e.refuseRefund=((e,i,a)=>{s.refuseRefund(e,i,a).then(function(){t.transitionTo(t.current,n,{reload:!0,inherit:!1,notify:!0})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("RG6k");i.$inject=["$scope","$state","$stateParams","order","OrderAction"]},ntLN:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container> '},nuco:function(e,t){e.exports='<div class=dashboard-history> <dashboard-box-header title=最近使用></dashboard-box-header> <div class=history-content> <a href=javascript:; class=history-item ng-click=$ctrl.go(h) ng-repeat="h in $ctrl.historys" ubt-click=2970>{{h.title}}</a> </div> </div> '},o1nU:function(e,t,n){"use strict";function i(e,t){function n(){e.currentProfile=a.a.getCurrentProfile()}n(),a.a.onChange(n),e.switchShopModal={isShopSelectorShow:!1},e.switchRestaurant=function(n){e.switchShopModal.isShopSelectorShow=!1,s.a.clearApps(),t.go("app.shop.dashboard",{restaurantId:n.id},{reload:!0,inherit:!1})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("t4A1"),s=n("CfXW");i.$inject=["$scope","$state"]},oC0W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("exGp"),a=n.n(i),s=n("//Fk"),o=n.n(s),r=n("Zx67"),c=n.n(r),l=n("Zrlr"),p=n.n(l),u=n("wxAW"),d=n.n(u),h=n("zwoO"),m=n.n(h),f=n("Pf15"),g=n.n(f),v=n("QAIe"),y=n.n(v),w=n(0),I=n.n(w);let A=function(e){function t(e,n,i){"ngInject";p()(this,t);var a=m()(this,(t.__proto__||c()(t)).call(this));return a.Alert=n,a.ClientService=i,a}return t.$inject=["beat","Alert","ClientService"],g()(t,e),d()(t,[{key:"getGlobalPrintSettings",value:function(){return this.ClientService.getGlobalPrintSettings()}},{key:"updateGlobalPrintSettings",value:function(e){return this.ClientService.updateGlobalPrintSettings(e)}},{key:"getPrinters",value:function(){return this.ClientService.getPrinters()}},{key:"enablePrinter",value:function(e){return this.ClientService.enablePrinter(e)}},{key:"disablePrinter",value:function(e){return this.ClientService.disablePrinter(e)}},{key:"updatePrinter",value:function(e,t){return this.ClientService.updatePrinter({id:e,printSettings:t})}},{key:"getPrinterSettingsMode",value:function(){return o.a.resolve("advance")}},{key:"launchDeviceManager",value:function(){return this.ClientService.invoke("pc.system.launchDeviceManager")}},{key:"launchPrinterPanel",value:function(){return this.ClientService.invoke("pc.system.launchPrinterPanel")}},{key:"clearGlobalPrintSettings",value:(()=>{function e(){return t.apply(this,arguments)}var t=a()(function*(){(yield this.ClientService.clearGlobalPrintSettings())&&this.Alert.show(`修复成功 `)});return e})()}]),t}(y.a.ActionCreator);I.a.module("app").service("PrintAction",A)},oFww:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.comments",{url:"/comments?state",reloadOnSearch:!1,views:{"wrapper@app":n("Ydex")}}).state("app.chainshop.comments",{url:"/comments?state",reloadOnSearch:!1,views:{"wrapper@app":n("WcfV")}})}])},oGa7:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s);let r=function(){function e(t,n){a()(this,e),this.state=t,this.rid=t.params.restaurantId,this.h=n}return o()(e,[{key:"$onInit",value:function(){this.historys=this.h.get(this.rid)}},{key:"go",value:function(e){this.state.go(e.stateName,e.stateParams)}}]),e}();r.$inject=["$state","History"],t.a={template:n("nuco"),controller:r}},oOJ1:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},oR71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.ruleCenter",{url:"/rule-center",reloadOnSearch:!1,views:{"wrapper@app":n("5fdX")}}).state("app.chainshop.ruleCenter",{url:"/rule-center",reloadOnSearch:!1,views:{"wrapper@app":n("5fdX")}})}])},og57:function(e,t,n){"use strict";function i(e){e.state("app.chainshop",{url:"/chain-shop",redirect:o,resolve:{ResourceInit:a,NavResource:s},views:{"navbar@app":m,"search@app":f,"global-container":d.a}}).state("app.chainshop.order",{url:"/order",redirect:".processing"}).state("app.chainshop.dashboard",{url:"/dashboard",views:{"wrapper@app":{template:`
            <os-container os-src="{{$vm.src}}"></os-container>
          `,controller:["config",function(e){console.log("dashboard:config:",e),this.src=`${e.melodyChainShopDashboardUrl}`,h.a.schedule(this.src),h.a.hideAppWrapper()}],controllerAs:"$vm"}}})}function a(e,t,n){e.disable(),t.setCurrentRestaurant(null);const i=l.a.getChainKeeper().restaurantUnitIds.slice(0,1);return t.getChainShopGray(),t.fetchRestaurantTree(i)}function s(e,t){const n=l.a.getChainKeeper().restaurantUnitIds[0];return e.getAdvertisementStatus(n),e.getChainBrandInformation(n).then(t=>e.fetchChainCommentInfo()).catch(e=>{console.error(e.message)})}function o(){const e=p.a.getKfcUserType(),t=p.a.getChainShopGray();return"comment"===e?{state:".comments"}:"shop"===e?{state:".shop"}:t?{state:".dashboard"}:{state:".ordercarry"}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),c=n.n(r),l=n("t4A1"),p=n("RG6k"),u=n("8UOv"),d=n.n(u),h=n("CfXW");s.$inject=["NavNoticeAction","ResourceInit"],i.$inject=["$stateProvider"];var m=n("dx4E"),f=n("YlKv");c.a.module("app").config(i),a.$inject=["XShard","RestaurantAction","ResourceInit"],a.$inject=["XShard","RestaurantAction","ResourceInit"],s.$inject=["NavNoticeAction","ResourceInit"]},ot4V:function(e,t,n){t.template=n("xqP9"),t.controller=n("Affh").default,t.controllerAs="$ctrl"},p8rL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("d7EF"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("RG6k"),p=n("KcnZ"),u=n("+asM"),d=n("ilQr"),h=n("Reue"),m=n("zALs"),f=n("9UnT"),g=n("DuSP"),v=n("NGSm"),y=(n.n(v),n("4fS4"));let w=function(){function e(t,n,i,a,s,r){o()(this,e),t.kfcUserType=l.a.getKfcUserType(),this.beat=r,this.Alert=s,this.action=n,this.ArenaAction=i,this.orderCount=0,this.mutliOrderCount=0,this.showSearchHintFlag=!1,this.shopId=l.a.getCurrentRestaurant().id,this.$state=a,this.creditNotice={class:"nav-notice-num",text:"新"},this.isChain=!!l.a.isChain(),y.a._enabled||(window.perf&&window.perf.sendEvent({name:"订单提示音文件加载失败",id:"Hkz7DbuOZ",data:{shopId:this.shopId}}),this.Alert.show("音频文件加载失败...",!0)),this.init(),this.updatePollingResult(),this.clearComment=function(){this.action.setSingleCheckDate(this.shopId)},this.clearCrmNotice=function(){window.localStorage.setItem("__crm-noticed__",!0),this.crmNotice=!1},this.crmNotice=!window.localStorage.getItem("__crm-noticed__"),h.a.onChangeWithScope(()=>{this.init()},t),this.shopDecoGray=g.a.getIsInGray(),g.a.onChangeWithScope(()=>{this.shopDecoGray=g.a.getIsInGray()}),p.a.onChangeWithScope(()=>{this.updatePollingResult()}),u.a.onChangeWithScope(()=>{this.deliveryGary=u.a.getDeliveryGray()},t),m.a.onChangeWithScope(()=>{this.orderCountChange()},t),f.a.onChangeWithScope(()=>{this.multiOrderCountChange()},t),d.a.onChangeWithScope(()=>{this.showHelpHotice()},t),v.container.on("comment.updateNotice",e=>{t.$apply(()=>{this.action.updateCommentNotice(e)})}),v.container.on("feedback.updateNotice",()=>{t.$apply(()=>{this.action.updateFeedbackCount(0)})})}return c()(e,[{key:"init",value:function(){this.commentNotice=h.a.getCommentNotice(),this.servingPackInGray=h.a.isServingPackInGray(),this.isMulti=l.a.isMulti(),this.isInGrey=h.a.isISVInGray(),this._marketBidNotice={class:"nav-notice-dot"},h.a.isBidInGray()?this.marketBidNotice=h.a.getMarketBidNotice():this.marketBidNotice={},this.bidNotice=h.a.getBidNotice(),this.showHelpHotice()}},{key:"showHelpHotice",value:function(){this.notifyCount=d.a.getNoticeNum(),this.feedbackCount=h.a.getFeedbackCount(),this.notifyCount?this.helpNotice={class:"nav-notice-num",text:this.notifyCount}:this.feedbackCount?this.helpNotice={class:"nav-notice-dot"}:this.helpNotice={}}},{key:"clearVasSearchHintFlag",value:function(){window.localStorage.setItem("vasSearchStore",this.lastEvent)}},{key:"updateAuto",value:function(){var e=p.a.getAutoProcessInfo(this.shopId),t=a()(e,2);const n=t[0],i=t[1];this.autoConfirm=n,this.autoDelivery=i}},{key:"orderCountChange",value:function(){this.updateAuto();var e=f.a.getIsInSoundGray(),t=m.a.getNewOrderCount(),n=m.a.getReminderQueryCount(),i=m.a.getUnprocessedBookingOrderCount(),a=m.a.getUrgeOrderCount(),s=m.a.getPureRefundOrderCount(),o=m.a.getExceptionalOrderCount(),r=m.a.getCancelOrderCount();this.orderCount=t+n,this.mutliOrderCount||(this.orderCount?this.orderNotice={class:"nav-notice-num",text:this.orderCount}:this.orderNotice={}),e||(y.a._enabled||(y.a.activate=function(){},y.a.remove=function(){}),t>0?y.a.activate("newOrder"):y.a.remove("newOrder"),v.container.broadcast("order.reminderOrderCount"),i>0?y.a.activate("booking"):y.a.remove("booking"),a>0?y.a.activate("urge"):y.a.remove("urge"),s>0?y.a.activate("refund"):y.a.remove("refund"),o>0?y.a.activate("exception"):y.a.remove("exception"),r>0?y.a.activate("cancel"):y.a.remove("cancel"))}},{key:"updatePollingResult",value:function(){this.pollingResult=p.a.getPolling()||{},this.pollingResult.receiptRedCount?this.pollingNotice={class:"nav-notice-num",text:this.pollingResult.receiptRedCount}:this.pollingNotice={};try{this.activityCanApplyCount=this.pollingResult.activityApplyCountInfo.canApplyCount}catch(e){this.activityCanApplyCount=0}this.activityCanApplyCount>99&&(this.activityCanApplyCount="···")}},{key:"clearReceiptCount",value:function(){this.ArenaAction.clearReceiptCount()}},{key:"clearMarketBidNotice",value:function(){h.a.isBidInGray()&&this.action.clearMarketBidNotice(this.bidNotice)}},{key:"toShopInfo",value:function(e){"app.shop.shop-info"https://shadow.elemecdn.com/faas/melody/===this.$state.current.name?v.container.broadcast("state.sync","https://shadow.elemecdn.com/faas/melody/app.shop"):this.$state.go("app.shop.shop-info",{path:e})}},{key:"toDeliveryInfo",value:function(e){"app.shop.delivery"https://shadow.elemecdn.com/faas/melody/===this.$state.current.name?v.container.broadcast("state.sync","app.delivery"):this.$state.go("app.shop.delivery",{path:e})}},{key:"multiOrderCountChange",value:function(){this.mutliOrderCount=f.a.getUnprocessedOrders().length,this.orderCount||(this.mutliOrderCount?this.orderNotice={class:"nav-notice-num",text:this.mutliOrderCount}:this.orderNotice={})}},{key:"gotoSetting",value:function(){v.container.broadcast("https://shadow.elemecdn.com/faas/melody/state.sync","app.settings.print")}}]),e}();w.$inject=["$scope","NavNoticeAction","ArenaAction","$state","Alert","beat"],t.default=w},pGKV:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("QAIe"),m=n.n(h),f=n("SLs8");let g=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.keeper={},n.roleList=[],n}return d()(t,e),c()(t,[{key:"getKeeperId",value:function(){return this.keeper.id}},{key:"getRoleList",value:function(){return this.roleList}},{key:"getPermissionList",value:function(){return this.permissionList}},{key:"getUnitType",value:function(){return this.shopUnitType}},{key:"getHandlers",value:function(){return{[f.a.GET_KEEPER_FOR_ROLE]:e=>{this.keeper=e.result},[f.a.GET_ROLE_LIST]:e=>{this.roleList=e.result},[f.a.GET_ALL_PERMISSIONS]:e=>{this.permissionList=e.result},[f.a.SET_SHOP_UNIT_TYPE]:e=>{this.shopUnitType=e.result}}}}]),t}(m.a.Store);t.a=new g},pIfv:function(e,t,n){"use strict";n("kCCj")},pPbq:function(e,t,n){"use strict";var i=n("vMAF"),a=n.n(i),s=a()({UPDATE_ORDERS:null,UPDATE_AUTO_CONFIRM:null,UPDATE_ORDERIDS:null,UPDATE_NEW_ORDER_COUNT:null,SET_REMINDER_QUERY_COUNT:null,REMOVE_ORDER:null,UPDATE_NEW_ORDERIDS:null,LOAD_UNPROCESSED_ORDERS:null,LOAD_UNPROCESSED_REFUNDING_ORDERS:null,REMOVE_UNPROCESSED_ORDER:null,LOAD_PROCESSED_ORDERS:null,LOAD_PROCESSING_REFUNDING_ORDERS:null,GET_UNREPLIED_CHAT_LIST_VIEW:null,LOAD_SEARCH_ORDERS:null,ADD_ORDER_RIDER_EVALUATION:null,SET_WS_GRAY:null,SET_SEARCH_TAGS:null,SET_PRINT_GRAY:null,SET_2M_POLLING_COUNT:null,SET_5M_POLLING_COUNT:null,GET_SEARCH_CHAIN_ORDERS:null,SET_SOUND_GRAY:null});t.a=s},pQox:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},pj4h:function(e,t,n){"use strict";function i(){return{restrict:"E",transclude:!0,scope:{},controller:a,template:"<div ng-transclude></div>"}}function a(e){var t=e.tabs=[];this.addTab=function(e){t.push(e)}}function s(e){function t(t,n,i,a){t.$on("$stateChangeSuccess",function(){t.selected=!1,e.includes(i.uiSref.split("(")[0])&&(t.selected=!0)}),a.addTab(t)}return{require:"^tabs",restrict:"E",transclude:!0,scope:{},link:t,template:'<a class="toolbar-tab" ng-class="{active: selected}" href="#" ng-transclude></a>'}}s.$inject=["$state"],a.$inject=["$scope"],n(0).module("app").directive("tabs",i).directive("tab",s)},pmGq:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/comment/complain?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},pt8B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("A7Dr"),c=n.n(r),l=n("PJh5"),p=n.n(l),u=n("KcnZ"),d=n("RG6k"),h=n("zALs"),m=n("9UnT"),f=n("4fS4");let g=null,v=null,y=function(){function e(t,n,i,s,o,r,l,p,m,f,g,v,y,w){a()(this,e),this.$interval=v,this.$state=n,this.analytics=i,this.Alert=s,this.sAction=r,this.arenaAction=o,this.OrderAction=l,this.beat=p,this.rid=c()(d.a.getCurrentRestaurant(),"id")||d.a.getChainRestaurantId(),this.isEvaluateShow=c()(u.a.getPolling(),"managerVotable"),this.marketManagerquestions=[],this.queryOrderCount=0,this.queryReminderCount=0,this.shouldRemindUpdateDeliveryArea=!1,this.mmScore={solveQuestion:"satisfied",visitFrequency:"satisfied",serviceAttitude:"satisfied"},this.printerCount=0,this.shopDetail={valid:c()(d.a.getRestaurantDetail(),"valid",!0),description:c()(d.a.getRestaurantDetail(),"description","尊敬的饿了么商户，您的店铺已被调整至无效状态，无法接收外卖订单。如需帮助请联系市场经理，若无市场经理请联系饿了么客服。您可搜索关注微信公众号“饿了么商家学院”，学习更多经营之道。")},h.a.onChangeWithScope(()=>{this.getNewOrder()},t),this.init(),t.$on("$stateChangeSuccess",()=>{}),p.browser.on("pc.print.openPrinterSettingDialog",()=>{n.go("app.shop.setting",{path:"print"})}),t.kfcUserType=d.a.getKfcUserType(),p.browser.on("pc.print.printersHasChanged",()=>{this.printersHasChanged()}),this.config=m,this.ksid=f,g.disable(),d.a.getChainShopGray()&&this.chainShopPolling(),t.$on("$destroy",()=>{this.clearPolling()}),this.arenaAction.fetchPolling(this.rid),y.loadGray(),w.loadGray(this.rid)}return o()(e,[{key:"init",value:function(){this.getMarketManagerQuestions(),this.printersHasChanged(),this.rid&&this.sAction.shouldRemindUpdateDeliveryArea(this.rid).then(e=>{this.shouldRemindUpdateDeliveryArea=e})}},{key:"chainShopPolling",value:function(){this.OrderAction.getRemindOrderCount(null),g=this.$interval(()=>{this.OrderAction.getRemindOrderCount(null)},24e4),this.OrderAction.getNewOrderCount(null),v=this.$interval(()=>{this.OrderAction.getNewOrderCount(null).catch(e=>{this.OrderAction.getNewOrderCount(null)})},12e4)}},{key:"clearPolling",value:function(){g&&this.$interval.cancel(g),v&&this.$interval.cancel(v)}},{key:"printersHasChanged",value:function(){this.beat.browser.invoke("pc.print.getPrinters").then(e=>{var t=e.filter(e=>e.isEnabled).length;t<this.printerCount||0===t?f.a.activate("printerDisconnect"):f.a.remove("printerDisconnect");this.printerCount=t})}},{key:"showUpdateTomorrow",value:function(){this.updateTimeModal=!1;const e=p()().startOf("day").unix();window.localStorage[this.rid+"setPromisedCookingTimeupdateTime"]=e}},{key:"getNewOrder",value:function(){if(this.autoConfirm&&h.a.getNewOrderCount()>0&&!m.a.queryOrder().length){let e=h.a.getNewOrderIds();this.OrderAction.queryUnprocessedOrder(e).catch(e=>{this.Alert.show(e.message,!0)})}}},{key:"getMarketManagerQuestions",value:function(){this.isEvaluateShow&&this.arenaAction.getMarketManagerQuestions(this.rid).then(()=>{this.marketManagerquestions=u.a.getMarketManagerQuestions();this.marketManagerquestions.forEach(e=>{e.answer=0})})}},{key:"submitEvaluation",value:function(){this.Alert.show("提交成功"),this.isEvaluateShow=!1;var e=this.marketManagerquestions.map(e=>({questionNum:e.questionNum,answerList:[e.answerList[e.answer]]}));const t=[this.rid,e];this.arenaAction.setMarketManagerAnswer(...t)}},{key:"initCommissionAdvertise",value:function(){const e=window.localStorage.hasSawCommissionBanner;return this.isCorrectState()&&!this.show_bid_banner&&!e}},{key:"isCorrectState",value:function(){const e=this.$state.current.name;return!["app.shop.order.processing","app.shop.order.querying","https://shadow.elemecdn.com/faas/melody/app.shop.food"].some(t=>e.match(t))}},{key:"enterMarketCommission",value:function(){window.localStorage.setItem("hasSawCommissionBanner",!0),this.show_commission_banner=!1,this.$state.go("app.shop.pay.business.commission.index")}},{key:"cancelEnterMarketCommission",value:function(){window.localStorage.setItem("hasSawCommissionBanner",!0),this.show_commission_banner=!1}},{key:"enterMarketBid",value:function(){this.analytics.trackEvent("2275",{ext1:"1"}),this.$state.go("app.shop.pay.bussiness.bid.index")}},{key:"cancelEnterMarketBid",value:function(){this.analytics.trackEvent("2275",{ext1:"0"})}}]),e}();y.$inject=["$scope","$state","analytics","Alert","ArenaAction","ShopDeliveryAction","OrderAction","beat","config","ksid","XShard","$interval","GrayAction","ShopDecoAction"],t.default=y},qNqt:function(e,t,n){"use strict";function i(e){e.state("https://shadow.elemecdn.com/faas/melody/app.chainshop.bill",{url:"/bill",views:{"wrapper@app":o},data:{pageId:"425"}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a);i.$inject=["$stateProvider"];let o=n("Aik2");s.a.module("app").config(i)},qUhT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n.n(i),s=n("36tV");a.a.module("app").config(s.a)},qYZz:function(e,t,n){"use strict";n("rBLx")},qy0C:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDQ0IDQ0Ij4KICAgIDxwYXRoIGZpbGw9IiM2N0MyM0EiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTM1LjQyMiA5LjM1MmMtOC4zNyA1LjM2My0xNC40MzYgMTIuMTA1LTE3LjE2OSAxNS41MDFsLTYuNjczLTUuNDYxLTIuOTU2IDIuNDc2TDIwLjE2NSAzNC4xMmMxLjk5My01LjMwNyA4LjI4LTE1LjY5MiAxNS45NjItMjMuMDdsLS43MDUtMS42OTh6TTIyLjAxIDQ0QzkuODYgNDQuMDA1LjAwNiAzNC4xNiAwIDIyLjAxLS4wMDUgOS44NiA5Ljg0LjAwNiAyMS45OSAwIDM0LjE0LS4wMDUgNDMuOTk0IDkuODQgNDQgMjEuOTljLjAwNSAxMi4xNS05Ljg0IDIyLjAwNC0yMS45OSAyMi4wMXoiLz4KPC9zdmc+Cg=="},"r+5W":function(e,t){e.exports='<div class=dashboard-feedback> <dashboard-box-header title=待处理反馈 nav-title=顾客评价 nav-state=app.shop.comments ubt-id=2963></dashboard-box-header> <div class=dashboard-box-content> <div> <span class=count ng-class="{zero: !$ctrl.negative}" ui-sref=app.shop.comments ubt-click=2961>{{$ctrl.negative}}</span> <span class=count ng-class="{zero: !$ctrl.comment}" ui-sref=app.shop.comments ubt-click=2962>{{$ctrl.comment}}</span> </div> <div> <span ui-sref=app.shop.comments ubt-click=2961>未回复差评</span> <span ui-sref=app.shop.comments ubt-click=2962>未回复评价</span> </div> </div> </div> '},rBLx:function(e,t,n){"use strict";function i(e){e.state("password-set",{url:"/password-set",views:{"@":s}})}i.$inject=["$stateProvider"];var a=n(0),s=n("Hgq0");a.module("app").config(i)},raHX:function(e,t,n){"use strict";var i=n("//Fk"),a=n.n(i),s=n("Zx67"),o=n.n(s),r=n("Zrlr"),c=n.n(r),l=n("wxAW"),p=n.n(l),u=n("zwoO"),d=n.n(u),h=n("Pf15"),m=n.n(h),f=n("a+F3"),g=n("cA+x"),v=n.n(g),y=n("Eoz/"),w=n.n(y);let I=function(e){function t(){return c()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),p()(t,[{key:"_$onInit",value:function(){return a.a.all([this.getOrderStats(),this.getCrmGray()]).then(e=>{let t=e[0];this.today=t.today;this.yestday=t.yestday;this.crmGrayEnable=e[1]})}},{key:"getYesterDayCustomerStats",value:function(){let e=w()(v()(new Date,1),"YYYY-MM-DD[T]00:00:00"),t=w()(v()(new Date,1),"YYYY-MM-DD[T]23:59:59");return this.db.getCustomerStatistics(this.rid,e,t)}},{key:"getTodayCustomerStats",value:function(){let e=w()(new Date,"YYYY-MM-DD[T]00:00:00"),t=w()(new Date,"YYYY-MM-DD[T]HH:mm:ss");return this.db.getCustomerStatistics(this.rid,e,t)}},{key:"getOrderStats",value:function(){return this.db.getStatsData(this.rid)}},{key:"getCrmGray",value:function(){return this.db.getCrmGray(this.rid)}},{key:"gotoCrm",value:function(){this.state.go("https://shadow.elemecdn.com/faas/melody/app.shop.activity.crm")}}]),t}(f.a);t.a={template:n("9MC5"),controller:I}},roBa:function(e,t,n){"use strict";var i=n("//Fk"),a=n.n(i),s=n("YEW4"),o=n.n(s),r=n("o5Mu"),c=n.n(r),l=n("v+2J"),p=n.n(l);var u=null;t.a={init(){if(u)return a.a.resolve(u);var e=window.indexedDB.open("sound-database",8);return new a.a((t,n)=>{e.onsuccess=function(e){u=e.target.result,t(u)};e.onupgradeneeded=function(e){var t=[];u=e.target.result,o()(u.objectStoreNames,e=>{t.push(e)}),-1===t.indexOf("option")&&u.createObjectStore("option",{keyPath:"type"}),-1===t.indexOf("sound")&&u.createObjectStore("sound",{keyPath:"name"})};e.onerror=(e=>{window.perf&&window.perf.sendEvent({name:"indexedDB初始化失败",id:"S1cENX1Jf",data:{type:"soundDB"}});return this.deleteDatabase()})})},updateSettings(e){return this.init().then(t=>{if(!t)return a.a.resolve();var n=t.transaction("sound","readwrite");var i=n.objectStore("sound");i.put(e)})},getSettings(){return this.init().then(e=>{var t={networkDisconnect:{name:"networkDisconnect",type:1,times:1,optionTypes:[1],optionTimes:[1,10]},printerDisconnect:{name:"printerDisconnect",type:1,times:1,optionTypes:[1],optionTimes:[1,10]},newOrder:{name:"newOrder",type:1,times:10,optionTypes:[0,1],optionTimes:[1,3,10]},autoProcess:{name:"autoProcess",type:1,times:1,optionTypes:[0,1],optionTimes:[1,3]},printError:{name:"printError",type:1,times:1,optionTypes:[1],optionTimes:[1]},othersConfirmOrder:{name:"othersConfirmOrder",type:1,times:1,optionTypes:[1],optionTimes:[1]},exception:{name:"exception",type:1,times:3,optionTypes:[1],optionTimes:[1,3,10]},cancel:{name:"cancel",type:1,times:3,optionTypes:[1],optionTimes:[1,3,10]},booking:{name:"booking",type:1,times:3,optionTypes:[1],optionTimes:[1,3,10]},refund:{name:"refund",type:1,times:3,optionTypes:[1],optionTimes:[1,3,10]},urge:{name:"urge",type:1,times:3,optionTypes:[1],optionTimes:[1,3,10]}};if(!e)return a.a.resolve(t);var n=e.transaction("sound","readonly");var i=n.objectStore("sound");return new a.a((e,n)=>{var a=i.openCursor();a.onsuccess=function(n){var i=n.target.result;i?(p()(c()(t,{name:i.value.name}),i.value),i.continue()):e(t)}})}).catch(e=>{console.error(e)})},getOption(){return this.init().then(e=>{var t={volume:{type:"volume",value:1}};if(!e)return a.a.resolve(t);var n=e.transaction("option","readonly");var i=n.objectStore("option");return new a.a((e,n)=>{var a=i.openCursor();a.onsuccess=function(n){var i=n.target.result;i?(p()(c()(t,{type:i.value.type}),i.value),i.continue()):e(t)}})}).catch(e=>{console.error(e)})},updateOption(e){return this.init().then(t=>{if(!t)return a.a.resolve();var n=t.transaction("option","readwrite");var i=n.objectStore("option");var s=i.get(e.type);s.onsuccess=function(t){var n={type:e.type,value:e.value};i.put(n)};s.onerror=function(e){console.error(e)}}).catch(e=>{console.error(e)})},deleteDatabase(){return window.indexedDB.deleteDatabase("sound-database"),new a.a(e=>{setTimeout(()=>{u=null;e(null)},2e3)})}}},rqGo:function(e,t,n){"use strict";function i(e){var t=C.a.copy(e);return t.payment=t.payment&&t.payment.toLowerCase(),t.paymentStatus=t.paymentStatus&&t.paymentStatus.toLowerCase(),t.status=t.status&&t.status.toLowerCase(),t.feedbackStatus=t.feedbackStatus&&t.feedbackStatus.toLowerCase(),t.callDeliveryType=t.callDeliveryType&&t.callDeliveryType.toLowerCase(),t.groups.forEach(e=>{e.type=e.type.toLowerCase()}),"number"!=typeof t.activeTime&&(t.activeTime=O()(t.activeTime).unix()),"number"!=typeof t.bookedTime&&(t.bookedTime=t.bookedTime&&O()(t.bookedTime).unix()),t.hasOwnProperty("consigneeSecretPhones")&&(t.consigneePhones=t.consigneeSecretPhones),t}function a(e,t){return-1!==e.indexOf(t)}function s(e,t){return-1!==e.indexOf(t)}function o(e,t){var n=!1;return e.map(e=>{var i=p()(e);var a=Math.pow(10,i.length);var s=t%a;s===parseInt(i)&&(n=!0)}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=n("//Fk"),c=n.n(r),l=n("mvHQ"),p=n.n(l),u=n("Zx67"),d=n.n(u),h=n("Zrlr"),m=n.n(h),f=n("wxAW"),g=n.n(f),v=n("zwoO"),y=n.n(v),w=n("Pf15"),I=n.n(w),A=n("A7Dr"),b=n.n(A),S=n(0),C=n.n(S),k=n("PJh5"),O=n.n(k),T=n("QAIe"),D=n.n(T),N=n("NGSm"),E=(n.n(N),n("pPbq")),R=n("9UnT"),M=n("KcnZ"),P=n("RG6k"),L=n("4fS4"),U=n("QD+Y"),x=n("KB7M"),_=n("U1Wr"),j=n("GNCq");let G=function(e){function t(e,n,i,a,s,o,r,c){m()(this,t);var l=y()(this,(t.__proto__||d()(t)).call(this));return l.beat=e,l.newApi=e.newOrder.app,l.Handle=n,l.Alert=i,l.analytics=a,l.clientVersion=s,l.getOldOrder=o.getOldOrder,l.shopId=null,l.$interval=r,l.isInSoundGray=!1,l.ClientService=c,l}return t.$inject=["beat","Handle","Alert","analytics","clientVersion","orderCardService","$interval","ClientService"],I()(t,e),g()(t,[{key:"setShopId",value:function(e){this.shopId=parseInt(e)}},{key:"queryUnprocessedOrder",value:function(e=[]){return this.traceOrderLog(e,"GET_ORDER_DETAIL_BY_POLLING"),this.newApi.invoke("OrderService.queryOrder",{shopId:this.shopId,orderFilter:"UNPROCESSED_ORDERS",condition:{orderIds:e}}).then(e=>{this.dispatch({actionType:E.a.UPDATE_ORDERS,orders:e});var t=e.map(function(e){return e.id});this.dispatch({actionType:E.a.UPDATE_ORDERIDS,orderIds:t})})}},{key:"confirmOrder",value:function(e){var t=Date.now(),n=e.id;let i=[];return this.analytics.blatency("confirmOrderb",e.receivedTime,t),this.newApi.invoke("OrderService.confirmOrder",{orderId:n}).then(a=>{e.statusForPrint=a.statusForPrint;if(_.a)try{i=x.a.getArrayItem("localConfirmOrder"),i.unshift(n),i=i.filter((e,t)=>t<20),x.a.setItem("localConfirmOrder",i)}catch(e){console.log(e)}else i=j.a.getItem("localConfirmOrder")||[],i.unshift(n),i=i.filter((e,t)=>t<20),j.a.setItem("localConfirmOrder",i);this.analytics.latency("confirmOrder",t,Date.now());this.removeOrder(n);this.Alert.show("确认订单成功")}).catch(e=>{this.removeOrder(n);this.getNewOrderCount();this.Handle.handleError(e);throw e})}},{key:"getOrderDetail",value:function(e){return this.newApi.invoke("OrderService.getOrderDetail",{orderId:e})}},{key:"removeOrder",value:function(e){this.dispatch({actionType:E.a.REMOVE_ORDER,orderId:e});let t=R.a.queryOrder().length;this.dispatch({actionType:E.a.UPDATE_NEW_ORDER_COUNT,newOrderCount:t})}},{key:"traceOrderLog",value:function(e,t,n={}){return this.newApi.invoke("TraceService.trace",{orderIds:e,action:t,extra:n})}},{key:"getNewOrderCount",value:function(e=this.shopId,t=[]){var n=this;return this.newApi.invoke("PollingService.pollingForHighFrequency",{shopId:e,orderIds:t}).then(e=>{var i=e.newOrderCount;var a=M.a.getAutoProcessInfo(this.shopId)[0];this.dispatch({actionType:E.a.UPDATE_NEW_ORDER_COUNT,newOrderCount:i});this.dispatch({actionType:E.a.UPDATE_NEW_ORDERIDS,orderIds:e.newOrderIds});L.a._enabled||(L.a.activate=function(){},L.a.remove=function(){});i>0?(this.ClientService.startFlashWindow(),a||(L.a.activate("newOrder"),this.ClientService.callSwitchToFront()),N.container.broadcast("order.queryNewOrder",JSON.parse(p()(e.newOrderIds)))):(this.ClientService.stopFlashWindow(),L.a.remove("newOrder"),N.container.broadcast("order.clearNewOrder"));var s="自动接单关闭";a&&(s="自动接单开启");var o=M.a.isClientEnv();if(i>0)if(o)this.ClientService.haneAvailablePrinter().then(i=>{var a=i?"已连接打印机":"未连接打印机";var o=`${s}, ${a}`;t.length?n.traceOrderLog(e.newOrderIds,"GET_ORDER_ID_BY_LONG_CONNECT",{message:o}):n.traceOrderLog(e.newOrderIds,"GET_ORDER_ID_BY_POLLING",{message:o})});else{let i=`${s}, 非饿了么客户端`;t.length?n.traceOrderLog(e.newOrderIds,"GET_ORDER_ID_BY_LONG_CONNECT",{message:i}):n.traceOrderLog(e.newOrderIds,"GET_ORDER_ID_BY_POLLING",{message:i})}}).catch(t=>{var i={result:"轮询失败",shopId:e,error:p()(t)};"CONNECTION_ERROR"https://shadow.elemecdn.com/faas/melody/===t.code?i.reason="网络相关原因":i.reason="其他可能原因";n.traceOrderLog([],"GET_ORDER_ID_BY_POLLING",i);throw t})}},{key:"getRemindOrderCount",value:function(){if(!this.isInSoundGray){var e=this.shopId,t={bookingOrderType:"DUE_SIXTY_MINUTE",pureRefundOrderType:"PURE_REFUND_ALL"};return this.newApi.invoke("PollingService.pollingForLowFrequency",{shopId:e,condition:t}).then(e=>{this.dispatch({actionType:E.a.SET_REMINDER_QUERY_COUNT,remindCount:e})})}}},{key:"shopCallDelivery",value:function(e,t=!1,n=0){var i=this;return i.newApi.invoke("DeliveryService.callDelivery",{orderId:e,isAuto:t,fee:n}).catch(e=>{i.Handle.handleError(e);throw e})}},{key:"loadUnprocessedOrders",value:function(){var e=this;return e.newApi.invoke("OrderForShopsService.getUnprocessedOrders",{restaurantId:null}).then(t=>{e.dispatch({actionType:E.a.LOAD_UNPROCESSED_ORDERS,orders:t});t.length>0?(L.a.activate("newOrder"),this.ClientService.startFlashWindow()):(L.a.remove("newOrder"),this.ClientService.stopFlashWindow())}).catch(t=>{e.Handle.handleError(t);throw t})}},{key:"loadUnprocessedRefundingOrders",value:function(){var e=this;return e.newApi.invoke("OrderForShopsService.getUnprocessedRefundingOrders",{restaurantId:null}).then(t=>{e.dispatch({actionType:E.a.LOAD_UNPROCESSED_REFUNDING_ORDERS,orders:t})}).catch(t=>{e.Handle.handleError(t);throw t})}},{key:"copyOrder",value:function(e,t){var n=this,i="",a=O()(1e3*e.activeTime).format("MM月DD日");return i+=t.name,i+="["+a+" No."+e.daySn+"]",i+=" "+e.consigneeAddress,i+="["+e.consigneePhones.join(",")+"]",e.groups.forEach(function(e){e.items.forEach(function(e){i+=e.name+" "+e.quantity+"份 "})}),i+="/共"+e.receivable+"元",n.beat.browser.invoke("https://shadow.elemecdn.com/faas/melody/pc.clipboard.set",{data:i}).then(e=>{e?n.Alert.show("复制成功"):n.Alert.show("复制失败",!0)}).catch(e=>{n.Handle.handleError(e);throw e})}},{key:"confirmPrintOrder",value:function(e,t,n=!0){var i=this,a=Date.now();return i.analytics.blatency("confirmOrderb",e.receivedTime,a),i.newApi.invoke("OrderService.confirmOrder",{orderId:e.id},{header:{"X-Shard":"shopid="+t.id}}).then(()=>{i.printOrder(e,t)}).then(()=>{i.analytics.latency("confirmOrder",a,Date.now());n&&i.dispatch({actionType:E.a.REMOVE_UNPROCESSED_ORDER,orderId:e.id});0===R.a.getUnprocessedOrders().length&&(L.a.remove("newOrder"),this.ClientService.stopFlashWindow());i.Alert.show("确认订单成功")}).catch(function(e){throw i.Handle.handleError(e),e})}},{key:"printOrder",value:function(e,t){let n=this;var a=i(e);return this.ClientService.printOrderByTpl({normalTpl:U.a.getNormalTpl(),smallTpl:U.a.getSmallTpl(),data:U.a.getPrintData(a,t)}).then(t=>{t?n.Alert.show("打印订单成功"):(n.Alert.show("打印失败",!0),n.analytics.throw("printError",e))}).catch(function(e){throw n.Handle.handleError(e),e})}},{key:"invalidateOrder",value:function(e,t,n){var i=this;return i.newApi.invoke("OrderService.invalidateOrder",{orderId:e.id,typeCode:t,remark:n},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>{i.Alert.show("标为无效订单成功");return!0}).then(()=>i._retrieve(e)).catch(function(e){throw i.Handle.handleError(e),e})}},{key:"_retrieve",value:function(e){var t=this;return t.loadUnprocessedOrders(),t.newApi.invoke("OrderForShopsService.getOrder",{orderId:e.id}).then(e=>e).catch(function(e){throw t.Handle.handleError(e),e})}},{key:"loadProcessedOrders",value:function(e,t=1){var n=this,i=25*(t-1),a={PROCESSED_ORDER_QUERY:{beginTime:O()().startOf("day").format().substring(0,19),endTime:O()().add(1,"days").startOf("day").format().substring(0,19),statuses:[],payments:[],refundStatuses:[],ascending:!1}},s=this.newApi.invoke("OrderForShopsService.getProcessedOrders",{restaurantId:e||null,offset:i,limit:25,query:a.PROCESSED_ORDER_QUERY}),o=this.newApi.invoke("OrderForShopsService.getProcessedOrderStats",{restaurantId:e||null,query:a.PROCESSED_ORDER_QUERY});return this.dispatch({actionType:E.a.LOAD_PROCESSED_ORDERS,index:1*t}),o.then(e=>{this.dispatch({actionType:E.a.LOAD_PROCESSED_ORDERS,orderStats:e,index:1*t})}).catch(function(e){throw n.Handle.handleError(e),e}),s.then(e=>{n.dispatch({actionType:E.a.LOAD_PROCESSED_ORDERS,orders:e,index:1*t})}).catch(function(e){throw n.Handle.handleError(e),e})}},{key:"loadProcessingRefundingOrders",value:function(e){var t=this;return t.newApi.invoke("OrderForShopsService.getProcessingRefundingOrders",{restaurantId:e||null}).then(function(e){t.dispatch({actionType:E.a.LOAD_PROCESSING_REFUNDING_ORDERS,orders:e})}).catch(function(e){throw t.Handle.handleError(e),e})}},{key:"getUnrepliedChatListView",value:function(e){var t=this;return t.newApi.invoke("OrderForShopsService.getUnrepliedChatListView",{restaurantId:e}).then(e=>{t.dispatch({actionType:E.a.GET_UNREPLIED_CHAT_LIST_VIEW,unRepliedChatListView:e})})}},{key:"replyChat",value:function(e,t,n){return this.newApi.invoke("OrderService.replyReminderOrder",{reminderId:e,content:t},{header:{"X-Shard":"shopid="+n}})}},{key:"agreeRefund",value:function(e,t){var n=this;return n.newApi.invoke("PureRefundOrderService.agreeForShops",{orderId:e.id,password:t},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>{n.Alert.show("同意退单成功")}).then(()=>n.loadUnprocessedRefundingOrders()).then(()=>n.loadProcessingRefundingOrders()).catch(function(e){throw n.Handle.handleError(e),e})}},{key:"refuseRefund",value:function(e,t,n){var i=this;return i.newApi.invoke("PureRefundOrderService.disagreeForShops",{orderId:e.id,reason:t,imageUrl:n},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>{i.Alert.show("拒绝退单成功")}).then(()=>i.loadUnprocessedRefundingOrders()).then(()=>i.loadProcessingRefundingOrders()).catch(function(e){throw i.Handle.handleError(e),e})}},{key:"loadOrderProcessRecordsView",value:function(e){return this.newApi.invoke("OrderForShopsService.getOrderProcessRecordsView",{orderId:e}).then(e=>e)}},{key:"singleSearchResultOrders",value:function(e){return this.newApi.invoke("OrderService.searchOrderForPC",{shopId:this.shopId,fuzzyPhrase:e}).then(e=>{this.dispatch({actionType:E.a.LOAD_SEARCH_ORDERS,searchResultOrders:e})})}},{key:"loadSearchChainResultOrders",value:function(e){return this.newApi.invoke("OrderService.searchChainOrder",{orderId:e}).then(e=>{this.dispatch({actionType:E.a.GET_SEARCH_CHAIN_ORDERS,searchResultOrders:e})}).catch(e=>{this.dispatch({actionType:E.a.GET_SEARCH_CHAIN_ORDERS,searchResultOrders:[]})})}},{key:"loadProcessedOrdersCurrent",value:function(){var e=R.a.getPageIndex();this.loadProcessedOrders(null,e)}},{key:"callDelivery",value:function(e,t){var n=this;return n.newApi.invoke("DeliveryService.callDeliveryForShops",{orderId:e},{header:{"X-Shard":"shopid="+t}}).then(()=>{n.loadProcessedOrdersCurrent();return"sent"}).catch(e=>{n.loadProcessedOrdersCurrent();n.Handle.handleError(e);throw e})}},{key:"callDeliveryNoReload",value:function(e,t){var n=this;return n.newApi.invoke("DeliveryService.callDeliveryForShops",{orderId:e},{header:{"X-Shard":"shopid="+t}}).then(()=>"sent").catch(e=>{n.Handle.handleError(e);throw e})}},{key:"cancelDelivery",value:function(e,t){var n=this;return n.newApi.invoke("DeliveryService.cancelDelivery",{orderId:e},{header:{"X-Shard":"shopid="+t}}).then(()=>{n.loadProcessedOrdersCurrent();return"cancelled"}).catch(e=>{n.loadProcessedOrdersCurrent();n.Handle.handleError(e);throw e})}},{key:"setHostingOrderSelfProcess",value:function(e){var t=this;return t.newApi.invoke("DeliveryService.setHostingOrderSelfProcess",{orderId:e.id},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>t._retrieve(e))}},{key:"setDeliveryBySelf",value:function(e){var t=this;return t.newApi.invoke("DeliveryService.setHostingOrderSelfProcess",{orderId:e.id},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>t._retrieve(e))}},{key:"addOrderRiderEvaluation",value:function(e){this.dispatch({actionType:E.a.ADD_ORDER_RIDER_EVALUATION,orderId:e.orderId})}},{key:"deliveryBySelfOnCancelled",value:function(e){var t=this;return t.newApi.invoke("DeliveryService.deliveryBySelfOnCancelled",{orderId:e.id},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>t._retrieve(e))}},{key:"noMoreDeliveryOnCancelled",value:function(e){var t=this;return t.newApi.invoke("DeliveryService.noMoreDeliveryOnCancelled",{orderId:e.id},{header:{"X-Shard":"shopid="+e.restaurantId}}).then(()=>t._retrieve(e))}},{key:"getWSGray",value:function(e){return this.beat.newOrder.app.invoke("GrayService.getIsGray",{shopId:e,feature:"SHOP_WEBSOCKET"}).then(e=>{this.dispatch({actionType:E.a.SET_WS_GRAY,inWhiteList:e.inWhiteList})}).catch(()=>{this.dispatch({actionType:E.a.SET_WS_GRAY,inWhiteList:!1})})}},{key:"getSearchTags",value:function(){var e=this;let t=R.a.getSearchTags();return t.length?c.a.resolve(t):e.newApi.invoke("MenuService.getSearchLabels").then(e=>{this.dispatch({actionType:E.a.SET_SEARCH_TAGS,tags:e});return e})}},{key:"queryGrayInfo",value:function(){return fetch("https://crayfish.elemecdn.com/melody-order.faas.ele.me@json/sound").then(e=>e.json()).then(e=>{var t=b()(P.a.getCurrentRestaurant(),"cityId");this.isInSoundGray=a(e.cityIdWhiteList,t)||s(e.shopIdWhiteList,this.shopId)||o(e.shopIdTails,this.shopId);this.dispatch({actionType:E.a.SET_SOUND_GRAY,isInSoundGray:this.isInSoundGray})})}},{key:"pollingFor2Min",value:function(){if(this.isInSoundGray){var e=this.shopId;this.newApi.invoke("PollingService.pollingFor2Min",{shopId:e}).then(e=>{this.dispatch({actionType:E.a.SET_2M_POLLING_COUNT,pollingCount:e});e.exceptionalOrderCount>0?L.a.activate("exception"):L.a.remove("exception");e.cancelOrderCount>0?L.a.activate("cancel"):L.a.remove("cancel");N.container.broadcast("order.reminderOrderCount")})}}},{key:"pollingFor5Min",value:function(){if(this.isInSoundGray){var e=this.shopId,t={bookingOrderType:"DUE_SIXTY_MINUTE",pureRefundOrderType:"PURE_REFUND_ALL"};this.newApi.invoke("PollingService.pollingFor5Min",{shopId:e,condition:t}).then(e=>{this.dispatch({actionType:E.a.SET_5M_POLLING_COUNT,pollingCount:e});e.unprocessedBookingOrderCount>0?L.a.activate("booking"):L.a.remove("booking");e.urgeOrderCount>0?L.a.activate("urge"):L.a.remove("urge");e.pureRefundOrderCount>0?L.a.activate("refund"):L.a.remove("refund");N.container.broadcast("order.reminderOrderCount")})}}},{key:"queryPolling",value:function(e){if(this.isInSoundGray)switch(e){case"2m":this.pollingFor2Min();break;case"5m":this.pollingFor5Min()}else this.getRemindOrderCount()}}]),t}(D.a.ActionCreator);C.a.module("app").service("OrderAction",G)},s0on:function(e,t,n){t.template=n("ibYa"),t.controller=n("bIYs").default,t.controllerAs="$ctrl"},s9zU:function(e,t,n){e.exports.controller=n("j2tr").default,e.exports.template=n("7j7G")},sO4Y:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(e,t,i,s,r,l,u,h,w,A,D,N,E,R){function M(){e.question={},e.allRestaurants=g.a.getAllRestaurants(),e.currentRestaurant=g.a.getCurrentRestaurant(),e.currentProfile=f.a.getCurrentProfile(),e.isMulti=g.a.isMulti()}if(e.isOverV505Client=window.isOverV505Client,e.isClientEnv=window.__napos__sendToBrowser__,y.a._js_error?A.trackEvent(3828,{error:y.a._js_error}):y.a._enabled||A.trackEvent(3827),M(),g.a.onChange(M),e.Alert=s,e.getPageName=function(){return t.current.name},e.openFixedNotice=(()=>{let e=window.location.origin;let t=document.querySelector("base").href.split("/").splice(3).join("/");let n=document.body.clientWidth;let i=document.body.clientHeight;window.open(e+"/"+t+"notice","_blank","width="+n+", height="+i,!1)}),e.navFullWidth=window.innerWidth>=1280,e.showMask=!1,e.handleNavMouseover=(()=>{!e.navFullWidth&&window.innerWidth<1280&&(e.navFullWidth=!0,e.showMask=!0)}),e.handleNavMouseleave=(()=>{e.navFullWidth&&window.innerWidth<1280&&!e.isMulti&&(e.navFullWidth=!1,e.showMask=!1,e.$broadcast("navClose"))}),window.addEventListener("resize",()=>{e.$apply(()=>{e.isMulti||(e.navFullWidth=window.innerWidth>=1280,window.innerWidth<1280&&e.$broadcast("navClose"))})}),e.$on("$stateChangeSuccess",()=>{e.isMulti||(e.navFullWidth=window.innerWidth>=1280,e.showMask=!1,window.innerWidth<1280&&e.$broadcast("navClose"))}),a(h)){if(g.a.isMulti()){let e=m()(g.a.getCurrentRestaurant(),"id",null);r.loadUnprocessedOrders(e),i(function(){let e=m()(g.a.getCurrentRestaurant(),"id",null);r.loadUnprocessedOrders(e)},9e4),i(function(){let e=g.a.getCurrentRestaurant(),t=e?e.id:null;r.loadUnprocessedRefundingOrders(t)},6e5)}if(i(function(){let e=g.a.getCurrentRestaurant(),t=e?e.id:null;t&&l.getNewNoticeNum(t)},36e5),i(function(){let e=g.a.getCurrentRestaurant(),t=e?e.id:null;t&&u.getNotices(t).catch(function(){})},6e5),!g.a.isMulti()){let e=g.a.getCurrentRestaurant(),t=e?e.id:null;t&&function(e,t,n=null){e.call(n),i(()=>{e.call(n)},t)}(()=>{w.fetchFeedbackCount(t)},36e5)}}e.headsetSvg=n("VBPs");let P=null;if(e.openCustomerService=function(){null==P||P.closed?P=window.open("https://ecs-service.ele.me/live?from=napos","_blank","width=800,height=600","false"):P.focus()},e.othersConfirmOrder=[],e.addOthersConfirmOrder=function(t){e.othersConfirmOrder.push(t)},e.closeOthersConfirmOrder=function(t){y.a.remove("othersConfirmOrder"),e.othersConfirmOrder=e.othersConfirmOrder.filter(e=>e.id!==t)},e.printOthersConfirmOrder=(()=>{var t=p()(function*(t){let n=t.id,i=yield r.getOrderDetail(n);E.printOrder(i),e.closeOthersConfirmOrder(n)});return function(e){return t.apply(this,arguments)}})(),!g.a.isMulti()){let t=m()(g.a.getCurrentRestaurant(),"id");!function(t){let i=null,a=g.a.isChain()?new S.a(r.getNewOrderCount.bind(r,t)):null;if(window.__napos__sendToBrowser__)i=I()(D.websocketUrl,{appId:"napos",token:N,rid:t});else{const e=n("wz84");i=b()(e,D.websocketUrl,{appId:"napos",token:N,rid:t})}var s={unprocess:"order.order.unprocess",confirm:"order.order.confirm",reject:"order.order.reject",user_cancel:"order.order.user_cancel",cs_cancel:"order.order.cs_cancel",food_prepared:"order.order.food_prepared",exception:"order.order.exception",clearFailOrder:"order.order.settle_invalid",changePhone:"order.order.phone"};i.on(s.unprocess,e=>{r.traceOrderLog(e.orderIds,"LONG_CONNECTION_ARRIVE_CLIENT");g.a.isChain()?a.push(e.orderIds):r.getNewOrderCount(t,e.orderIds)}),i.on(s.confirm,(()=>{var n=p()(function*(n){var i={NAPOS:"napos",OPEN_API:"开放平台",UNION:"集中接单（搬单）",UNION_GENERAL:"连锁店总店接单",PHONE:"电话接单",SYSTEM:"系统"};["OPEN_API","UNION","UNION_GENERAL","PHONE","SYSTEM"].includes(n.operator.platform)&&(n.platformName=i[n.operator.platform]||"系统",C.container.broadcast("order.confirm",JSON.parse(c()(n))));var a=v.a.getAutoProcessInfo(t);if(o()(a,1)[0]){if(!(yield E.haveEnabledPrinter2()))return void console.log("打印机没有连接");setTimeout(function(){let t=[];t=O.a?k.a.getArrayItem("localConfirmOrder"):T.a.getItem("localConfirmOrder")||[],n.orderIds.forEach((()=>{var i=p()(function*(i){if(!t.includes(i)){const t="SYSTEM"===n.operator.platform?"其它设备":n.platformName;e.addOthersConfirmOrder({id:i,platformName:t,daySn:n.daySn}),e.$digest(),y.a.activate("othersConfirmOrder")}});return function(e){return i.apply(this,arguments)}})())},1e3)}});return function(e){return n.apply(this,arguments)}})()),i.on(s.reject,e=>{r.getNewOrderCount()}),i.on(s.user_cancel,e=>{r.pollingFor2Min()}),i.on(s.cs_cancel,e=>{r.getNewOrderCount()}),i.on(s.food_prepared,e=>{C.container.broadcast("order.food_prepared","wsMessage")}),i.on(s.exception,e=>{r.pollingFor2Min()}),i.on(s.clearFailOrder,e=>{e.orderIds.forEach(e=>{E.delFailOrder({orderId:e},!1)})}),i.on(s.changePhone,e=>{C.container.broadcast("order.changePhone",e)});let l=d()(()=>{throw new Error("webSocket: order socket connect Error!")});i.on("error",l)}(t)}R.browser.on("pc.system.network",e=>{C.container.broadcast("networkAlter",e)})}function a(t){let n=t||"4.3.0",i=n.split("."),a=i[0]||0,s=i[1]||0,o=i[2]||0,r=e.localStorage.getItem("ksid");return 1e3*a*1e3+1e3*s+1*o>=4003e3?r:void 0!==e.__napos__sendToBrowser__||r}t.default=i;var s=n("d7EF"),o=n.n(s),r=n("mvHQ"),c=n.n(r),l=n("exGp"),p=n.n(l),u=n("QQCc"),d=n.n(u),h=n("A7Dr"),m=n.n(h),f=n("t4A1"),g=n("RG6k"),v=n("KcnZ"),y=n("4fS4"),w=n("ASuf"),I=n.n(w),A=n("wMwe"),b=n.n(A),S=n("9HWZ"),C=n("NGSm"),k=(n.n(C),n("KB7M")),O=n("U1Wr"),T=n("GNCq");i.$inject=["$scope","$state","$interval","Alert","OrderAction","NoticeAction","PayNoticeAction","clientVersion","NavNoticeAction","analytics","config","ksid","ArenaAction","beat"]}.call(t,n("DuR2"))},sVXQ:function(e,t){e.exports=' <div ui-view=tab-content class=order></div> <div class=message> <div class=msg-title ng-track="{{getPageName()}}-message-todo"> 待处理催单 </div> <div class=msg-container> <div class="card-message card-red" ng-repeat="chat in unRepliedChatListView.chats"> <div class=msg-info-container> <div class=serial-number>#{{chat.order.daySn}}</div> <div class=msg-info-content> <p class=num ng-show="chat.times > 1">该用户第{{chat.times}}次催单</p> <div class=msg-user-info> <span class=username>{{chat.order.consigneeName}}</span> <span class=mr5>{{chat.order.consigneePhones[0]}}</span> <span> 已等待{{ getPassedMinutes(chat.order.activeTime) }}分钟 </span> </div> <div class=msg-content> {{chat.order.consigneeAddress}} </div> </div> </div> <ul class=msg-quick-content ng-show=chat.replayShow> <li ng-click="https://shadow.elemecdn.com/faas/melody/chat.replayContent = quickReplyContent.one" ng-track="{{getPageName()}}-message-q1">{{quickReplyContent.one}}</li> <li ng-click="https://shadow.elemecdn.com/faas/melody/chat.replayContent = quickReplyContent.two" ng-track="{{getPageName()}}-message-q2">{{quickReplyContent.two}}</li> <li ng-click="chat.replayContent = quickReplyContent.three" ng-track="{{getPageName()}}-message-q3">{{quickReplyContent.three}}</li> <li ng-click="https://shadow.elemecdn.com/faas/melody/chat.replayContent = quickReplyContent.four" ng-track="{{getPageName()}}-message-q4">{{quickReplyContent.four}}</li> </ul> <div class=msg-answer ng-show=chat.replayShow> <textarea ng-model=chat.replayContent placeholder=不超过30个字 maxlength=30>\n        </textarea> </div> <div class="horizontal end-justify"> <a class="btn btn-primary" ng-click=replayMessage(chat) ng-track="{{getPageName()}}-message-reply">回复</a> </div> </div> <p ng-show="unRepliedChatListView.chats.length === 0" class=no-message> 暂时没有新催单 </p> </div> </div> '},sg5U:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/single/stats/business?shopId=${t.restaurantId}`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},t1c4:function(e,t,n){t.template=n("8Bsd"),t.controller=n("pmGq").default,t.controllerAs="$ctrl"},t4A1:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("f4CT"),m=n("QAIe"),f=n.n(m);let g=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.currentProfile={},n.chainKeeper=null,n.isChainRestaurant=null,n.logined=!1,n}return d()(t,e),c()(t,[{key:"getCurrentProfile",value:function(){return this.currentProfile}},{key:"setCurrentProfile",value:function(e){this.currentProfile=e}},{key:"setLoginStatus",value:function(e){this.logined=e}},{key:"isLogined",value:function(){return this.logined}},{key:"getChainKeeper",value:function(){return this.chainKeeper}},{key:"isManager",value:function(){return this.chainKeeper}},{key:"getHandlers",value:function(){return{[h.a.LOAD_CURRENT_PROFILE]:e=>{this.currentProfile=e.currentProfile},[h.a.FETCH_CURRENT_KEEPER]:e=>{this.chainKeeper=e.chainKeeper},[h.a.FETCH_IS_CHAIN_RESTAURANT]:e=>{this.isChainRestaurant=e.isChainRestaurant},[h.a.CHANGE_CURRENT_PROFILE_NAME]:e=>{this.currentProfile.username=e.name}}}}]),t}(f.a.Store);t.a=new g},tK8f:function(e,t,n){"use strict";e.exports=n("NPRn")},tS3V:function(e,t){e.exports='<div class=nav-list> <div class=nav-title> <span class=icon ng-class=icon></span> <span class=nav-text>{{name}}</span> <span ng-class=notice.class> <i>{{notice.text | noticeNum}}</i> </span> <span class="icon icon-group_down"></span> </div> <div class=nav-children ng-transclude></div> </div> '},tWMx:function(e,t,n){"use strict";function i(){return{restrict:"A",link:function(e,t,n){var i=a.a.getPermissions()||{},s=i.permissions||[],o=n.permission.split(",").map(e=>e.trim()),r=s.some(e=>-1!==o.indexOf(e)),c=t[0];r||"true"!==n.disable?r||(c.style.display="none"):(c.setAttribute("disabled",!0),c.classList.add(n.disableClass),c.addEventListener("click",e=>{e.preventDefault();e.stopPropagation()},!0))}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("KcnZ");n(0).module("app").directive("authCheck",i)},tYnN:function(e,t,n){"use strict";function i(e){e.state("passwordReset",{url:"/password-reset",resolve:{resetPasswordInit:a},views:{"":o}})}function a(e){return e.startReset(null)}a.$inject=["ResetPasswordAction"],i.$inject=["$stateProvider"];var s=n(0),o=n("Srfd");s.module("app").config(i)},tcuR:function(e,t,n){t.template=n("3loI"),t.controller=n("Pata").default,t.controllerAs="$ctrl"},tlTg:function(e,t,n){"use strict";function i(e,t,n,i,o){"ngInject";const r=decodeURIComponent(t.path);let c=t.query?`&${decodeURIComponent(t.query)}`:"";"app.chainshop.syncgood"https://shadow.elemecdn.com/faas/melody/===e.current.name?this.src=`${n.goodsUrl}/sync-goods`:"app.shop.physical"https://shadow.elemecdn.com/faas/melody/===e.current.name?(a.container.broadcast("goods.switchToPhysical",{}),this.src=`${n.goodsUrl}/app/single/physical?shopId=${t.restaurantId}`):this.src=i?`${n.goodsUrl}/app/chain/${r}`:`${n.goodsUrl}/app/single/${r}?shopId=${t.restaurantId}${c}`;var l=s.a.schedule(this.src);s.a.watchSrc(o,l.iframe),s.a.hideAppWrapper(),a.container.on("https://shadow.elemecdn.com/faas/melody/path.sync",t=>{const n=encodeURIComponent(t);e.go(".",{path:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("NGSm"),s=(n.n(a),n("CfXW"));i.$inject=["$state","$stateParams","config","isChain","$scope"]},tqnw:function(e,t,n){e.exports.controller=n("/GTU").default,e.exports.template=n("MxEY")},u2MK:function(e,t,n){"use strict";(function(e){function i(t,n,i,a){t.isOverV505Client=window.isOverV505Client,t.mobile="https://shop.ele.me";const r=e.localStorage.getItem("ksid"),c=n.isClientEnv();null!==r&&(console.log("remove ksid"),e.localStorage.removeItem("ksid"),e.location.reload()),t.profiles=o.a.getProfiles()||[],t.loginMode="username",t.kaidian="https://kaidian.ele.me/",t.riskLoginAction=function(){t.riskLogin=!1,t.loginMode="mobile"},t.goKaidian=function(e){c&&(e.preventDefault(),a.browser.invoke("pc.system.launchDefaultBrowser",{url:t.kaidian}))},o.a.onChangeWithScope(()=>{const n=o.a.getLoginResult();const a=s()(n,"successData");t.weakPassword=s()(n,"failureData.weakPassword");t.riskLogin="username"===t.loginMode&&[1,3,4,5].indexOf(s()(n,"https://shadow.elemecdn.com/faas/melody/failureData.code"))>-1;n.succeed&&(e.localStorage.setItem("ksid",a.ksid),e.localStorage.setItem("username",a.username),c?i.addProfile(a).then(e=>{i.launchProfile(e)}):n.needModifyPasswd?e.location.pathname="/password-set":e.location.pathname="/")},t),t.mobileDownload=(n=>{e.__napos__sendToBrowser__&&a.browser.invoke("pc.system.launchDefaultBrowser",{url:t.mobile})})}t.a=i;var a=n("A7Dr"),s=n.n(a),o=n("/wOq");i.$inject=["$scope","LoginAction","LoginProfileAction","beat"]}).call(t,n("DuR2"))},u5Up:function(e,t,n){"use strict";`<document>
    <line>
      <text align="center" font="big">商家小票</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text>发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }} {% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <font align="center">{{ barCode }}</font>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>顾客实付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text>应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <line>
      <text>预计收入</text>
      <text align="right">{{ income }}</text>
    </line>
    <separator char="-" />
    <line>
      <text>{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text>{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text>{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`;t.a=`<document>
    <line>
      <text align="center" font="big">商家小票</text>
    </line>
    <line>
      <text align="center" font="big"></text>
    </line>
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text font="big">饿了么订单 </text>
    </separator>
    <line />
    <line>
      <text align="center">{{ restaurantName }}</text>
    </line>
    {% if statusForPrint %}
      <line>
        <text align="center" font="big">- {{ statusForPrint }} -</text>
      </line>
    {% endif %}
    <line />
    {% if bookedTime %}
      <line>
        <text font="big" align="center">预订单</text>
      </line>
      <line>
        <text font="big" align="center">{{ deliveryTime }}</text>
      </line>
    {% endif %}
    <separator char="-" />
    <line>
      <text>下单时间： {{ activeTime }}</text>
    </line>
    {% if remark %}
      <line>
        <text>备注：{{ remark }}</text>
      </line>
    {% endif %}
    {% if invoiceTitle %}
      <line>
        <text>发票：{{ invoiceTitle }}</text>
      </line>
    {% endif %}
    <line />
    {% block groups %}
      <separator char="-">
        <text> {{ name }} </text>
      </separator>
      {% block items %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }} {% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
        {% if showExtendCode %}
          <line>
            <text>SKU码：{{ extendCode }}</text>
          </line>
        {% endif %}
        {% if showBarCode %}
          <barcode style="normal" value="{{ barCode }}" />
        {% endif %}
        {% if showBarCodeId %}
          <font align="center">{{ barCode }}</font>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% if othersShow %}
      <separator char="-">
        <text> 其他费用 </text>
      </separator>
      {% block others %}
        <line>
          <text>{{ name }}</text>
          <text align="right" space="4">{% if quantity %} ×{{ quantity }}{% endif %}</text>
          <text align="right" space="7"> {{ total }}</text>
        </line>
      {% endblock %}
    {% endif %}
    <separator char="-" />
    <line>
      {% if paymentStatus == "success" %}
        <text>顾客实付</text>
      {% endif %}
      {% if paymentStatus != "success" %}
        <text>应付</text>
      {% endif %}
      <text align="right" space="4"></text>
      <text align="right" space="7">{{ payAmount }}</text>
    </line>
    <line>
      <text>预计收入</text>
      <text align="right">{{ income }}</text>
    </line>
    <separator char="-" />
    <line>
      <text>{{ consigneeAddress }}</text>
    </line>
    <line />
    <line>
      <text>{{ consigneeName }}</text>
    </line>
    <line>
      {% block consigneePhones %}
        <text>{{ $array_key$ }}  </text>
      {% endblock %}
    </line>
    <line>
      <text>{{ phoneAlertDescription }}</text>
    </line>
    {% if showOrderId %}
      <barcode style="normal" value="{{ id }}" />
      <line />
    {% endif %}
    <separator char="*">
      <text font="big"> #{{ daySn }}</text>
      <text>完 </text>
    </separator>
  </document>`},u9IB:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},uBy7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("Reue"),p=n("KcnZ"),u=n("RG6k"),d=n("DuSP"),h=n("ilQr"),m=n("NGSm"),f=(n.n(m),n("zALs")),g=n("4fS4");const v={vas:"vasStore",adv:"vasAdvStore"};let y=function(){function e(t,i,a,s,r,c,g){o()(this,e),this.action=i,this.orderCount=0,this.beat=a,this.autoConfirm=!1,this.ArenaAction=s,this.init(),this.clearComment=function(){this.action.setChainCheckDate()},this.chainRestaurantId=u.a.getChainRestaurantId(),this.grayEnable=u.a.getChainShopGray(),this.updatePollingResult(),p.a.onChangeWithScope(()=>{this.updatePollingResult()},t),l.a.onChangeWithScope(()=>{this.init()},t),this.shopDecoGray=d.a.getIsInGray(),d.a.onChangeWithScope(()=>{this.shopDecoGray=d.a.getIsInGray()}),this.notifyCount=h.a.getNoticeNum(),h.a.onChangeWithScope(()=>{t.$apply(()=>{this.notifyCount=h.a.getNoticeNum()})},t),m.container.on("comment.updateNotice",e=>{t.$apply(()=>{this.action.updateChainCommentNotice(e)})}),f.a.onChangeWithScope(()=>{this.orderCountChange()},t),t.kfcUserType=u.a.getKfcUserType(),t.showStatsDownloadInfo=!1,t.downloadWindowUnflod=!0,t.downloadItems=[],t.downloadSvgs=[n("c6lB"),n("Sut9"),n("fk9O"),n("8Z7U"),n("DYlY")],t.downloadLoopSec=5,t.downloadLoops={},t.completeTask=null,t.statsDownloadTitle=(()=>{let e=t.downloadItems.filter(e=>"FAILED"===e.status);if(e.length)return`出现${e.length}个问题`;let n=t.downloadItems.every(e=>t.isTaskFinished(e));if(n)return"已完成导出";return"正在导出..."}),t.downloadTitleWords=(()=>{let e=t.downloadItems.filter(e=>"FAILED"===e.status);if(e.length)return`导出过程中, 出现了 ${e.length} 个问题`;return"导出过程中，你仍可以正常操作其他页面。完成后将自动下载。"}),t.queryTaskList=function(){c.queryDownloadTasks().then(e=>{t.downloadItems=e||[];let n=t.downloadItems.filter(e=>!t.isTaskFinished(e));n.length&&n.forEach(e=>t.pollingQueryTask(e.id));t.showStatsDownloadInfo=!!t.downloadItems.length}).catch(e=>g.show("下载失败:"+e.message,!0))},t.queryTask=function(e){c.queryDownloadTaskDetail(e).then(n=>{let i=t.downloadItems.length&&t.downloadItems.some(t=>t.id===e);if(i){let i=t.downloadItems.filter(t=>t.id===e)[0],a=t.downloadItems.indexOf(i);t.isTaskFinished(n)&&(t.downloadItems.splice(a,1,n),t.stopPollingTask(e),t.completeTask=n)}else t.downloadItems.unshift(n)})},t.isTaskFinished=function(e){return"SUCCESS"===e.status||"FAILED"===e},t.stopPollingTask=function(e){t.downloadLoops[e]&&(r.cancel(t.downloadLoops[e]),delete t.downloadLoops[e])},t.pollingQueryTask=function(e){let n=r(()=>{t.queryTask(e)},1e3*t.downloadLoopSec);t.downloadLoops[e]=n},t.viewTaskDetail=function(e){t.completeTask=e},t.flodDownloadWin=(()=>{t.downloadWindowUnflod=!t.downloadWindowUnflod}),t.closeDownloadWin=(()=>{t.showStatsDownloadInfo=!1}),t.closeCompleteModal=(()=>{t.completeTask=null}),t.downloadFile=(e=>{let n=document.getElementById("dcsv");n||(n=document.createElement("a"),n.id="dcsv",n.style.display="none",document.body.appendChild(n));n.setAttribute("href",e);n.click();t.completeTask=null}),t.cancelDownload=[!1,!1],t.onDownloadChecking=!1,m.container.on("stats.chain.orders.download",e=>{t.showStatsDownloadInfo=!0;t.queryTask(e);t.pollingQueryTask(e)}),t.queryTaskList(),t.$on("$destroy",function(){t.downloadItems=[],m.container.off("stats.chain.orders.download")})}return c()(e,[{key:"init",value:function(){this.chainCommentNotice=l.a.getChainCommentNotice(),this.chainGrayInfo=l.a.getChainGrayInfo(),this.showAdvHintFlag()}},{key:"clickVas",value:function(){this.flag.showVas=!1,this.storage[v.vas]&&window.localStorage.setItem(v.vas,a()(this.storage[v.vas]))}},{key:"clickAdv",value:function(){this.flag.showAdv=!1,this.storage[v.adv]&&window.localStorage.setItem(v.adv,a()(this.storage[v.adv]))}},{key:"showAdvHintFlag",value:function(){let e=l.a.getAdvertisementStatus();this.flag={showVas:!1,showAdv:!1},this.storage={},this.storage[v.vas]=this.setNewStoreDeleteOldAdvId(v.vas,e),this.storage[v.adv]=this.setNewStoreDeleteOldAdvId(v.adv,e);for(let t in e){let n=e[t],i=3===n||4===n||5===n||6===n||7===n;i&&(this.flag.showVas=this.showFlagAndSetStore(v.vas,t,n)||this.flag.showVas,this.flag.showAdv=this.showFlagAndSetStore(v.adv,t,n)||this.flag.showAdv)}}},{key:"setNewStoreDeleteOldAdvId",value:function(e,t){let n=JSON.parse(window.localStorage.getItem(v.vas));if(!n)return{};let i={};for(let e in n)t[e]&&(i[e]=n[e]);return i}},{key:"showFlagAndSetStore",value:function(e,t,n){let i=this.storage[e];return(!i||!i[t]||i[t]!==n)&&(this.storage[e][t]=n,!0)}},{key:"orderCountChange",value:function(){if(!u.a.isChain()||this.grayEnable){var e=f.a.getNewOrderCount(),t=f.a.getReminderQueryCount(),n=f.a.getUnprocessedBookingOrderCount(),i=f.a.getUrgeOrderCount(),s=f.a.getPureRefundOrderCount(),o=f.a.getExceptionalOrderCount(),r=f.a.getCancelOrderCount(),c=f.a.getReminderOrderCountObj();if(this.orderCount=e+t,g.a._enabled||(g.a.activate=function(){},g.a.remove=function(){}),e>0){let e=f.a.getNewOrderIds();m.container.broadcast("order.queryNewOrder",JSON.parse(a()(e))),this.autoConfirm||g.a.activate("newOrder")}else g.a.remove("newOrder"),m.container.broadcast("order.clearNewOrder");m.container.broadcast("order.reminderOrderCount",JSON.parse(a()(c))),n>0?g.a.activate("booking"):g.a.remove("booking"),i>0?g.a.activate("urge"):g.a.remove("urge"),s>0?g.a.activate("refund"):g.a.remove("refund"),o>0?g.a.activate("exception"):g.a.remove("exception"),r>0?g.a.activate("cancel"):g.a.remove("cancel")}}},{key:"updatePollingResult",value:function(){this.pollingResult=p.a.getPolling()||{};try{this.activityCanApplyCount=this.pollingResult.activityApplyCountInfo.canApplyCount}catch(e){this.activityCanApplyCount=0}this.activityCanApplyCount>99&&(this.activityCanApplyCount="···")}}]),e}();y.$inject=["$scope","NavNoticeAction","beat","ArenaAction","$interval","StatsAction","Alert"],t.default=y},uHxT:function(e,t){e.exports="data:image/png;base64,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"},uJ7U:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("RG6k"),c=n("NGSm");n.n(c);let l=function(){function e(t,n,i,s,o,r,c,l){a()(this,e),this.scope=t,this.timeout=n,this.alert=i,this.action=s,this.shopApi=o.shop.app.invoke,this.OrderAction=r,this.beat=o,this.config=l,this.$state=c,this.rid=c.params.restaurantId,this.reasonType=1,t.$on("$stateChangeSuccess",()=>{this.shopStateInit()})}return o()(e,[{key:"$onInit",value:function(){this.shopStateInit(),this.getCloseReasons()}},{key:"$onDestroy",value:function(){this.timeoutId&&this.timeout.cancel(this.timeoutId),c.container.off("shop.closed")}},{key:"chooseTab",value:function(e){this.reasonType=e.index,this.closeReasonIndex=null}},{key:"getCloseReasons",value:function(){this.isNeedDialogItem=[],this.isNeedDescItem=[],fetch(this.config.crayfishCloseReasonListUrl).then(e=>e.json()).then(e=>{this.closeReasonList=e.reasonList.list;this.needOpenModalText=e.reasonList.needOpenModalText;this.needDescText=e.reasonList.needDescText})}},{key:"shopStateInit",value:function(){if(this.rid=this.$state.params.restaurantId,this.rid){let e=r.a.getCurrentRestaurant(),t=e.closeCountDown,n=e.busyLevel;t&&"open"===n&&(n="delay",this.delayFn(t)),this.state=n,this.businessHours=e.detail.is24HoursOpen?[{startTime:"00:00",endTime:"24:00"}]:e.detail.businessHours,this.nowIsInBusinessHour=e.detail.nowIsInBusinessHour,this.scope.$watch(()=>this.state,(e,t)=>{e&&e!==t&&this.notify(e)}),this.scope.$watch("$ctrl.closeReportModal",e=>{e||(this.reasonType=1,this.closeReasonIndex=null)}),c.container.on("shop.closed",()=>{this.timeoutId&&this.timeout.cancel(this.timeoutId);this.timeout(()=>{this.state="closed"})})}}},{key:"open",value:function(){"open"!==this.state&&this.action.openShop(this.rid).then(()=>{this.state="open"}).catch(this.errorHandle.bind(this))}},{key:"confirmReportClose",value:function(e){this.state!==e&&(this.closeShopType=e,this.closeReportModal=!0)}},{key:"reportCloseReason",value:function(){this.closeReason=this.closeReasonIndex,this.confirmClose()}},{key:"confirmClose",value:function(){this.beat.newOrder.app.invoke("OrderService.countOrder",{shopId:this.rid,orderFilter:"BOOKING_ORDER",condition:{bookingOrderType:"ALL"}}).then(e=>{0!==e?(this.bookingOrderCount=e,this.delayConfirmModal=!0,this.closeReportModal=!1):this.closeShop()}).catch(()=>{this.closeShop()})}},{key:"closeShop",value:function(){"delay"===this.closeShopType&&this.delay().then(()=>{this.delayConfirmModal=!1;this.closeReportModal=!1}),"immediacy"===this.closeShopType&&this.closed().then(()=>{this.delayConfirmModal=!1;this.closeReportModal=!1})}},{key:"delay",value:function(){return this.action.closeShop(this.rid,this.closeReason,this.reasonType).then(e=>{this.state="delay";this.delayFn(e);this.closeReason===this.needOpenModalText&&(this.stationComplaintModal=!0)}).catch(this.errorHandle.bind(this))}},{key:"delayFn",value:function(e){this.timeoutId=this.timeout(()=>{this.timeoutId=0;this.shopApi("queryShop.getAllShops").then(e=>{let t=e[0];let n=t.busyLevel;let i=t.closeCountDown;i&&"open"===n?this.delayFn(i):(this.state="closed",this.alert.show("延时关店生效，店铺已关闭",!0))})},1e3*e)}},{key:"closed",value:function(){return this.action.updateRestaurantBusyLevel(this.rid,"closed",this.closeReason,this.reasonType).then(()=>{this.state="closed";this.closeReason===this.needOpenModalText&&(this.stationComplaintModal=!0)}).catch(this.errorHandle.bind(this))}},{key:"errorHandle",value:function(e){this.alert.show(e.message,!0)}},{key:"notify",value:function(e){let t=r.a.getCurrentRestaurant();t.busyLevel=e,c.container.broadcast("shop.state_change",t)}},{key:"goFeedback",value:function(){this.$state.go("app.shop.feedback",{path:"complain",categoryIndex:1,issueIndex:14})}}]),e}();l.$inject=["$scope","$timeout","Alert","RestaurantAction","beat","OrderAction","$state","config"],t.a={controller:l,template:n("6f1h")}},uVkW:function(e,t){e.exports='<navitem ui-sref=app.multishop.processcenter> <span class="icon icon-order"></span> <span>处理中心</span> <span class=nav-notice-num ng-show="(unprocessedOrders.length + unprocessedRefundingOrders.length) > 0" style> {{(unprocessedOrders.length + unprocessedRefundingOrders.length) | noticeNum}} </span> </navitem> '},uXzz:function(e,t){e.exports='<div class=agreement-modal ng-class="{\'modal-open\': $ctrl.modalOpen}"> <div class=agreement-modal-container> <div class=agreement-modal-container-header> <div class=agreement-modal-title>{{$ctrl.agreement.title}}</div> <span ng-click=$ctrl.rejectAgreement()>×</span> </div> <div class=agreement-modal-container-body> <div class=agreement-modal-content ng-bind-html=$ctrl.agreement.content></div> </div> <div class=agreement-modal-container-footer> <span ng-repeat="action in $ctrl.agreement.actions.actionList" ng-class=action.signResult ng-click="$ctrl.buttonAction($ctrl.agreement.agreementId, action.signResult)"> {{action.description}} </span> </div> </div> </div> '},udFm:function(e,t){e.exports='<os-container os-src="{{vm.src}}" style=margin:-10px></os-container> '},ued3:function(e,t,n){"use strict";n("Zu7e")},ugHg:function(e,t){e.exports='<nav-history> <navitem ui-sref=app.shop.dashboard no-track ng-show="kfcUserType === \'common\'"> <span class="icon kwicon-s-home"></span> <span class=nav-text>首页</span> </navitem> <nav-list name=订单 icon=kwicon-s-order notice=$ctrl.orderNotice ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.multishop.processcenter ng-show=$ctrl.isMulti> <span class=nav-text>处理中心</span> <span class=nav-notice-num ng-show=$ctrl.mutliOrderCount> <i>{{$ctrl.mutliOrderCount | noticeNum}}</i> </span> </navitem> <navitem ng-hide=$ctrl.isMulti ui-sref=app.shop.order.processing ubt-click=101257> <span class=nav-text>订单处理</span> <span class=nav-notice-num ng-show=$ctrl.orderCount> <i>{{$ctrl.orderCount | noticeNum}}</i> </span> </navitem> <navitem ui-sref=app.shop.order.querying ubt-click=101258> <span class=nav-text>订单查询</span> </navitem> </nav-list> <nav-list name=商品 icon=kwicon-s-commodity auth-check ubt-click=102457 ubt-data-shop_id="{{$ctrl.shopId}}" permission=goods_read_goods ng-show="kfcUserType === \'common\'"> <navitem ui-sref="app.shop.food({path: \'management\'})" ubt-data-shop_id="{{$ctrl.shopId}}" ubt-click=102458> <span class=nav-text>商品管理</span> </navitem> <navitem ubt-click=102369 ubt-data-shop_id="{{$ctrl.shopId}}" ui-sref=app.shop.physical> <span class=nav-text>商品助手</span> </navitem> </nav-list> <nav-list name=顾客 icon=kwicon-s-custom notice=$ctrl.commentNotice ng-show="kfcUserType === \'common\' || kfcUserType === \'comment\'"> <navitem ui-sref=app.shop.comments ng-click=$ctrl.clearComment()> <span class=nav-text>顾客评价</span> <span ng-class=$ctrl.commentNotice.class>{{$ctrl.commentNotice.text}}</span> </navitem> <navitem ui-sref=app.shop.guarantee ng-click=$ctrl.clearComment() ubt-click=101261> <span class=nav-text>服务承诺</span> </navitem> <navitem ng-click=$ctrl.clearCrmNotice() ui-sref=app.shop.activity.crm> <span class=nav-text>精准营销</span> <span class=nav-notice-text ng-show=$ctrl.crmNotice>新</span> </navitem> </nav-list> <nav-list name=财务 icon=kwicon-s-finance ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.shop.bill ubt-click=101262> <span class=nav-text>资金管理</span> </navitem> <navitem ui-sref=app.shop.billDetail ubt-click=101263> <span class=nav-text>账单记录</span> </navitem> </nav-list> <nav-list icon=kwicon-s-shop name=门店 ng-show="kfcUserType === \'common\' || kfcUserType === \'shop\'"> <navitem ui-sref="app.shop.shop-info({path: \'index\', params: null})" ng-click="$ctrl.toShopInfo(\'index\')" auth-check ubt-click=101264 permission=shop_read_shop_info> <span class=nav-text>门店信息</span> </navitem> <navitem ng-if=$ctrl.shopDecoGray ui-sref=app.shop.decorate> <span class=nav-text>门店装修</span> <span class=nav-notice-text>新</span> </navitem> <navitem ui-sref=app.shop.welfare ubt-click=101265> <span class=nav-text>门店福利</span> </navitem> <navitem ui-sref="app.shop.delivery({path: \'index\'})" ng-click="$ctrl.toDeliveryInfo(\'index\')" auth-check ubt-click=101266 permission=shop_read_shop_delivery> <span class=nav-text>配送管理</span> </navitem> <navitem ui-sref="app.shop.setting({path: \'print\'})" ng-click=$ctrl.gotoSetting() ubt-click=101267> <span class=nav-text>设置</span> </navitem> <navitem ui-sref=app.shop.credit-score ubt-click=101268> <span class=nav-text>信用分</span> </navitem> </nav-list> <nav-list icon=kwicon-s-data name=数据 auth-check permission=data_read_data_info ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.shop.stats.business ubt-click=2972> <span class=nav-text>营业统计</span> </navitem> <navitem ui-sref=app.shop.stats.traffic ubt-click=2974> <span class=nav-text>流量分析</span> </navitem> <navitem ui-sref=app.shop.stats.food ubt-click=2976> <span class=nav-text>商品分析</span> </navitem> <navitem ui-sref=app.shop.stats.comment ubt-click=2983> <span class=nav-text>评价投诉</span> </navitem> <navitem ui-sref=app.shop.stats.custom ubt-click=2985> <span class=nav-text>顾客分析</span> </navitem> <navitem ui-sref=app.shop.stats.diagnosis ubt-click=3480> <span class=nav-text>经营体检</span> </navitem> <navitem ui-sref=app.shop.stats.industry ubt-click=101275> <span class=nav-text>商情参谋</span> </navitem> </nav-list> <nav-list icon=kwicon-s-marketing name=营销 ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.shop.activity.plantform ubt-click=101276> <span class=nav-text>平台活动</span> <span class=nav-notice-num ng-show=$ctrl.activityCanApplyCount> <i>{{ $ctrl.activityCanApplyCount }}</i> </span> </navitem> <navitem ui-sref=app.shop.activity.self ubt-click=101277> <span class=nav-text>自建活动</span> </navitem> </nav-list> <nav-list icon=kwicon-s-promotion name=店铺推广 notice=$ctrl._marketBidNotice ubt-click=100746 ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.shop.vas.bid ubt-click=100747 ng-click=$ctrl.clearMarketBidNotice()> <span class=nav-text>竞价推广</span> <span ng-class=$ctrl.marketBidNotice.class>{{$ctrl.marketBidNotice.text}}</span> </navitem> <navitem ng-click=$ctrl.clearVasSearchHintFlag() ui-sref=app.shop.vas.search ng-class="{\'flag-point-vas\': $ctrl.showSearchHintFlag}"> <span class=nav-text>关键词推广</span> </navitem> <navitem ui-sref=app.shop.vas.poscode ubt-click=101279 ng-click=$ctrl.clearPoscodeNotice()> <span class=nav-text>二维码推广</span> </navitem> <navitem ui-sref=app.shop.vas.adv ubt-click=101032 ng-class="{\'flag-point-vas\': $ctrl.flag.showAdv}"> <span class=nav-text>品牌展位</span> </navitem> <navitem ui-sref=app.shop.vas.afp> <span class=nav-text>支付宝推广</span> <span class="nav-notice-text poscode">限时</span> </navitem> <navitem ng-if=false ui-sref=app.shop.vas.das ng-class="{\'flag-point-vas\': $ctrl.flag.showAdv}"> <span class=nav-text>DAS在线制图</span> </navitem> <navitem ui-sref=app.shop.vas.speaker> <span class=nav-text>商家小喇叭</span> </navitem> <navitem ui-sref=app.shop.vas.account> <span class=nav-text>推广资金</span> </navitem> </nav-list> <navitem ui-sref=app.shop.pack ubt-click=101304 ng-show="kfcUserType === \'common\' && $ctrl.deliveryGary"> <span class="icon kwicon-s-cooperation"></span> <span class=nav-text>合作方案</span> </navitem> <nav-list name=服务市场 icon=kwicon-s-goods ng-show=!$ctrl.isChain> <navitem ui-sref="app.shop.appstore({ path: \'/appstore\'})" ubt-click=100415> <span class=nav-text>全部服务</span> </navitem> <navitem ui-sref="app.shop.appstore-mine({ path: \'/appstore/mine\'})" ubt-click=100415> <span class=nav-text>我的服务</span> </navitem> </nav-list> <nav-list name=帮助 icon=kwicon-s-help notice=$ctrl.helpNotice ng-show="kfcUserType === \'common\'"> <navitem ui-sref=app.shop.college ubt-click=3642> <span class=nav-text>商家学院</span> </navitem> <navitem ui-sref=app.shop.notice ubt-click=101308> <span class=nav-text>消息</span> <span class=nav-notice-num ng-show=$ctrl.notifyCount> <i>{{$ctrl.notifyCount | noticeNum}}</i> </span> </navitem> <navitem ui-sref=app.shop.feedback ubt-click=101309> <span class=nav-text>投诉反馈</span> <span class=nav-notice-dot ng-show=$ctrl.feedbackCount></span> </navitem> <navitem ui-sref=app.shop.ruleCenter> <span class=nav-text>规则中心</span> </navitem> </nav-list> </nav-history> '},uhNk:function(e,t,n){"use strict";function i(e,t,n){const i=t.url;e.billDetailUrl=`${i?decodeURIComponent(i):n.billDetailUrl}?shopId=${t.restaurantId}`,a.a.schedule(e.billDetailUrl),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$stateParams","config"]},uoCA:function(e,t,n){"use strict";var i=n("RG6k");t.a=i.a},uul8:function(e,t){var n;n=angular.module("infinite-scroll",[]),n.value("THROTTLE_MILLISECONDS",null),n.directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,t,n,i){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(a,s,o){var r,c,l,p,u,d,h,m,f,g,v,y,w,I,A,b,S,C;return C=angular.element(t),w=null,I=null,c=null,l=null,g=!0,S=!1,b=null,f=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},v=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+y(e)},y=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},m=function(){var t,n,i,o,r;return l===C?(t=f(l)+y(l[0].document.documentElement),i=v(s)+f(s)):(t=f(l),n=0,void 0!==v(l)&&(n=v(l)),i=v(s)-n+f(s)),S&&(i=f((s[0].ownerDocument||s[0].document).documentElement)),o=i-t,r=o<=f(l)*w+1,r?(c=!0,I?a.$$phase||e.$$phase?a.infiniteScroll():a.$apply(a.infiniteScroll):void 0):c=!1},A=function(e,t){var i,a,s;return s=null,a=0,i=function(){return a=(new Date).getTime(),n.cancel(s),s=null,e.call(),null},function(){var o,r;return o=(new Date).getTime(),r=t-(o-a),r<=0?(clearTimeout(s),n.cancel(s),s=null,a=o,e.call()):s?void 0:s=n(i,r,1)}},null!=i&&(m=A(m,i)),a.$on("$destroy",function(){if(l.unbind("scroll",m),null!=b)return b(),b=null}),d=function(e){return w=parseFloat(e)||0},a.$watch("infiniteScrollDistance",d),d(a.infiniteScrollDistance),u=function(e){if((I=!e)&&c)return c=!1,m()},a.$watch("infiniteScrollDisabled",u),u(a.infiniteScrollDisabled),h=function(e){return S=e},a.$watch("infiniteScrollUseDocumentBottom",h),h(a.infiniteScrollUseDocumentBottom),r=function(e){if(null!=l&&l.unbind("scroll",m),l=e,null!=e)return l.bind("scroll",m)},r(C),a.infiniteScrollListenForEvent&&(b=e.$on(a.infiniteScrollListenForEvent,m)),p=function(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return r(e);throw new Exception("invalid infinite-scroll-container attribute.")}},a.$watch("infiniteScrollContainer",p),p(a.infiniteScrollContainer||[]),null!=o.infiniteScrollParent&&r(angular.element(s.parent())),null!=o.infiniteScrollImmediateCheck&&(g=a.$eval(o.infiniteScrollImmediateCheck)),n(function(){if(g)return m()},0,1)}}}])},"v7/q":function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("o5Mu"),m=n.n(h),f=n("f4CT"),g=n("QAIe"),v=n.n(g);let y=function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.businessStaticsTotal={amountOfValidOrders:11111,averagePrice:22222.22,amountOfSales:3333,amountOfShopSubsidy:444,SalesDetailItems:[]},n.goodsSalesStats={page:0,pageCount:0,totalCount:0,goodsSalesDetails:[]},n.visitorSummary={shopId:0,statsDate:0,visitorCount:0,visitorCompare:0,buyerCount:0,buyerCompare:0,conversionRate:0,conversionCompare:0,bpVisitorCount:0,bpBuyerCount:0,bpConversionRate:0},n.visitorStats=[],n.rankInfo={restaurantId:0,statsDate:0,rank:0,stars:0,starsTopTwenty:0,invalidOrderRate:0,invalidOrderRateLastTwenty:0,withdrawOrderRate:0,withdrawOrderRateLastTwenty:0,complaintRate:0,complaintRateLastTwenty:0},n.download="",n.diagnosisResults={},n.diagnosisFoodResults={},n.isTimeEnsure=!1,n.rateOfZeroSales=0,n.zeroSalesGoods=[],n.visitorSummary={},n.VisitorTendSummary=[],n.visitorDetailInfo=[],n.abTestingSwitch=!1,n.abTestingSwitchIndustry=!1,n.abTestingSwitchChain=!1,n}return d()(t,e),c()(t,[{key:"getBusinessStaticsTotal",value:function(){return this.businessStaticsTotal}},{key:"getStaticTrend",value:function(){return this.businessStaticsTotal.SalesDetailItems}},{key:"getGoodsSalesStats",value:function(){return this.goodsSalesStats}},{key:"getSummary",value:function(){return this.visitorSummary}},{key:"getVisitorStats",value:function(){return this.visitorStats}},{key:"getRankInfo",value:function(){return this.rankInfo}},{key:"getDownLoad",value:function(){return this.download}},{key:"findByfoodId",value:function(e){return m()(this.goodsSalesStats.goodsSalesDetails,"foodId",e)}},{key:"findByGoodsId",value:function(e){for(var t=this.goodsSalesStats.goodsSalesDetails,n=0;n<t.length;n++){var i=t[n];if(i.goodsId===e)return i;if(i.goodsSalesDetails){var a=m()(i.goodsSalesDetails,"goodsId",e);if(a)return a}}return null}},{key:"setFoodFocused",value:function(e,t){var n=this.findByfoodId(e);n&&(n.focused=t)}},{key:"updateFoodPrice",value:function(e,t){var n=this.findByGoodsId(e);n&&(n.price=t)}},{key:"getDiagnosisResults",value:function(){return this.diagnosisResults}},{key:"getDiagnosisFoodResults",value:function(){return this.diagnosisFoodResults}},{key:"getDiagnosisHasTimeEnsure",value:function(){return this.isTimeEnsure}},{key:"getRateOfZeroSales",value:function(){return this.rateOfZeroSales}},{key:"getZeroSalesGoods",value:function(){return this.zeroSalesGoods}},{key:"getVisitorSummary",value:function(){return this.visitorSummary}},{key:"getVisitorTendSummary",value:function(){return this.VisitorTendSummary}},{key:"getVisitorDetailInfo",value:function(){return this.visitorDetailInfo}},{key:"getABTestingSwitch",value:function(){return this.abTestingSwitch}},{key:"getABTestingSwitchIndustry",value:function(){return this.abTestingSwitchIndustry}},{key:"getABTestingSwitchChain",value:function(){return this.abTestingSwitchChain}},{key:"getHandlers",value:function(){return{[f.a.LOAD_SALE_TOTAL]:e=>{this.businessStaticsTotal=e.salesDetailSummary},[f.a.LOAD_SALE_FOOD]:e=>{this.goodsSalesStats=e.goodsSalesStats},[f.a.SALE_DOWNLOAD]:e=>{this.download=e.download},[f.a.SET_FOOD_FOCUSED]:e=>{this.setFoodFocused(e.foodId,!0)},[f.a.SET_FOOD_UNFOCUSED]:e=>{this.setFoodFocused(e.foodId,!1)},[f.a.UPDATE_FOOD_PRICE]:e=>{this.updateFoodPrice(e.goodsId,e.price)},[f.a.LOAD_VISITOR_SUMMARY]:e=>{this.visitorSummary=e.visitorSummary},[f.a.LOAD_VISITOR_STATS]:e=>{this.visitorStats=e.visitorStats},[f.a.LOAD_RANK_INFO]:e=>{this.rankInfo=e.rankInfo},[f.a.LOAD_DIAGNOSIS_RESULTS]:e=>{this.diagnosisResults=e.diagnosisResults},[f.a.LOAD_DIAGNOSIS_FOODRESULTS]:e=>{this.diagnosisFoodResults=e.diagnosisFoodResults},[f.a.CHECK_IS_TIME_ENSURE]:e=>{this.isTimeEnsure=e.isTimeEnsure},[f.a.GET_RATE_OF_ZERO_SALES]:e=>{this.rateOfZeroSales=e.rateOfZeroSales},[f.a.GET_ZERO_SALES_GOODS]:e=>{this.zeroSalesGoods=e.zeroSalesGoods},[f.a.YESTERDAY_VISITOR_SUMMARY]:e=>{this.visitorSummary=e.data},[f.a.VISITOR_TREND_SUMMARY]:e=>{this.VisitorTendSummary=e.data},[f.a.VISITOR_DETAILINFO_SUMMARY]:e=>{this.visitorDetailInfo=e.data},[f.a.FETCH_AB_TESTING_SWITCH_DIAGNOSIS]:e=>{this.abTestingSwitch=e.result},[f.a.FETCH_AB_TESTING_SWITCH_INDUSTRY]:e=>{this.abTestingSwitchIndustry=e.result},[f.a.FETCH_AB_TESTING_SWITCH_CHAIN]:e=>{this.abTestingSwitchChain=e.result}}}}]),t}(v.a.Store);t.a=new y},vI2K:function(e,t,n){"use strict";function i(e="customer"){return b[e]}function a(e="customer"){return S[e]}function s(e={},t){const n=e.daySn,i=e.id,a=e.paymentStatus,s=e.consigneeName,o=e.consigneeAddress,c=e.remark,p=e.invoiceTitle,d=e.payAmount,m=e.phoneAlertDescription,g=e.statusForPrint,v=e.deliveryTime,y=e.downgraded,w=e.showOrderId,I=e.userTags,A=(I||[]).map(e=>`[${e}]`).join("");var b=e.income;const S=e.shopName,C=f()(1e3*e.activeTime).format("MM-DD HH:mm"),k=e.bookedTime?f()(1e3*e.bookedTime).format("MM-DD HH:mm"):null,O=e.groups.filter(e=>"normal"===e.type||"discount"===e.type),T=e.consigneePhones.map(e=>11===e.length?[e.slice(0,3),e.slice(3,7),e.slice(7,11)].join("-"):e);if(e.activities||e.hongbao||e.deliveryFee||e.deliveryFeeTotal){e.groups=e.groups||[];let t=h()(e.groups,e=>"extra"===e.type);t||e.groups.push({name:"其他",type:"extra",items:[]})}var D=l()(h()(e.groups,e=>"extra"===e.type)),N=null;if(N=u()(D,"items"),e.activities){let t=e.activities.map(e=>{var t=e.price||e.amount;e.total=-1*Math.abs(t);return e});N=N.concat(t)}e.hongbao&&N.push({name:"使用红包",total:-1*Math.abs(e.hongbao)}),e.vipDeliveryFeeDiscount&&N.push({name:"会员减免配送费",total:-1*Math.abs(e.vipDeliveryFeeDiscount)}),(e.deliveryFee||e.deliveryFeeTotal)&&N.push({name:"配送费",total:Math.abs(e.deliveryFee||e.deliveryFeeTotal)}),y&&(b="计算中");const E=u()(N,"length")&&"kitchen"!==t,R={daySn:n,id:i,paymentStatus:a,consigneeName:s,consigneePhones:T,consigneeAddress:o,remark:c,invoiceTitle:p,payAmount:d,restaurantName:S,activeTime:C,bookedTime:k,groups:O,others:N,othersShow:E,phoneAlertDescription:m,statusForPrint:g,income:b,deliveryTime:v,showOrderId:w,userTipshandled:A};return r()(R)}var o=n("mvHQ"),r=n.n(o),c=n("BXMS"),l=n.n(c),p=n("A7Dr"),u=n.n(p),d=n("o5Mu"),h=n.n(d),m=n("PJh5"),f=n.n(m),g=n("11e1"),v=n("6PMi"),y=n("TUA9"),w=n("Zarw"),I=n("fOfp"),A=n("u5Up");let b={customer:w.a,shop:A.a,kitchen:I.a},S={customer:g.a,shop:y.a,kitchen:v.a};t.a={getSmallTpl:i,getNormalTpl:a,getPrintData:s}},vT70:function(e,t,n){"use strict";function i(e,t,n){"ngInject";this.src=`${n.receiptUrl}?shopId=${t.restaurantId}`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config"]},vboK:function(e,t,n){"use strict";e.exports.controller=n("jEdY").default,e.exports.template=n("2Iso")},vjNt:function(e,t,n){"use strict";e.exports.controller=n("X7Vg").default,e.exports.template=n("djD6")},vjXx:function(e,t,n){e.exports.controller=n("/9hE").default,e.exports.template=n("uVkW")},wGlf:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";this.src=`${n.melodyStatsUrl}/app/chain/stats/info`;var s=a.a.schedule(this.src);a.a.watchSrc(i,s.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config","$scope"]},wPqq:function(e,t){e.exports="<div class=order-cards> <order-card order=order restaurant=getRestaurant(order.restaurantId) on-confirm-print=confirmPrintOrder on-invalidate-order=invalidateOrder deliverable=true on-copy=copyOrder on-print=printOrder on-agree-refund=agreeRefund on-refuse-refund=refuseRefund is-multi=true show-payment-state=true></order-card> </div> "},wUSg:function(e,t){e.exports="<tab ui-sref=app.chainshop.orgmanage.organization>组织机构管理</tab> <tab ui-sref=app.chainshop.orgmanage.manager ng-show=vm.show>人员管理</tab> <tab ui-sref=app.chainshop.orgmanage.role ng-show=vm.show>角色权限</tab> "},wnEP:function(e,t,n){"use strict";function i(e){e.state("app.chainshop.ordercarry",{url:"/ordercarry",views:{"wrapper@app":r.a}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),o=n("s9zU"),r=n.n(o);i.$inject=["$stateProvider"],s.a.module("app").config(i)},wtr9:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgNSAxMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBza2V0Y2h0b29sIDMuOC4zICgyOTgwMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+MUZBQUVEMTEtOEY4Qy00NkRGLTk1MzUtMEE1N0I0Q0QxN0ZFPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSLov57plIHlupfmnLrmnoTnrqHnkIYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLliIflm74iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMTMuMDAwMDAwLCAtNjcuMDAwMDAwKSIgZmlsbD0iIzRDNTE2NSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMTMuMDU0Nzg5LDcyLjIzMjIyNzYgQzIxMi45NTY3NjgsNzEuOTk0MzQ2NiAyMTIuOTg4ODYyLDcxLjcwMzI5OTMgMjEzLjE2MjQ0MSw3MS41MTIwMDcyIEwyMTcuMDk3Njk0LDY3LjE3MDQxOTMgQzIxNy4zMTIyODksNjYuOTMzODA1OCAyMTcuNjUwNTcxLDY2Ljk0NTA1MjggMjE3Ljg1Mzc4NSw2Ny4xOTQ5ODEyIEMyMTguMDU2NjIxLDY3LjQ0NTI4MzIgMjE4LjA0NzMyMyw2Ny44Mzk4NzQ4IDIxNy44MzI3MjgsNjguMDc2OTE1MyBMMjE0LjMwMTc4OCw3MS45NzMxNDY4IEwyMTcuODE4Nzk3LDc1LjkyNzIwMDggQzIxOC4wMzEyNjQsNzYuMTY2MzM1OSAyMTguMDM3NjkyLDc2LjU2MDkyNzUgMjE3LjgzMjcyOCw3Ni44MDkxMzQ5IEMyMTcuNzI3OTEzLDc2LjkzNjQxMzkgMjE3LjU4Nzg0Niw3NyAyMTcuNDQ3NzIzLDc3IEMyMTcuMzE0MDczLDc3IDIxNy4xODAzNzcsNzYuOTQxODE3MiAyMTcuMDc2NjQ5LDc2LjgyNTM4NSBMMjEzLjE3NzA3LDcyLjQ0MTM0NCBDMjEzLjE2OTU2Nyw3Mi40MzI2NTg2IDIxMy4xNjY3MzEsNzIuNDIwNTg0NSAyMTMuMTU5MjI3LDcyLjQxMTQ3MjIgQzIxMy4xNTM1MDgsNzIuNDA1MTc0OSAyMTMuMTQ3NDgxLDcyLjQwMDYyNTQgMjEzLjE0MTc3Myw3Mi4zOTM5NTQ2IEMyMTMuMTExNDYzLDcyLjM1Njk1ODMgMjEzLjA5NTQxNiw3Mi4zMTE2NTAyIDIxMy4wNzQ3NDgsNzIuMjY5MjEwNSBDMjEzLjA2OTA1Miw3Mi4yNTYzMjI1IDIxMy4wNTk3NzYsNzIuMjQ1NTQyNSAyMTMuMDU0Nzg5LDcyLjIzMjIyNzYgWiIgaWQ9Im5leHRfaXRlbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjUwMDAwMCwgNzIuMDAwMDAwKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMjE1LjUwMDAwMCwgLTcyLjAwMDAwMCkgIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},wvyT:function(e,t,n){"use strict";function i(){return function(e){return s.locale("zh-cn"),10===String(e).length&&(e*=1e3),s(e).fromNow()}}var a=n(0),s=n("PJh5");a.module("app").filter("getTimeAgo",i)},xC4f:function(e,t){e.exports=' <m-modal m-title="为了改帮助我们改善服务质量，请您对市场经理{{managerName}}的各项服务作出评价" size=large is-show=$ctrl.isEvaluateShow is-light=true unclose=true> <ul class=evaluation-lists> <li ng-repeat="question in $ctrl.marketManagerquestions track by $index"> <p>{{question.questionContent}}</p> <label ng-repeat="answer in question.answerList track by $index" for="{{\'answer\' + question.questionNum + $index}}"> <input class=regular-radio type=radio id="{{\'answer\' + question.questionNum + $index}}" name="{{\'answer\' + question.questionNum + $index}}" value="{{$index}}" ng-model=question.answer /> {{ answer }} </label> </li> </ul> <div class=submit-evaluation> <a class="btn btn-primary" ng-click=$ctrl.submitEvaluation()> 提交评价 </a> </div> </m-modal> <m-modal m-title=设置承诺出餐时间 is-show=$ctrl.updateTimeModal is-light=true size=large unclose=true> <div ng-form=$ctrl.mealTimeForm> <p class=color-gray>为了让用户在尽可能短的时间内收到餐品，我们需要您设置“承诺出餐时间”。即在您接单后的一定时间内，您需要制作完成餐品，按时出餐。</p> <input class=mr5 type=number name=promisedTime ng-model=$ctrl.promisedTime min=0 dynamic-maxvalue=$ctrl.maxTime required> <span class=color-gray>分钟</span> <br/> <div class="color-gray mt10"> 承诺出餐时间范围为{{$ctrl.promisedTimeRange}} </div> <p class=color-gray ng-show=$ctrl.isTrusteeship>如果由于您出餐时间过长导致用户投诉，饿了么会收取一定费用以赔偿给用户。请您务必设置一个可以接受的出餐时间，并保证按时出餐。</p> <div class="flex align-center justify-space-between"> <a class=span-link ng-click=$ctrl.showUpdateTomorrow()> 取消 </a> <button class="btn btn-primary mt10 mb10" ng-disabled=$ctrl.mealTimeForm.$invalid ng-autodisable ng-click=$ctrl.updateMealTakenTime()> 确认 </button> </div> </div> </m-modal> <m-modal m-title=温馨提示 is-show=$ctrl.shouldRemindUpdateDeliveryArea is-light=true size=large unclose=true> <p class=mt0>尊敬的商户：</p> <p class=mt0> &nbsp;&nbsp;&nbsp;&nbsp;饿了么配送服务进行了全面升级，增加了更多的配送运力，可以覆盖更大面积的配送范围，为您带来更多的订单量从而增加您的营业收入。所以饿了么将会把您当前的配送范围面积进行升级扩大，请您确认。 </p> <p class=mt0> &nbsp;&nbsp;&nbsp;&nbsp;确认后如果您需要对配送范围进行调整，请联系市场经理。 </p> <button class="btn btn-primary pull-right" ng-click=$ctrl.enlargeDeliveryArea()>知道了</button> </m-modal> <m-modal m-title=您的店铺已被置为无效状态 is-light=true is-show=$ctrl.shopDetail.invalid> <p>{{$ctrl.shopDetail.description}}</p> <button class="btn btn-primary pull-right" ng-click=$ctrl.shopDetailInvalidConfirm()>确定</button> </m-modal> <notice-modal></notice-modal> <agreement-modal></agreement-modal> <div ng-repeat="item in othersConfirmOrder track by $index"> <m-modal on-close=closeOthersConfirmOrder(item.id) m-title=打印提醒 is-show=true is-light=true size=small> <p class="color-gray mb20">{{ item.daySn }} 号订单被 {{ item.platformName }} 接单, 本设备未进行打印, 请及时确认</p> <div class="flex justify-end"> <button class="btn btn-default" ng-click=closeOthersConfirmOrder(item.id)> 知道了 </button> <button class="btn btn-primary ml10" ng-click=printOthersConfirmOrder(item)> 打印 </button> </div> </m-modal> </div> '},xITH:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("a+F3");let m=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"_$onInit",value:function(){return this.db.getActivityData(this.rid).then(e=>{this.canApply=e.canApply;this.applied=e.applied;this.activited=e.activited})}}]),t}(h.a);t.a={template:n("ORXn"),controller:m}},xPTZ:function(e,t){e.exports='<ul class=ml-pagination ng-show=$ctrl.total> <li class="ml-pagination-prev ml-pagination-item" ng-class="{\'ml-pagination-disabled\': $ctrl.current === 1}" ng-click=$ctrl.prev()><i class="icon icon-keyboard-left"></i></li> <li class=ml-pagination-item ng-repeat="https://shadow.elemecdn.com/faas/melody/num in $ctrl.list" ng-class="{\n      \'ml-pagination-active\': num === $ctrl.current,\n      \'ml-pagination-dot\': num === \'\'\n    }" ng-click=$ctrl.change(num)>{{num}}</li> <li class="ml-pagination-next ml-pagination-item" ng-class="{\'ml-pagination-disabled\': $ctrl.current === $ctrl.max}" ng-click=$ctrl.next()><i class="icon icon-keyboard-right"></i></li> </ul>'},xXwT:function(e,t,n){e.exports.controller=n("gedZ").default,e.exports.template=n("/5Nw")},xhgP:function(e,t){},xkjM:function(e,t,n){function i(e){return n(a(e))}function a(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./alpha":"Ah/w","alpha.js"/*tpa=https://shadow.elemecdn.com/faas/melody/alpha.js*/:"Ah/w","./alta":"9+yd","alta.js"/*tpa=https://shadow.elemecdn.com/faas/melody/alta.js*/:"9+yd","./altb":"6e6j","altb.js"/*tpa=https://shadow.elemecdn.com/faas/melody/altb.js*/:"6e6j","./ar":"hhEb","ar.js"/*tpa=https://shadow.elemecdn.com/faas/melody/ar.js*/:"hhEb","./beta":"XYl1","beta.js"/*tpa=https://shadow.elemecdn.com/faas/melody/beta.js*/:"XYl1","./production":"DLZP","production.js"/*tpa=https://shadow.elemecdn.com/faas/melody/production.js*/:"DLZP"};i.keys=function(){return Object.keys(s)},i.resolve=a,e.exports=i,i.id="xkjM"},xqP9:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}" style=margin:-10px></os-container> '},yEGd:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},ylHY:function(e,t){e.exports=' <m-modal m-title=蜂鸟快送-配送更灵活，价格更实惠 is-show=$ctrl.isSave is-light=true size=large unclose=true> <p class="mt0 mb10">尊敬的商户，饿了么蜂鸟快送是专门为商户打造的优质配送服务，采购蜂鸟快送享有以下特权：<br> 1.新快送商家和专送商家列表排序相同。<br> 2.新快送商家和专送商户共享「蜂鸟配送」图标。<br> 3.新快送配送服务费比专送更有优势。<br> 4.新快送商家配送范围相比专送更大，配送时间相比专送更长。 </p> <div class="horizontal justify-end"> <button class="btn btn-default mr-10" ng-click="$ctrl.isSave = false"> 联系市场经理进一步了解 </button> <button class="btn btn-primary" ng-click=$ctrl.saveNewDeliveryRule()> 好的，同意使用蜂鸟快送 </button> </div> </m-modal> '},ytIH:function(e,t){e.exports='<os-container os-src="{{$ctrl.src}}"></os-container>'},z4xQ:function(e,t,n){"use strict";function i(e){try{return JSON.parse(e)}catch(t){return e}}var a=n("mvHQ"),s=n.n(a),o=n("Zrlr"),r=n.n(o),c=n("wxAW"),l=n.n(c),p=n("QTWP"),u=n.n(p),d=n("depk"),h=n.n(d),m=n("eD1F"),f=n.n(m),g=n("v+2J"),v=n.n(g);let y=function(){function e(t){r()(this,e),this.$tracking={},t.$on("$stateChangeSuccess",(...e)=>{let t=e[1],n=e[2];let i=n.restaurantId;let a=t.name;let s=h()(f()(this.$tracking),a);if(!i||!s)return;let o=this.$tracking[a];this.add(i,a,n,o)})}return l()(e,[{key:"add",value:function(e,t,n,a){let o=i(window.localStorage.$history)||{},r=o[e]||[],c=u()(r,e=>e.stateName===t);r=-1!==c?[r[c],...r.slice(0,c),...r.slice(c+1)]:[{stateName:t,stateParams:n,title:a},...r].slice(0,6);let l=v()({},o,{[e]:r});window.localStorage.$history=s()(l)}},{key:"get",value:function(e){return(i(window.localStorage.$history)||{})[e]||[]}}]),e}();y.$inject=["$rootScope"],t.a=y},zALs:function(e,t,n){"use strict";var i=n("Zx67"),a=n.n(i),s=n("Zrlr"),o=n.n(s),r=n("wxAW"),c=n.n(r),l=n("zwoO"),p=n.n(l),u=n("Pf15"),d=n.n(u),h=n("YEW4"),m=n.n(h),f=n("A7Dr"),g=n.n(f),v=n("QAIe"),y=n.n(v),w=0,I=0,A=0,b=0,S=0,C=0,k=0,O=[],T={cancel:0,exception:0,refund:0,booking:0,remind:0};let D=function(e){function t(){return o()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"getNewOrderCount",value:function(){return w}},{key:"getReminderQueryCount",value:function(){return I}},{key:"getUnprocessedBookingOrderCount",value:function(){return A}},{key:"getUrgeOrderCount",value:function(){return b}},{key:"getPureRefundOrderCount",value:function(){return S}},{key:"getExceptionalOrderCount",value:function(){return C}},{key:"getCancelOrderCount",value:function(){return k}},{key:"getNewOrderIds",value:function(){return O}},{key:"getReminderOrderCountObj",value:function(){return T}},{key:"getHandlers",value:function(){return{UPDATE_NEW_ORDER_COUNT:e=>{w=g()(e,"newOrderCount",0)},UPDATE_NEW_ORDERIDS:e=>{O=g()(e,"orderIds",[])},SET_REMINDER_QUERY_COUNT:e=>{k=g()(e,"remindCount.cancelOrderCount",0);C=g()(e,"remindCount.exceptionalOrderCount",0);S=g()(e,"remindCount.pureRefundOrderCount",0);A=g()(e,"remindCount.unprocessedBookingOrderCount",0);b=g()(e,"remindCount.urgeOrderCount",0);I=g()(e,"remindCount.allRemindOrderFilteredCount",0);T.cancel=k;T.exception=C;T.refund=S;T.remind=b;T.booking=A},SET_2M_POLLING_COUNT:e=>{k=g()(e.pollingCount,"cancelOrderCount",0);C=g()(e.pollingCount,"exceptionalOrderCount",0);T.cancel=k;T.exception=C;I=0;m()(T,e=>{I+=e})},SET_5M_POLLING_COUNT:e=>{S=g()(e.pollingCount,"pureRefundOrderCount",0);b=g()(e.pollingCount,"urgeOrderCount",0);A=g()(e.pollingCount,"unprocessedBookingOrderCount",0);T.refund=S;T.remind=b;T.booking=A;I=0;m()(T,e=>{I+=e})}}}}]),t}(y.a.Store);t.a=new D},zAzf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n.n(i).a.module("app").config(["$stateProvider",e=>{"ngInject";e.state("app.shop.shop-info",{url:"/shop-info?path&action&params",reloadOnSearch:!1,views:{"wrapper@app":n("NWd1")}}).state("https://shadow.elemecdn.com/faas/melody/app.chainshop.shop",{url:"/shop-manage?status&valid",resolve:{},views:{"wrapper@app":n("5cqI")}}).state("app.shop.credit-score",{url:"/credit-score?anchor",views:{"wrapper@app":n("L9RH")}}).state("app.shop.welfare",{url:"/welfare",views:{"wrapper@app":n("+0Pk")}}).state("app.shop.delivery",{url:"/delivery",reloadOnSearch:!1,views:{"wrapper@app":n("37Ej")}})}])},zKfa:function(e,t,n){"use strict";function i(e,t,n){"ngInject";let i=`${n.fbsUrl}`;const s=t.path,o=t.categoryIndex,r=t.issueIndex;s&&(i+=`${s}`,o&&(i+=`?categoryIndex=${o}`,r&&(i+=`&issueIndex=${r}`))),this.src=i.indexOf("&")>-1?`${i}&shopId=${t.restaurantId}`:`${i}?shopId=${t.restaurantId}`,a.a.schedule(this.src),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$state","$stateParams","config"]},zOzo:function(e,t,n){"use strict";function i(e,t,n,i){"ngInject";var s=decodeURIComponent(n.anchor),o=`${i.creditScoreUrl}?shopId=${n.restaurantId}`;s&&"undefined"!==s&&(o+=`?anchor=${s}`),this.src=o;var r=a.a.schedule(this.src);a.a.watchSrc(e,r.iframe),a.a.hideAppWrapper()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("CfXW");i.$inject=["$scope","$state","$stateParams","config"]},zcUp:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),s=n("wxAW"),o=n.n(s),r=n("huSK"),c=n("NGSm");n.n(c);let l=function(){function e(t,n,i,s){a()(this,e),this.scope=t,this.shopApi=n.shop.app.invoke,this.beat=n,this.rid=i.params.restaurantId,this.$state=i,this.clientVersion=s||"5.0.4",this.api=n.browser.invoke,n.browser.on("pc.print.printersHasChanged",()=>{this.printStateInit()}),t.$on("$stateChangeSuccess",()=>{this.rid=i.params.restaurantId})}return o()(e,[{key:"$onInit",value:function(){this.printStateInit()}},{key:"printStateInit",value:function(){this.api("pc.print.getPrinters").then(e=>{this.connected=e.filter(e=>e.isEnabled).length;this.text=this.connected?"已连接":"未连接"})}},{key:"printsetting",value:function(e){!this.rid||r.a.versionCompare(this.clientVersion,"5.0.4")<=0||e.tip||this.$state.go("app.shop.setting",{path:"print"})}},{key:"gotoTip",value:function(e){e.tip=!0,this.$state.go("app.shop.setting",{path:"help"}),c.container.broadcast("https://shadow.elemecdn.com/faas/melody/state.sync","https://shadow.elemecdn.com/faas/melody/app.settings.help")}}]),e}();l.$inject=["$scope","beat","$state","clientVersion"],t.a={controller:l,template:n("Skq0")}},"zk+i":function(e,t,n){"use strict";function i(e,t,n){function i(){let t=r.a.getAutoConfirm(c.a.getCurrentProfile().username);e.autoConfirm=t[0],e.autoDelivery=t[1],e.autoDeliveryTemp=e.autoDelivery}function a(){e.unprocessedOrders=o.a.getUnprocessedOrders(),e.unprocessedRefundingOrders=o.a.getUnprocessedRefundingOrders()}i(),r.a.onChangeWithScope(i,e),e.autoConfirmModelShow=(()=>{e.autoConfirm?e.closeAutoConfirmModelShow=!0:(e.autoDeliveryTemp=!1,e.openAutoConfirmModelShow=!0)}),e.switchAutoConfirm=(()=>{r.a.getAllShops().forEach(n=>{t.setAutoConfirm(n.id,!e.autoConfirm,e.autoDeliveryTemp)});t.setAutoConfirm(s()(c.a.getCurrentProfile(),"username"),!e.autoConfirm,e.autoDeliveryTemp);e.openAutoConfirmModelShow=!1;e.closeAutoConfirmModelShow=!1}),a(),o.a.onChange(a),e.$on("$stateChangeSuccess",()=>{e.isSearching="app.multishop.processcenter.searching"===n.current.name})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("A7Dr"),s=n.n(a),o=n("9UnT"),r=n("RG6k"),c=n("t4A1");i.$inject=["$scope","RestaurantAction","$state"]},zwM3:function(e,t,n){"use strict";n("PX0p")},zz8v:function(e,t){e.exports='<os-container os-src="{{vm.src}}" style=margin:-10px></os-container>'}},[5]);